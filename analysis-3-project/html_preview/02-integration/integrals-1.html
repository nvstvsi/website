<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>integrals-1</title>
  <script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true,
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '0.8em',
      packages: {'[+]': ['ams']},
      macros: {
        R: '\\mathbb{R}',
        C: '\\mathbb{C}',
        N: '\\mathbb{N}',
        Z: '\\mathbb{Z}',
        Q: '\\mathbb{Q}',
        E: '\\mathbb{E}',
        F: '\\mathbb{F}',
        S: '\\mathbb{S}',
        H: '\\mathcal{H}',
        L: '\\mathcal{L}',
        dif: '\\,\\mathrm{d}',
        supp: '\\operatorname{supp}',
        proj: '\\operatorname{proj}',
        Id: '\\operatorname{Id}',
        Span: '\\operatorname{span}',
        graph: '\\operatorname{graph}',
        dist: '\\operatorname{dist}',
        diam: '\\operatorname{diam}',
        avg: '\\operatorname{avg}',
        div: '\\operatorname{div}',
        vol: '\\operatorname{vol}',
        ord: '\\operatorname{ord}',
        Chi: '\\mathbf{1}',
        sub: '\\subseteq',
        mres: '\\downharpoonright',
        ddag: '\\ddagger',
        dag: '\\dagger',
        norm: ['\\left\\| #1 \\right\\|', 1],
        abs: ['\\left| #1 \\right|', 1],
        set: ['\\left\\{ #1 \\right\\}', 1],
        inner: ['\\langle #1, #2 \\rangle', 2],
        floor: ['\\lfloor #1 \\rfloor', 1],
        ceil: ['\\lceil #1 \\rceil', 1],
        llbracket: '\\unicode{x27E6}',
        rrbracket: '\\unicode{x27E7}',
        bigskull: '\\unicode{x1F480}',
        skull: '\\unicode{x2620}',
        mathwitch: '\\unicode{x1F9D9}',
        pumpkin: '\\unicode{x1F383}',
        mathpumpkin: '\\unicode{x1F383}',
        bigpumpkin: '\\unicode{x1F383}',
        mathghost: '\\unicode{x1F47B}',
        mathcat: '\\unicode{x1F408}',
        mathbat: '\\unicode{x1F987}',
        esssup: '\\operatorname{ess\\,sup}',
        essinf: '\\operatorname{ess\\,inf}',
        Lip: '\\operatorname{Lip}',
        pd: ['\\frac{\\partial#1}{\\partial#2}', 2],
        od: ['\\frac{\\mathrm{d}#1}{\\mathrm{d}#2}', 2],
        dashint: '\\mathchoice{\\rlap{-}\\!\\int}{\\rlap{\\raise.15ex\\hbox{\\smash{\\scriptscriptstyle-}}}\\int}{\\rlap{\\raise.09ex\\hbox{\\smash{\\scriptscriptstyle-}}}\\int}{\\rlap{\\raise.09ex\\hbox{\\smash{\\scriptscriptstyle-}}}\\int}',
        eurologo: '\\unicode{x20AC}',
        starredbullet: '\\unicode{x2726}',
        grimace: '\\unicode{x1F62C}',
        textthing: '\\unicode{x2639}',
        noway: '\\unicode{x26D4}',
        warning: '\\unicode{x26A0}',
        danger: '\\unicode{x26A0}',
        textxswup: '\\unicode{x2195}',
        textxswdown: '\\unicode{x2195}',
        decoone: '\\unicode{x2756}',
        decotwo: '\\unicode{x2767}',
        decothreeleft: '\\unicode{x2619}',
        decothreeright: '\\unicode{x2767}',
        decofourleft: '\\unicode{x261A}',
        decofourright: '\\unicode{x261B}',
        floweroneleft: '\\unicode{x2740}',
        floweroneright: '\\unicode{x2740}',
        lefthand: '\\unicode{x261C}',
        righthand: '\\unicode{x261E}',
        decosix: '\\unicode{x2766}',
        bomb: '\\unicode{x1F4A3}',
        caution: '\\unicode{x2621}',
        leftblackhand: '\\unicode{x261A}',
        rightblackhand: '\\unicode{x261B}',
        leafleft: '\\unicode{x2618}',
        leafright: '\\unicode{x2618}',
        leafNW: '\\unicode{x2618}',
        leafNE: '\\unicode{x2618}',
        leafSE: '\\unicode{x2618}',
        leafSW: '\\unicode{x2618}',
        aldineleft: '\\unicode{x2619}',
        aldineright: '\\unicode{x2767}',
        aldine: '\\unicode{x2766}',
        aldinesmall: '\\unicode{x2767}',
        aldinesmallrevert: '\\unicode{x2619}',
        aldinesmallup: '\\unicode{x2766}',
        grappe: '\\unicode{x2766}',
        rightgrappe: '\\unicode{x2767}',
        leftgrappe: '\\unicode{x2619}',
        oldpilcrowone: '\\unicode{x00B6}',
        oldpilcrowtwo: '\\unicode{x00B6}',
        oldpilcrowthree: '\\unicode{x00B6}',
        oldpilcrowfour: '\\unicode{x00B6}',
        oldpilcrowfive: '\\unicode{x00B6}',
        oldpilcrowsix: '\\unicode{x00B6}'
      }
    },
    startup: {
      pageReady: () => {
        return MathJax.startup.defaultPageReady().then(() => {
          console.log('MathJax ready');
        });
      }
    }
  };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" id="MathJax-script"></script>
  <script>
  (function() {
    window.addEventListener('beforeunload', function() {
      saveProofState();
      saveCollapsibleState();
    });
    
    const eventSource = new EventSource('http://localhost:35729/reload-stream');
    
    eventSource.onmessage = function(event) {
      if (event.data === 'reload') {
        console.log('üìù File updated, saving state and reloading...');
        saveProofState();
        saveCollapsibleState();
        setTimeout(() => {
          window.location.reload();
        }, 50);
      }
    };
    
    eventSource.onerror = function() {
      console.log('‚ö†Ô∏è  Auto-reload server not available. Run node watch.js to enable auto-reload.');
      eventSource.close();
    };
    
    console.log('üîÑ Auto-reload enabled');
  })();
  </script>
  <style>
    * { box-sizing: border-box; }
    
    body {
      font-family: Georgia, "Times New Roman", serif;
      font-size: 16px;
      line-height: 1.7;
      margin: 0;
      padding: 0;
      color: #1a1a1a;
      background: #ffffff;
    }
    
    /* Layout with sidebar */
    .page-layout {
      display: flex;
      min-height: 100vh;
    }
    
    /* Sidebar styles */
    .sidebar {
      width: 280px;
      background: #fff;
      border-right: 1px solid #e0e0e0;
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      overflow-y: auto;
      padding: 20px 0;
      font-size: 14px;
    }
    
    .sidebar-header {
      padding: 15px 20px 25px;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .sidebar-header h1 {
      font-size: 1.3em;
      font-weight: 600;
      color: #1a1a1a;
      margin: 0 0 5px 0;
    }
    
    .sidebar-header .subtitle {
      font-size: 0.85em;
      color: #666;
      font-style: italic;
    }
    
    .sidebar-header .back-link {
      display: block;
      font-size: 0.8em;
      color: #666;
      text-decoration: none;
      margin-top: 12px;
    }
    
    .sidebar-header .back-link:hover {
      color: #1a1a1a;
    }
    
    .sidebar-nav {
      padding: 10px 0;
    }
    
    .chapter-group {
      margin-bottom: 2px;
    }
    
    .chapter-title {
      padding: 12px 20px;
      font-size: 0.9em;
      font-weight: 600;
      color: #333;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .chapter-title:hover {
      background: #f5f5f5;
    }
    
    .chapter-title .toggle {
      font-size: 0.65em;
      color: #999;
      transition: transform 0.2s;
    }
    
    .chapter-group.expanded .chapter-title .toggle {
      transform: rotate(90deg);
    }
    
    .section-list {
      display: none;
      padding: 5px 0;
      background: #f8f8f8;
    }
    
    .chapter-group.expanded .section-list {
      display: block;
    }
    
    .section-link {
      display: block;
      padding: 8px 20px 8px 35px;
      font-size: 0.85em;
      color: #555;
      text-decoration: none;
      border-left: 3px solid transparent;
    }
    
    .section-link:hover {
      background: #f0f0f0;
      color: #1a1a1a;
    }
    
    .section-link.active {
      background: #e8e8e8;
      border-left-color: #333;
      color: #000;
      font-weight: 500;
    }
    
    /* Main content area */
    .main-content {
      margin-left: 280px;
      flex: 1;
      max-width: 900px;
      padding: 40px 60px;
    }
    
    @media (max-width: 1100px) {
      .sidebar {
        width: 240px;
      }
      .main-content {
        margin-left: 240px;
        padding: 30px 40px;
      }
    }
    
    @media (max-width: 800px) {
      .sidebar {
        position: relative;
        width: 100%;
        height: auto;
        border-right: none;
        border-bottom: 1px solid #e0e0e0;
      }
      .main-content {
        margin-left: 0;
        padding: 20px;
      }
      .page-layout {
        flex-direction: column;
      }
    }
    
    h2, h3, h4 {
      margin-top: 2em;
      margin-bottom: 0.75em;
      color: #000;
      font-weight: 600;
    }
    h2 { font-size: 1.5em; border-bottom: 1px solid #e0e0e0; padding-bottom: 0.3em; }
    h3 { font-size: 1.25em; }
    h4 { font-size: 1.1em; }
    p {
      margin: 1em 0;
      text-indent: 2em;
    }
    p:first-of-type,
    h2 + p,
    h3 + p,
    h4 + p,
    .theorem-box + p,
    .proof-box + p {
      text-indent: 0;
    }
    .noindent + p,
    p:has(> .noindent:first-child) {
      text-indent: 0 !important;
    }
    .noindent {
      display: none;
    }
    .theorem-box {
      margin: 1.75em 0;
      padding: 1.25em;
      border-left: 5px solid #16a34a;
      background: linear-gradient(to top, #bbf7d0 0%, #d1fae5 100%);
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    .definition-box { border-left-color: #16a34a; background: linear-gradient(to top, #d1fae5 0%, #ecfdf5 100%); }
    .lemma-box { border-left-color: #1e3a8a; background: linear-gradient(to top, #bfdbfe 0%, #dbeafe 100%); }
    .corollary-box { border-left-color: #9333ea; background: linear-gradient(to top, #e9d5ff 0%, #f3e8ff 100%); }
    .proposition-box { border-left-color: #dc2626; background: linear-gradient(to top, #fecaca 0%, #fee2e2 100%); }
    .remark-box { border-left-color: #64748b; background: linear-gradient(to top, #e2e8f0 0%, #f1f5f9 100%); }
    .example-box { border-left-color: #0891b2; background: linear-gradient(to top, #a5f3fc 0%, #cffafe 100%); }
    .construction-box { border-left-color: #ea580c; background: linear-gradient(to top, #fed7aa 0%, #ffedd5 100%); }
    .notation-box { border-left-color: #ca8a04; background: linear-gradient(to top, #fef08a 0%, #fef9c3 100%); }
    .exercise-box { border-left-color: #ea580c; background: linear-gradient(to top, #fed7aa 0%, #ffedd5 100%); }
    .problem-box { border-left-color: #ec4899; background: linear-gradient(to top, #fbcfe8 0%, #fce7f3 100%); }
    .theorem-header {
      margin-bottom: 0.75em;
      font-size: 1.05em;
      font-weight: 600;
    }
    .theorem-header.clickable {
      cursor: pointer;
      user-select: none;
    }
    .theorem-header.clickable:hover {
      background: rgba(0,0,0,0.03);
      margin: -0.5em -0.75em 0.75em -0.75em;
      padding: 0.5em 0.75em;
      border-radius: 4px;
    }
    .collapsible-icon {
      display: inline-block;
      transition: transform 0.2s ease;
      font-size: 0.75em;
      margin-right: 0.5em;
      color: #6b7280;
    }
    .collapsible-box.collapsed .collapsible-icon {
      transform: rotate(-90deg);
    }
    .collapsible-content {
      transition: max-height 0.3s ease;
      overflow: hidden;
    }
    .collapsible-box.collapsed .collapsible-content {
      display: none;
    }
    .theorem-content {
      padding-left: 0.5em;
      line-height: 1.8;
    }
    .proof-box {
      margin: 1.5em 0;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      background: white;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }
    .proof-header {
      position: sticky;
      top: 0;
      background: linear-gradient(to bottom, #fafafa 0%, #f5f5f5 100%);
      border-bottom: 1px solid #e5e7eb;
      z-index: 100;
      border-radius: 6px 6px 0 0;
    }
    .proof-toggle {
      width: 100%;
      padding: 0.85em 1.25em;
      border: none;
      background: transparent;
      text-align: left;
      cursor: pointer;
      font-family: inherit;
      font-size: 1em;
      display: flex;
      align-items: center;
      gap: 0.75em;
      transition: background 0.15s;
    }
    .proof-toggle:hover { background: rgba(0,0,0,0.03); }
    .proof-toggle-icon {
      display: inline-block;
      transition: transform 0.2s ease;
      font-size: 0.75em;
      color: #6b7280;
    }
    .proof-box.collapsed .proof-toggle-icon {
      transform: rotate(-90deg);
    }
    .proof-content {
      padding: 1.25em;
      line-height: 1.8;
    }
    .proof-box.collapsed .proof-content {
      display: none;
    }
    .proof-end {
      float: right;
      font-size: 1.3em;
      margin-left: 0.5em;
      color: #374151;
    }
    .subproof {
      margin: 1em 0;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      background: #f9fafb;
    }
    .subproof-header {
      background: linear-gradient(to bottom, #f9fafb 0%, #f3f4f6 100%);
      border-bottom: 1px solid #d1d5db;
      border-radius: 4px 4px 0 0;
    }
    .subproof-toggle {
      width: 100%;
      padding: 0.6em 1em;
      border: none;
      background: transparent;
      text-align: left;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.95em;
      display: flex;
      align-items: center;
      gap: 0.5em;
      transition: background 0.15s;
    }
    .subproof-toggle:hover {
      background: rgba(0,0,0,0.03);
    }
    .subproof-toggle-icon {
      display: inline-block;
      transition: transform 0.2s ease;
      font-size: 0.7em;
      color: #6b7280;
    }
    .subproof.collapsed .subproof-toggle-icon {
      transform: rotate(-90deg);
    }
    .subproof-content {
      padding: 1em;
      line-height: 1.7;
    }
    .subproof.collapsed .subproof-content {
      display: none;
    }
    .ref-link {
      color: #2563eb;
      text-decoration: none;
      font-weight: 500;
      padding: 0 0.15em;
      border-radius: 2px;
    }
    .ref-link:hover {
      background: #dbeafe;
      text-decoration: underline;
    }
    .ref-unknown {
      color: #dc2626;
      font-weight: bold;
      background: #fee2e2;
      padding: 0.1em 0.3em;
      border-radius: 3px;
    }
    strong { font-weight: 600; }
    em { font-style: italic; }
    ol, ul {
      margin: 1em 0;
      padding-left: 2.5em;
      line-height: 1.8;
    }
    li {
      margin: 0.5em 0;
    }
    .latex-image {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 1.5em auto;
    }
    .latex-figure .latex-image {
      display: inline-block;
      margin: 0.5em;
      vertical-align: middle;
    }
    .latex-figure {
      margin: 2em 0;
      text-align: center;
      line-height: 0;
    }
    .latex-figure .figure-content {
      margin-bottom: 0.75em;
      line-height: normal;
    }
    .latex-figure .figure-content > * {
      vertical-align: middle;
    }
    .latex-figure figcaption {
      font-size: 0.9em;
      color: #4b5563;
      font-style: italic;
      margin-top: 0.5em;
    }
  </style>
</head>
<body>
  <div class="page-layout">
    <nav class="sidebar">
      <div class="sidebar-header">
        <h1>Analysis III</h1>
        <div class="subtitle">Measure Theory &amp; Integration</div>
        <a href="../index.html" class="back-link">‚Üê Table of Contents</a>
      </div>
      <div class="sidebar-nav">
        <div class="chapter-group expanded">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>1. Measure Theory</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../01-measure-theory/measure-theory.html" class="section-link">Overview</a>
            <a href="../01-measure-theory/basics.html" class="section-link">Outer Measures</a>
            <a href="../01-measure-theory/lebesgue-meas.html" class="section-link">Lebesgue Measure</a>
            <a href="../01-measure-theory/cantor.html" class="section-link">The Cantor Set</a>
            <a href="../01-measure-theory/measure-spaces.html" class="section-link">Measure Spaces</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>2. Integration</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../02-integration/integration.html" class="section-link">Overview</a>
            <a href="../02-integration/integrals-1.html" class="section-link">Simple Functions</a>
            <a href="../02-integration/integrals-2.html" class="section-link">General Functions</a>
            <a href="../02-integration/convergence.html" class="section-link">Convergence Theorems</a>
            <a href="../02-integration/inequality-party.html" class="section-link">Integral Inequalities</a>
            <a href="../02-integration/lp_spaces.html" class="section-link">L·µñ Spaces</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>3. Product Measures</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../03-fubini/fubini_ch.html" class="section-link">Overview</a>
            <a href="../03-fubini/fubini.html" class="section-link">Fubini-Tonelli</a>
            <a href="../03-fubini/integrals-3.html" class="section-link">Product Measures</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>4. Differentiation I</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../04-differentiation-1/differentiation.html" class="section-link">Overview</a>
            <a href="../04-differentiation-1/covering.html" class="section-link">Vitali Covering</a>
            <a href="../04-differentiation-1/monotone.html" class="section-link">Monotone Functions</a>
            <a href="../04-differentiation-1/BV_on_R.html" class="section-link">Bounded Variation</a>
            <a href="../04-differentiation-1/FTOC.html" class="section-link">FTC for Lebesgue</a>
            <a href="../04-differentiation-1/HL.html" class="section-link">Hardy-Littlewood</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>5. Differentiation I (cont)</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../05-differentiation-1/differentiation.html" class="section-link">Overview</a>
            <a href="../05-differentiation-1/r-nik.html" class="section-link">Radon-Nikodym</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>6. Differentiation II</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../06-differentiation-2/diff-2.html" class="section-link">Overview</a>
            <a href="../06-differentiation-2/vector-measures.html" class="section-link">Vector Measures</a>
            <a href="../06-differentiation-2/r-nik.html" class="section-link">Radon-Nikodym</a>
            <a href="../06-differentiation-2/besi.html" class="section-link">Besicovitch</a>
            <a href="../06-differentiation-2/densities.html" class="section-link">Densities</a>
            <a href="../06-differentiation-2/diff-measures.html" class="section-link">Measure Derivatives</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>7. Riesz Representation</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../06-riesz/riesz.html" class="section-link">Overview</a>
            <a href="../06-riesz/riesz_functional.html" class="section-link">Riesz Representation</a>
            <a href="../06-riesz/LCH_spaces.html" class="section-link">LCH Spaces</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>8. Integral Formulas</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../07-formulas/formulas.html" class="section-link">Overview</a>
            <a href="../07-formulas/hausdorff_meas.html" class="section-link">Hausdorff Measures</a>
            <a href="../07-formulas/lippy.html" class="section-link">Lipschitz Maps</a>
            <a href="../07-formulas/rademacher.html" class="section-link">Rademacher</a>
            <a href="../07-formulas/coarea-prereq.html" class="section-link">Coarea Prerequisites</a>
            <a href="../07-formulas/coarea.html" class="section-link">Coarea Formula</a>
            <a href="../07-formulas/area-prereq.html" class="section-link">Area Prerequisites</a>
            <a href="../07-formulas/area-formula.html" class="section-link">Area Formula</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>9. Extension Results</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../08-ext-res/ext-res.html" class="section-link">Overview</a>
            <a href="../08-ext-res/taylor_thm_integral_remainder.html" class="section-link">Taylor's Theorem</a>
            <a href="../08-ext-res/whitney-cover.html" class="section-link">Whitney Covering</a>
            <a href="../08-ext-res/whitney-partition-of-unity.html" class="section-link">Partition of Unity</a>
            <a href="../08-ext-res/whitney-decomposition.html" class="section-link">Decomposition</a>
            <a href="../08-ext-res/whitney-extension-theorem.html" class="section-link">Extension Theorem</a>
            <a href="../08-ext-res/whitney-extension-proof.html" class="section-link">Extension Proof</a>
            <a href="../08-ext-res/whitney-extension-applications.html" class="section-link">Applications</a>
            <a href="../08-ext-res/whitney-extension.html" class="section-link">Summary</a>
            <a href="../08-ext-res/more-bump.html" class="section-link">More Bump Functions</a>
          </div>
        </div>
      </div>
    </nav>
    
    <main class="main-content">
      <h2>The Lebesgue Integral</h2>
<p>Now that we have defined measure spaces and measurable functions, we would like to define the Lebesgue integral.
The Lebesgue integral is a generalization of the Riemann integral, and it fixes many of the deficiencies of the Riemann integral.</p>
<p><span class="noindent"></span>There are many different approaches to defining the Lebesgue integral, and they can all be shown to be equivalent.</p>
<h3>Integration of Nonnegative Functions with respect to a Measure</h3>
<p>Some people take an approach of defining the Lebesgue integral with a series of steps, but we will do it all at once.</p>
<div class="theorem-box definition-box" id="def:lebesgue_integral">
  <div class="theorem-header"><strong>Definition ?</strong> (Lower Lebesgue Sum, Lebesgue Integral of Nonnegative Function)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $P$ be a finite collection of disjoint measurable sets such that $\bigcup_{A \in P} A = X$.
    We call such a collection a <em>$\mu$-partition</em> of $(X,\mu)$.
<p><div style="margin: 1em 0;"></div></p>
<p><span class="noindent"></span>If $f : X \to [0,\infty]$ is a nonnegative measurable function, then we define the <em>lower Lebesgue sum</em> of $f$ with respect to the $\mu$-partition $P$ to be
    \[ L(f,P) = \sum_{A \in P} \inf_{x \in A} f(x) \mu(A). \]
    We then define the <em>Lebesgue integral</em> of $f$ with respect to $\mu$ to be
    \[ \int_X f \, \dif \mu := \sup_{P} L(f,P), \]
    where the supremum is taken over all $\mu$-partitions $P$ of $(X,\mu)$.</div>
</div></p>
<div class="theorem-box remark-box collapsible-box collapsed" id="rem:notation_for_lebesgue_integral" data-collapsible-id="collapsible-rem:notation_for_lebesgue_integral">
  <div class="theorem-header clickable" onclick="toggleCollapsible('collapsible-rem:notation_for_lebesgue_integral')">
    <span class="collapsible-icon">‚ñº</span>
    <strong>Remark ?</strong> (Notation for Lebesgue Integral)
  </div>
  <div class="theorem-content collapsible-content" id="collapsible-rem:notation_for_lebesgue_integral">We note that the symbol $\dif \mu$ is used to denote integration with respect to the measure $\mu$, and the symbol $\dif$ has no independent meaning here.
Sometimes people drop the $X$ in the integral sign and just write $\int f \, \dif \mu$ --- this is fine because the domain of integration is always the largest set in the $\sigma$-algebra on which $\mu$ is defined.
Sometimes people write the Lebesgue integral as $\int_X f(x) \, \dif \mu(x)$, and we will occasionally do this as well.
<p>We also remark that when we are integrating with respect to the Lebesgue measure on $\R^n$, we will usually write $\dif x$ instead of $\dif \mu$;
this is by tradition and conveience. (There is a connection to differential forms, but we will not discuss that here.)
In this case, we will usually write $\int_{\R^n} f(x) \, \dif x$.</div>
</div></p>
<div class="theorem-box lemma-box" id="lem:integral_of_characteristic_function">
  <div class="theorem-header"><strong>Lemma ?</strong> (Integral of Characteristic Function)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $A \subset X$ be a measurable set.
    Then
    \[ \int_X \Chi_A \, \dif \mu = \mu(A). \]</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-0">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-0')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-0">
    Since $A$, $X \setminus A$ is a $\mu$-partition of $(X,\mu)$, we clearly have
    $L(\Chi_A, \{A, X \setminus A\}) = \mu(A) $.
    Thus \[ \int_X \Chi_A \, \dif \mu \geq \mu(A). \]
<p>On the other hand, let $P$ be a $\mu$-partition of $(X,\mu)$ into disjoint measurable sets $A_1, \ldots, A_n$.
    Then for each $j=1,2,\ldots,n$ we see that
    \[ \inf_{x \in A_j} \Chi_A(x) = \begin{cases}
        1 & A_j \subset A, \\
        0 & A_j \not\subset A
    \end{cases} \]
    which implies
    \[ \mu(A_j)\inf_{A_j} \Chi_A = \begin{cases}
        \mu(A_j) & A_j \subset A, \\
        0 & A_j \not\subset A.
    \end{cases} \]
    Then we have
    \[ L(\Chi_A, P) = \sum_{j:A_j \subset A} \mu(A_j) = \mu\left( \bigcup_{j:A_j \subset A} A_j \right) \leq \mu(A). \]
    This holds for any $\mu$-partition $P$, so we have
    \[ \int_X \Chi_A \, \dif \mu = \sup_P L(\Chi_A, P) \leq \mu(A). \]
    Combining the two inequalities gives the result.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<p>Now that we know the integral of characteristic functions, we can upgrade this to simple functions.</p>
<div class="theorem-box lemma-box" id="lem:integral_of_simple_function">
  <div class="theorem-header"><strong>Lemma ?</strong> (Integral of Simple Function)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $s : X \to [0,\infty)$ be a nonnegative simple function,
    \[ s = \sum_{j=1}^n c_j \Chi_{A_j}, \]
    where $c_1, \ldots, c_n \geq 0$ and $A_1, \ldots, A_n$ are disjoint measurable sets.
    Then we have
    \[ \int_X s \, \dif \mu = \sum_{j=1}^n c_j \mu(A_j). \]</div>
</div>
<p>Some authors take this as the definition of the Lebesgue integral for simple functions, and then use this to define the Lebesgue integral for nonnegative measurable functions.
We do not take this approach, because it is not clear that the right-hand side is well-defined (i.e. independent of the representation of $s$ as a sum of characteristic functions).</p>
<div class="proof-box collapsed" data-proof-id="proof-num-1">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-1')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-1">
    Set $A_0 = X \setminus \bigcup_{i=1}^n A_i$.
    Then $A_0, A_1, \ldots, A_n$ is a $\mu$-partition of $(X,\mu)$, and we have
    \[ L(s, \{A_0, A_1, \ldots, A_n\}) = \sum_{j=1}^n c_j \mu(A_j). \]
    Thus
    \[ \int_X s \, \dif \mu \geq \sum_{j=1}^n c_j \mu(A_j). \]
<p>Now let $P$ be any $\mu$-partition of $(X,\mu)$ into disjoint measurable sets $B_1, \ldots, B_m$.
    Then we have
    \begin{align*}
        L(s,P) &= \sum_{j=1}^m \inf_{x \in B_j} s(x) \mu(B_j) \\
            &= \sum_{j=1}^m \min_{\{ i : B_j\cap A_i \neq \varnothing \}} c_i \,\mu(B_j) \\
            &\leq \sum_{j=1}^m \sum_{i=1}^n \mu(B_j\cap A_k) c_k \\
            &= \sum_{k=1}^n c_k \sum_{j=1}^m \mu(B_j \cap A_k) \\
            &= \sum_{k=1}^n c_k \mu(A_k).
    \end{align*}
    This holds for any $\mu$-partition $P$, so we have
    \[ \int_X s \, \dif \mu \leq \sum_{j=1}^n c_j \mu(A_j). \]
    Combining the two inequalities gives the result.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box lemma-box" id="lem:lebesgue_integral_is_order_preserving">
  <div class="theorem-header"><strong>Lemma ?</strong> (Lebesgue Integral is Order-Preserving)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $f,g : X \to [0,\infty]$ be nonnegative measurable functions such that $f(x) \leq g(x)$ for all $x \in X$.
    Then
    \[ \int_X f \, \dif \mu \leq \int_X g \, \dif \mu. \]</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-2">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-2')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-2">
    Let $P$ be any $\mu$-partition of $(X,\mu)$.
    Then for each set $A \in P$ we have
    \[ \inf_{x \in A} f(x) \leq \inf_{x \in A} g(x), \]
    which implies
    \[ L(f,P) = \sum_{A \in P} \inf_{x \in A} f(x) \mu(A) \leq \sum_{A \in P} \inf_{x \in A} g(x) \mu(A) = L(g,P). \]
    This holds for any $\mu$-partition $P$, so we have
    \[ \int_X f \, \dif \mu \leq \int_X g \, \dif \mu. \]
    <span class="proof-end">‚ñ°</span>
  </div>
</div>
<p>We finish this subsection by showing that that the integral of a general nonnegative measurable function can be approximated by integrals of simple functions.</p>
<div class="theorem-box lemma-box" id="lem:integrals_via_simple_functions">
  <div class="theorem-header"><strong>Lemma ?</strong> (Integrals via Simple Functions)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $f : X \to [0,\infty]$ be a nonnegative measurable function.
    Then \[ \int_X f \,\dif \mu = \sup\left\{ \int_X s \dif \mu : s \text{ is a simple function with } 0 \leq s \leq f \right\} \]</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-3">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-3')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-3">
    First note that the inequality $\geq$ is immediate from Lemma <span class="ref-unknown" title="Reference not found: lem:lebesgue_integral_is_order_preserving">[lem:lebesgue_integral_is_order_preserving?]</span>.
<p>For the reverse inequality, we assume first that we are in the special case where $\inf_{A} f > 0$ for each measurable set $A \subseteq X$ with $\mu(A) > 0$.
    (This is a technical assumption that we will remove later.)</p>
<p>Let $P$ be a $\mu$-partition of $(X,\mu)$ into disjoint nonempty measurable sets $A_1, \ldots, A_n$.
    For each $j=1,2,\ldots,n$, set $m_j = \inf_{x \in A_j} f(x)$. Then the function 
    \[ s = \sum_{j=1}^n m_j \Chi_{A_j} \]
    is a simple function with $0 \leq s \leq f$, and 
    \[ \int_X s \, \dif \mu = \sum_{j=1}^n m_j \,\mu(A_j) = \sum_{j=1}^\infty \,\inf_{x \in A_j} f(x) \,\mu(A_j) = L(f,P) \]
    where the first equality holds by Lemma <span class="ref-unknown" title="Reference not found: lem:integral_of_simple_function">[lem:integral_of_simple_function?]</span>.
    Therefore taking the supremum over all $\mu$-partitions $P$ gives
    \[ \int_X f \, \dif \mu = \sup_P L(f,P) \leq \sup\left\{ \int_X s \dif \mu : s \text{ is a simple function with } 0 \leq s \leq f \right\}. \]</p>
<p>Now we remove the technical assumption.
    Assume that there is a measurable set $A \subseteq X$ with $\mu(A) > 0$ and $\inf_A f = \infty$.
    Then we must have $f(x) = \infty$ for each $x \in A$.</p>
<p>In this case, for arbitrary $t>0$ the function $t\Chi_A$ is a simple function with $0 \leq t\Chi_A \leq f$, and
    \[ \int_X t\Chi_A \, \dif \mu = t \mu(A) \]
    by Lemma <span class="ref-unknown" title="Reference not found: lem:integral_of_characteristic_function">[lem:integral_of_characteristic_function?]</span>.
    Thus the supremum on the right-hand side is greater than $t\mu(A)$ for each $t>0$, and hence is infinite.
    Thus the inequality $\leq$ holds in this case as well, completeing the proof.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box example-box collapsible-box collapsed" id="ex:sums_are_integrals" data-collapsible-id="collapsible-ex:sums_are_integrals">
  <div class="theorem-header clickable" onclick="toggleCollapsible('collapsible-ex:sums_are_integrals')">
    <span class="collapsible-icon">‚ñº</span>
    <strong>Example ?</strong> (Sums are Integrals)
  </div>
  <div class="theorem-content collapsible-content" id="collapsible-ex:sums_are_integrals">Consider the counting measure $\mu$ on $\N$, and let $\{a_k\}_{k=0}^\infty$ be a sequence of nonnegative real numbers.
    Define $a : \N \to [0,\infty)$ by $a(n) = a_n$.
    Then we have
    \[ \int a \,\dif \mu = \sum_{k=0}^\infty a_k. \]</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-4">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-4')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-4">
    for each $n \in \N$, the set $\{n\}$ is measurable and has measure $\mu(\{n\}) = 1$.
    Thus for each $n \in \N$ the sum 
    \[ s_n := \sum_{j=0}^N a_j \Chi_{\{j\}} = \sum_{j=0}^N a_j \]
    is a simple function; the fact that the sequence $\{a_k\}_{k=0}^\infty$ is nonnegative implies that $0 \leq s_n \leq a$.
    By the previous lemma, we have
    \[ \int a \,\dif \mu \geq \int s_n \,\dif \mu = \sum_{j=0}^N a_j \]
    for each $N \in \N$; taking limits gives
    \[ \int a \,\dif \mu \geq \sum_{j=0}^\infty a_j. \]
<p>On the other hand, let $P$ be any $\mu$-partition of $(\N,\mu)$ into disjoint nonempty measurable sets $A_1, A_2, \ldots, A_m$.
    Then for each $j=1,2,\ldots,m$ we have
    \[ \inf_{n \in A_j} a(n) = \inf_{n \in A_j} a_n = \min_{n \in A_j} a_n \]
    since $A_j$ is a nonempty finite set.
    Thus we have
    \[ L(a,P) = \sum_{j=1}^m \inf_{n \in A_j} a(n) \mu(A_j) = \sum_{j=1}^m \min_{n \in A_j} a_n \cdot 1 \leq \sum_{j=1}^m \sum_{n \in A_j} a_n = \sum_{n=0}^\infty a_n. \]
    Taking the supremum over all $\mu$-partitions $P$ gives
    \[ \int a \,\dif \mu \leq \sum_{n=0}^\infty a_n. \]
    Combining the two inequalities gives the result.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<h3>Properties of the Lebesgue Integral</h3>
<p>Still only working with nonnegative measurable functions, we now prove some important properties of the Lebesgue integral.
One of the most important properties is the Monotone Convergence Theorem.</p>
<div class="theorem-box theorem-box" id="thm:monotone_convergence_theorem">
  <div class="theorem-header"><strong>Theorem ?</strong> (Monotone Convergence Theorem)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $\{f_k\}_{k=1}^\infty$ be a sequence of nonnegative measurable functions such that $f_k(x) \leq f_{k+1}(x)$ for all $x \in X$ and $k \in \N$.
    Define the function $f:X\to[0,\infty]$ by
    \[ f(x) = \lim_{k \to \infty} f_k(x) , \qquad \forall x\in X. \]
    Then 
    \[ \lim_{k \to \infty} \int_X f_k \, \dif \mu = \int_X f \, \dif \mu. \]</div>
</div>
<p>In essence, this says that one can interchange limits and integrals $\lim_k \int f_k \dif\mu = \int \lim_k f_k \dif\mu$ for monotone sequences of nonnegative measurable functions.</p>
<div class="proof-box collapsed" data-proof-id="proof-num-5">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-5')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-5">
    Note that the function $f$ is well-defined at each $x \in X$ because the sequence $\{f_k(x)\}_{k=1}^\infty$ is nondecreasing and bounded below by $0$;
    hence \[ f_k(x) \leq f(x) \qquad\forall x\in X,\forall k\geq 1.  \]
    Also note that $f$ is measurable because it is the pointwise limit of measurable functions.
<p>We remark that the limit $\lim_{k \to \infty} \int_X f_k \, \dif \mu$ exists because the sequence of integrals is nondecreasing (since $\{f_k\}_{k=1}^\infty$ is nondecreasing) and bounded below by $0$.
    Thus everything in the statement of the theorem is well-defined.</p>
<p>By Lemma <span class="ref-unknown" title="Reference not found: lem:lebesgue_integral_is_order_preserving">[lem:lebesgue_integral_is_order_preserving?]</span>, we have
    \[ \int_X f_k \, \dif \mu \leq \int_X f \, \dif \mu \qquad\forall k\geq 1, \]
    and thus
    \[ \lim_{k \to \infty} \int_X f_k \, \dif \mu \leq \int_X f \, \dif \mu. \]</p>
<p>To prove the reverse inequality, let $A_1, A_2, \ldots, A_n$ be disjoint measurable subsets of $X$, and let $c_1, c_2, \ldots, c_n \geq 0$ be such that
    \[ f(x) \geq \sum_{j=1}^m c_j \Chi_{A_j}(x) \qquad\forall x\in X. \]
    Let $t\in(0,1)$ be arbitrary.
    Then for each $k\in\Z^+$ we let
    \[ E^t_k := \left\{ x\in X : f_k(x) \geq t \sum_{j=1}^m c_j \Chi_{A_j}(x) \right\}. \]
    Then $\{E^t_k\}_{k=1}^\infty$ is an increasing sequence of measurable sets such that $\bigcup_{k=1}^\infty E^t_k = X$.
    By Proposition <span class="ref-unknown" title="Reference not found: prop:sequences_of_measurable_sets">[prop:sequences_of_measurable_sets?]</span>, we have
    \[ \lim_{k\to\infty} \mu(A_j\cap E^t_k) = \mu(A_j) \]
    for each $j=1,2,\ldots,m$.</p>
<p>If $k\in \Z^+$, then 
    \[ f_k(x) \geq \sum_{j=1}^m tc_j \Chi_{A_j\cap E^t_k} (x) \]
    for each $x\in X$, and thus by Lemma <span class="ref-unknown" title="Reference not found: lem:integral_of_simple_function">[lem:integral_of_simple_function?]</span> we have
    \[ \int_X f_k \, \dif \mu \geq t \sum_{j=1}^m c_j \mu(A_j\cap E^t_k). \]
    Taking limits as $k\to\infty$ gives
    \[ \lim_{k\to\infty} \int_X f_k \, \dif \mu \geq t \sum_{j=1}^m c_j \mu(A_j). \]
    Taking limits as $t\to 1^-$ gives
    \[ \lim_{k\to\infty} \int_X f_k \, \dif \mu \geq \sum_{j=1}^m c_j \mu(A_j). \]
    Taking the supremum over all choices of $m$, $c_1, \ldots, c_m$, and $A_1, \ldots, A_m$ gives
    \[ \lim_{k\to\infty} \int_X f_k \, \dif \mu \geq \int_X f \, \dif \mu. \]
    This completes the proof.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<p>In the Lemma <span class="ref-unknown" title="Reference not found: lem:integral_of_simple_function">[lem:integral_of_simple_function?]</span>, we computed the integral of a simple function once it had been expressed as a sum of characteristic functions of disjoint measurable sets.
This expression is not unique, and the assumption that the sets are disjoint is inconvenient.
It turns out that the integral of a simple function can be computed from any of its expressions and they all give the same answer.</p>
<div class="theorem-box lemma-box" id="lem:integral_of_simple_function_2">
  <div class="theorem-header"><strong>Lemma ?</strong> (Integral of Simple Functions, II.)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $s : X \to [0,\infty)$ be a nonnegative simple function.
    If
    \[ s = \sum_{j=1}^m a_j \Chi_{A_j} = \sum_{k=1}^n b_k \Chi_{B_k} \]
    are two representations of $s$ as nonnegative linear combinations of characteristic functions, then
    \[ \sum_{j=1}^m a_j \mu(A_j) = \sum_{k=1}^n b_k \mu(B_k). \]
    In particular, \[ \int_X s\,\dif\mu = \sum_{j=1}^m a_j \mu(A_j) \]</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-6">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-6')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-6">
    Let $A_0 = X \setminus \bigcup_{j=1}^m A_j$ so that $A_0, A_1, \ldots, A_m$ is a $\mu$-partition of $(X,\mu)$.
    If $A_i \cap A_j \neq \varnothing$ for some $i \neq j$, then we can write
    \[ a_i\Chi_{A_i} + a_j\Chi_{A_j} = a_i\Chi_{A_i \setminus A_j} + a_j\Chi_{A_j \setminus A_i} + (a_i + a_j)\Chi_{A_i \cap A_j} \]
    and the sets $A_i \setminus A_j$, $A_j \setminus A_i$, and $A_i \cap A_j$ are disjoint measurable sets.
<p>Thus for $0\leq i < j \leq m$ such that $A_i \cap A_j \neq \varnothing$, we have
    \[ A_i = (A_i \setminus A_j) \cup (A_i \cap A_j) \quad\text{ and }\quad A_j = (A_j \setminus A_i) \cup (A_i \cap A_j) \]
    and each of these unions is disjoint; hence
    \[ \mu(A_i) = \mu(A_i \setminus A_j) + \mu(A_i \cap A_j) \quad\text{ and }\quad \mu(A_j) = \mu(A_j \setminus A_i) + \mu(A_i \cap A_j) \]
    by disjoint additivity of $\mu$, and it follows that
    \[ a_i \mu(A_i) + a_j \mu(A_j) = a_i \mu(A_i \setminus A_j) + a_j \mu(A_j \setminus A_i) + (a_i + a_j) \mu(A_i \cap A_j). \]
    Thus for each $0\leq i < j \leq m$ such that $A_i \cap A_j \neq \varnothing$, we can replace the sets $A_i, A_j$ by the disjoint sets $A_i \setminus A_j$, $A_j \setminus A_i$, and $A_i \cap A_j$, and replace the coefficients $a_i, a_j$ by $a_i, a_j, a_i + a_j$ respectively; 
    the linear combinations of the characteristic functions and the sums of the measures weighted by the coefficients remain unchanged.</p>
<p>Repeating this process a finite number of times gives a representation of $s$ as a sum of characteristic functions of disjoint measurable sets.
    By relabeling, we have finitely many disjoint measurable sets $\tilde{A}_1, \ldots, \tilde{A}_N$, with nonnegative coefficients $\tilde{a}_1, \ldots, \tilde{a}_N \geq 0$, such that
    $s = \sum_{j=1}^N \tilde{a}_j \Chi_{\tilde{A}_j}.$</p>
<p>The next step is to make the numbers $\tilde{a}_1, \ldots, \tilde{a}_N$ distinct.
    If $\tilde{a}_i = \tilde{a}_j$ for some $i \neq j$, then $\tilde{A}_i \cup \tilde{A}_j$ is a measurable set, and disjoint additivity of $\mu$ gives
    \[ \tilde{a}_i \mu(\tilde{A}_i) + \tilde{a}_j \mu(\tilde{A}_j) = \tilde{a}_i \mu(\tilde{A}_i \cup \tilde{A}_j). \]
    Thus for each $i \neq j$ such that $\tilde{a}_i = \tilde{a}_j$, we can replace the sets $\tilde{A}_i, \tilde{A}_j$ by the single set $\tilde{A}_i \cup \tilde{A}_j$, and replace the coefficients $\tilde{a}_i, \tilde{a}_j$ by the single coefficient $\tilde{a}_i$.</p>
<p>Repeating this process a finite number of times gives a representation of $s$ as a sum of characteristic functions of disjoint measurable sets with distinct coefficients.
    By relabeling, we have finitely many disjoint measurable sets $\hat{A}_1, \ldots, \hat{A}_M$, with distinct nonnegative coefficients $\hat{a}_1, \ldots, \hat{a}_M \geq 0$, such that
    $s = \sum_{j=1}^M \hat{a}_j \Chi_{\hat{A}_j}.$</p>
<p>Finally if $1\leq j\leq M$ is such that $\hat{A}_j = \varnothing$, then we can simply remove this term from the sum without changing anything.
    Thus we may assume that $\hat{A}_1, \ldots, \hat{A}_M$ are nonempty disjoint measurable sets, and $\hat{a}_1, \ldots, \hat{a}_M$ are distinct nonnegative numbers.
    The expression $s = \sum_{j=1}^M \hat{a}_j \Chi_{\hat{A}_j}$ is the <em>standard form</em> of the simple function $s$.</p>
<p>We can now do the same process to the other representation $s = \sum_{k=1}^n b_k \Chi_{B_k}$ to obtain a standard form $s = \sum_{k=1}^M \hat{b}_k \Chi_{\hat{B}_k}$.
    By construction these standard forms must have the same number of terms (the number of distinct values that $s$ takes), and for each $j=1,2,\ldots,M$ there exists $k_j \in \{1,2,\ldots,M\}$ such that $\hat{A}_j = \hat{B}_{k_j}$ and $\hat{a}_j = \hat{b}_{k_j}$.
    Thus we have 
    \[ \sum_{j=1}^m a_j \mu(A_j) = \sum_{j=1}^M \hat{a}_j \mu(\hat{A}_j) = \sum_{k=1}^M \hat{b}_k \mu(\hat{B}_k) = \sum_{k=1}^n b_k \mu(B_k) \]
    as desired.</p>
<p>The fact that $\int_X s\,\dif\mu = \sum_{j=1}^m a_j \mu(A_j)$ follows from Lemma <span class="ref-unknown" title="Reference not found: lem:integral_of_simple_function">[lem:integral_of_simple_function?]</span>.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<p>We can now use the Monotone Convergence Theorem to prove additivity of the Lebesgue integral.</p>
<div class="theorem-box proposition-box" id="prop:additivity_for_nonnegative_functions">
  <div class="theorem-header"><strong>Proposition ?</strong> (Additivity for Nonnegative Functions)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $f,g : X \to [0,\infty]$ be nonnegative measurable functions.
    Then
    \[ \int_X (f+g)\,\dif\mu = \int_X f\,\dif\mu + \int_X g\,\dif\mu. \]</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-7">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-7')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-7">
    Note that for simple functions the result follows from Lemma <span class="ref-unknown" title="Reference not found: lem:integral_of_simple_function_2">[lem:integral_of_simple_function_2?]</span>.
    Thus we approximate by such functions and use the Monotone Convergence Theorem.
<p>Let $\{f_k\}_{k=1}^\infty$ and $\{g_k\}_{k=1}^\infty$ be increasing sequences of nonnegative simple functions such that 
    \[ \lim_{k \to \infty} f_k = f \quad \text{and} \quad \lim_{k \to \infty} g_k = g \]
    pointwise on $X$; such sequences exist by Proposition <span class="ref-unknown" title="Reference not found: prop:measurable_approx_by_simple_functions">[prop:measurable_approx_by_simple_functions?]</span>.
    Then the monotone convergence theorem gives
    \begin{align*}
        \int_X (f+g) \,\dif \mu &= \lim_{k \to \infty} \int_X (f_k + g_k) \,\dif \mu \\
            &= \lim_{k \to \infty} \int_X f_k \,\dif \mu + \lim_{k \to \infty} \int_X g_k \,\dif \mu \\
            &= \int_X f\,\dif\mu + \int_X g\,\dif\mu.
    \end{align*}
    Here we have used the Monotone Convergence Theorem in the first and last equalities, and the additivity of the integral for simple functions in the second equality.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<h3>Integration of Real and Complex Valued Functions</h3>
<div class="theorem-box definition-box" id="def:f_plus_minus">
  <div class="theorem-header"><strong>Definition ?</strong> ($f^+$, $f^-$)</div>
  <div class="theorem-content">Let $f : X \to [-\infty,\infty]$ be a function defined on a set $X$.
    We define the functions $f^+, f^- : X \to [0,\infty]$ by
    \[ f^+(x) := \max\{f(x),0\} \quad \text{ and } \quad f^-(x) := \max\{-f(x),0\} \qquad\forall x\in X. \]</div>
</div>
<div class="theorem-box remark-box collapsible-box collapsed" id="rem:f_plus_minus" data-collapsible-id="collapsible-rem:f_plus_minus">
  <div class="theorem-header clickable" onclick="toggleCollapsible('collapsible-rem:f_plus_minus')">
    <span class="collapsible-icon">‚ñº</span>
    <strong>Remark ?</strong>
  </div>
  <div class="theorem-content collapsible-content" id="collapsible-rem:f_plus_minus">Note that if $f$ is measurable, then $f^+$ and $f^-$ are nonnegative measurable functions, and that
    \[ f = f^+ - f^- \quad\text{and}\quad |f| = f^+ + f^-. \]</div>
</div>
<div class="theorem-box definition-box" id="def:lebesgue_integral_real_valued_case">
  <div class="theorem-header"><strong>Definition ?</strong> (Lebesgue Integral, Real-Valued Case)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $f : X \to [-\infty,\infty]$ be a measurable function 
    such that at least one of the integrals $\int_X f^+ \,\dif\mu$ or $\int_X f^- \,\dif\mu$ is finite.
    Then we define the <em>Lebesgue integral</em> of $f$ with respect to $\mu$ to be
    \[ \int_X f \,\dif\mu := \int_X f^+ \,\dif\mu - \int_X f^- \,\dif\mu. \]
    We say that $f$ is <em>integrable</em> if $\int_X f \,\dif\mu$ exists and is finite.</div>
</div>
<p>See that if $f\geq 0$, then $f^- = 0$ and $f^+ = f$, so this definition agrees with the previous definition for nonnegative measurable functions.
Also notice that we allow $f$ to take the values $\pm\infty$, but if $f$ takes either value on a set of positive measure, then the integral will be infinite.
Also notice that 
\begin{align*}
    f \text{ is integrable } &\iff \int_X f \,\dif \mu = \int_X f^+ \,\dif\mu - \int_X f^- \,\dif\mu \in \R \\
        &\iff \int_X f^+ \,\dif\mu < \infty \text{ and } \int_X f^- \,\dif\mu < \infty \\
        &\iff \int_X (f^+ + f^-) \,\dif\mu = \int_X |f| \,\dif\mu < \infty.
\end{align*}
where in the second line we have used that at most one of $\int_X f^+ \,\dif\mu$ or $\int_X f^- \,\dif\mu$ is infinite, since otherwise the integral of $f$ would not be defined.
Thus a real-valued measurable function is integrable if $\int_X |f| \,\dif\mu$ is finite.</p>
<div class="theorem-box definition-box" id="def:lebesgue_integral_complex_valued_case">
  <div class="theorem-header"><strong>Definition ?</strong> (Lebesgue Integral, Complex-Valued Case)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $f : X \to \C \cup \{ \infty \}$ be a measurable function such that $\int_X |f| \,\dif\mu$ is finite.
    Then we define the <em>Lebesgue integral</em> of $f$ with respect to $\mu$ to be
    \[ \int_X f \,\dif\mu := \int_X \Re(f) \,\dif\mu + i \int_X \Im(f) \,\dif\mu. \]
    If the integral $\int_X f \,\dif\mu$ is defined, then we say that $f$ is <em>integrable</em>.</div>
</div>
<p>Similarly here we allow $f$ to take the value $\infty$, but if it does so on a set of positive measure, then the integral will not be defined (since $\int_X |f| \,\dif\mu$ will be infinite).
We should take note here that for complex-valued functions, we require absolute integrability in order for the integral to be defined.
Also if $f$ is real-valued, then this definition agrees with the previous definition for real-valued functions.</p>
<p>We would like to state and prove properties of the Lebesgue integral in the real-valued and complex-valued cases we have just defined. 
For efficiency, we let $\F$ denote either $\R$ or $\C$, and we let $\F_\infty$ denote either $[-\infty,\infty]$ or $\C \cup \{\infty\}$ respectively.</p>
<div class="theorem-box proposition-box" id="prop:properties_of_the_lebesgue_integral">
  <div class="theorem-header"><strong>Proposition ?</strong> (Properties of the Lebesgue Integral)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space. 
    <ol style="list-style-type: lower-roman;"><li>(Homogeneity) If $f : X \to \F_\infty$ is a measurable function such that the integral $\int_X f \,\dif\mu$ is defined, and if $c \in \F$, then
            \[ \int_X cf \,\dif\mu = c \int_X f \,\dif\mu. \]
        </li><li>(Additivity) If $f,g : X \to \F_\infty$ are measurable functions such that $\int_X |f| \,\dif\mu$ and $\int_X |g| \,\dif\mu$ are both finite, then
            \[ \int_X (f+g) \,\dif\mu = \int_X f \,\dif\mu + \int_X g \,\dif\mu. \]
        </li><li>(Monotonicity) If $f,g : X \to [-\infty,\infty]$ are measurable functions such that $f \leq g$ and the integrals $\int_X f \dif\mu$ and $\int_X g \dif\mu$ are both defined, then
            \[ \int_X f \,\dif\mu \leq \int_X g \,\dif\mu. \]
        </li><li>(Triangle Inequality) If $f : X \to \F_\infty$ is a measurable function such that $\int_X f\,\dif\mu$ is defined, then
            \[ \left| \int_X f \,\dif\mu \right| \leq \int_X |f| \,\dif\mu. \]</li></ol></div>
</div>
<p>Notice the third property only applies to real-valued functions, since the complex numbers are not an ordered field.</p>
<div class="proof-box collapsed" data-proof-id="proof-num-8">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-8')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-8">
    <em>(i) Homogeneity.</em>
    <div style="margin: 1em 0;"></div>
<p><em>Case $\F = \R$.</em>
    First we consider the special case of nonnegative measurable functions and constants.
    Let $f : X \to [0,\infty]$ be a nonnegative measurable function, and let $c \geq 0$.
    Then for each $\mu$-partition $P$ of $(X,\mu)$ we have
    \[ L(cf,P) = \sum_{A \in P} \inf_{x \in A} cf(x) \mu(A) = c \sum_{A \in P} \inf_{x \in A} f(x) \mu(A) = c L(f,P). \]
    Taking the supremum over all $\mu$-partitions $P$ gives
    \[ \int_X cf \,\dif\mu = c \int_X f \,\dif\mu. \]</p>
<p>Now we consider the general case. 
    Let $f : X \to [-\infty,\infty]$ be a measurable function such that the integral $\int_X f \,\dif\mu$ is defined.
    If $c \geq 0$ , then we have
    \begin{align*}
        \int_X cf \,\dif\mu &= \int_X (cf)^+ \,\dif\mu - \int_X (cf)^- \,\dif\mu \\
            &= \int_X c f^+ \,\dif\mu - \int_X c f^- \,\dif\mu \\
            &= c \left( \int_X f^+ \,\dif\mu - \int_X f^- \,\dif\mu \right) \\
            &= c \int_X f \,\dif\mu
    \end{align*}
    where we have used the result for nonnegative measurable functions in the third equality.</p>
<p>If $c < 0$ then $-c>0$, and we have
    \begin{align*}
        \int_X cf \,\dif\mu &= \int_X (cf)^+ \,\dif\mu - \int_X (cf)^- \,\dif\mu \\
            &= \int_X (-c)f^- \,\dif\mu - \int_X (-c)f^+ \,\dif\mu \\
            &= -c \left( \int_X f^- \,\dif\mu - \int_X f^+ \,\dif\mu \right) \\
            &= (-c) \cdot \left( -\int_X f \,\dif\mu \right) \\
    \end{align*}
    which completes the proof of homogeneity.</p>
<p><div style="margin: 1em 0;"></div>
    <em>Case $\F = \C$.</em>
    Let $f : X \to \C \cup \{\infty\}$ be a measurable function such that $\int_X |f| \,\dif\mu$ is finite, and let $c \in \C$.
    Then
    \begin{align*}
        \int_X cf \,\dif\mu &= \int_X \Re(cf) \,\dif\mu + i \int_X \Im(cf) \,\dif\mu \\
            &= \Re(c) \int_X \Re(f) \,\dif\mu - \Im(c) \int_X \Im(f) \,\dif\mu + i\left( \Re(c) \int_X \Im(f) \,\dif\mu + \Im(c) \int_X \Re(f) \,\dif\mu \right) \\
            &= c\left( \int_X \Re(f) \,\dif\mu + i\int_X \Im(f) \,\dif\mu \right) \\
            &= c \int_X f \,\dif\mu
    \end{align*}
    where we have used homogeneity for real-valued functions in the second equality.
    This completes the proof of homogeneity.</p>
<p><div style="margin: 1em 0;"></div>
    <em>(ii) Additivity.</em>
    <div style="margin: 1em 0;"></div></p>
<p><em>Case $\F = \R$.</em>
    Let $f,g : X \to [-\infty,\infty]$ be measurable functions such that $\int_X |f| \,\dif\mu$ and $\int_X |g| \,\dif\mu$ are both finite.
    Then
    \[ (f+g)^+ - (f+g)^- = f + g = f^+ - f^- + g^+ - g^- \]
    which implies
    \[ (f+g)^+ + f^- + g^- = (f+g)^- + f^+ + g^+. \]
    Both sides of this equation are nonnegative measurable functions, so we can integrate both sides to obtain
    \[ \int_X (f+g)^+ \,\dif\mu + \int_X f^- \,\dif\mu + \int_X g^- \,\dif\mu = \int_X (f+g)^- \,\dif\mu + \int_X f^+ \,\dif\mu + \int_X g^+ \,\dif\mu \]
    by additivity of the Lebesgue integral for nonnegative measurable functions.</p>
<p>Rearranging gives
    \[ \int_X (f+g)^+ \,\dif\mu - \int_X (f+g)^- \,\dif\mu = \int_X f^+ \,\dif\mu - \int_X f^- \,\dif\mu + \int_X g^+ \,\dif\mu - \int_X g^- \,\dif\mu \]
    The left side is not of the form $\infty-\infty$ since $(f+g)^+ \leq f^+ + g^+$ and $(f+g)^- \leq f^- + g^-$, and the
    assumption that $\int_X |f| \,\dif\mu$ and $\int_X |g| \,\dif\mu$ are both finite to ensure that the integrals $\int_X f^\pm \dif \mu$ and $\int_X g^\pm \dif \mu$ are all finite, 
    and thus both of the integrals on the left side are also finite.</p>
<p>This last equation is exactly the desired result, by definition of the Lebesgue integral for general measurable functions.</p>
<p><em>Case $\F = \C$.</em> Let $f,g : X \to \C \cup \{\infty\}$ be measurable functions such that $\int_X |f| \,\dif\mu$ and $\int_X |g| \,\dif\mu$ are both finite.
    Then
    \begin{align*}
        \int_X (f+g) \,\dif\mu &= \int_X \Re(f+g) \,\dif\mu + i \int_X \Im(f+g) \,\dif\mu \\
            &= \int_X \Re(f) \,\dif\mu + \int_X \Re(g) \,\dif\mu + i \left( \int_X \Im(f) \,\dif\mu + \int_X \Im(g) \,\dif\mu \right) \\
            &= \left( \int_X \Re(f) \,\dif\mu + i \int_X \Im(f) \,\dif\mu \right) + \left( \int_X \Re(g) \,\dif\mu + i \int_X \Im(g) \,\dif\mu \right) \\
            &= \int_X f \,\dif\mu + \int_X g \,\dif\mu
    \end{align*}
    where we have used additivity for real-valued functions in the second equality.
    This completes the proof of additivity.</p>
<p><div style="margin: 1em 0;"></div>
    <em>(iii) Monotonicity.</em>
    <div style="margin: 1em 0;"></div></p>
<p>Let $f,g : X \to [-\infty,\infty]$ be measurable functions such that $f \leq g$ almost everywhere with respect to $\mu$ and the integrals $\int_X f \dif\mu$ and $\int_X g \dif\mu$ are both defined.
    If $\int_X f \dif\mu = \pm\infty$ or $\int_X g \dif\mu = \pm\infty$, then we check this case by case:
    <ul><li>If $\int_X f \dif\mu = -\infty$ or $\int_X g \dif\mu = \infty$, then trivially $\int_X f \dif\mu \leq \int_X g \dif\mu$.
        </li><li>If $\int_X f \dif\mu = \infty$, then we must have either $\int_X f^+ \dif\mu = \infty$ and $\int_X f^- \dif\mu < \infty$, or $\int_X f^+ \dif\mu < \infty$ and $\int_X f^- \dif\mu = \infty$.
            In the first subcase, we have $\int_X g^+ \dif\mu \geq \int_X f^+ \dif\mu = \infty$ and thus $\int_X g \dif\mu = \infty$; hence $\int_X f \dif\mu \leq \int_X g \dif\mu$.
            In the second subcase, we have $\int_X g^- \dif\mu \leq \int_X f^- \dif\mu = \infty$ and thus $\int_X g \dif\mu = -\infty$; hence $\int_X f \dif\mu \leq \int_X g \dif\mu$.
        </li><li>If $\int_X g \dif\mu = -\infty$, then this is similar to the previous case.</li></ul></p>
<p>Now assume that both $\int_X f \dif\mu$ and $\int_X g \dif\mu$ are finite.
    Then additivity and homogeneity with $c=-1$ give
    \[ \int_X (g-f) \dif\mu = \int_X g \dif\mu - \int_X f \dif\mu. \]
    Since $g-f \geq 0$, we have $\int_X (g-f) \dif\mu \geq 0$.
    Rearranging gives
    \[ \int_X g \dif\mu \geq \int_X f \dif\mu \]
    as desired.</p>
<p><div style="margin: 1em 0;"></div>
    <em>(iv) Triangle Inequality.</em>
    <div style="margin: 1em 0;"></div></p>
<p><em>Case $\F = \R$.</em>
    Let $f : X \to [-\infty,\infty]$ be a measurable function such that $\int_X f \dif\mu$ is defined.
    Then one of $\int_X f^+ \dif\mu$ or $\int_X f^- \dif\mu$ is finite.
    Thus 
    \begin{align*}
        \abs{ \int_X f \,\dif \mu } &= \abs{ \int_X f^+ \,\dif\mu - \int_X f^- \,\dif\mu } \\
            &\leq \int_X f^+ \,\dif\mu + \int_X f^- \,\dif\mu \\
            &= \int_X (f^+ + f^-) \,\dif\mu \\
            &= \int_X |f| \,\dif\mu
    \end{align*}
    where we have used the triangle inequality for real numbers in the second line, and additivity of the Lebesgue integral for nonnegative measurable functions in the third line.</p>
<p><div style="margin: 1em 0;"></div>
    <em>Case $\F = \C$.</em>
    Let $f : X \to \C \cup \{\infty\}$ be a measurable function such that $\int_X |f| \dif\mu$ is finite.
    If $\int_X f \dif\mu = 0$ then the inequality is trivial, so assume that $\int_X f \dif\mu \neq 0$.
    Then let 
    \[ \alpha := \frac{\left|\int_X f \dif\mu\right|}{\int_X f \dif\mu}. \]
    We compute that
    \begin{align*}
        \left| \int_X f \dif\mu \right| = \alpha \int_X f \dif\mu &= \int_X \alpha f \dif\mu \\
            &= \int_X \Re(\alpha f) \dif\mu + i \int_X \Im(\alpha f) \dif\mu \\
            &= \int_X \Re(\alpha f) \dif\mu \\
            &\leq \int_X |\alpha f| \dif\mu \\
            &= \int_X |f| \dif\mu
    \end{align*}
    where we have use homogeneity for complex-valued functions in the second equality, and the fact that $ \alpha \int_X f \dif\mu$ is a nonnegative real number in the fourth equality, 
    and the triangle inequality for real-valued functions in the inequality.
    This completes the proof of the triangle inequality.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<h3>Integration of $\R^m$-Valued Functions</h3>
<p>Sometimes we wish to integrate functions that take values in $\R^m$ or some vector space other than $\R$ or $\C$.
This can be done component-wise using the Lebesgue integral we have already defined.</p>
<div class="theorem-box definition-box" id="def:lebesgue_integral_vector_valued_case">
  <div class="theorem-header"><strong>Definition ?</strong> (Lebesgue Integral, Vector-Valued Case)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $f: X \to \R^m$ be a measurable function.
    We define the <em>Lebesgue integral</em> of $f$ with respect to $\mu$ as the vector
    \[ \int_X f \,\dif \mu := \left( \int_X f_1 \,\dif \mu, \int_X f_2 \,\dif \mu, \ldots, \int_X f_m \,\dif \mu \right) \in \R^m \]
    where $f_j: X \to \R$ is the $j$-th component function of $f$ for each $1 \leq j \leq m$.</div>
</div>
<div class="theorem-box proposition-box" id="prop:properties_of_the_lebesgue_integral_vector_valued_case">
  <div class="theorem-header"><strong>Proposition ?</strong> (Properties of the Lebesgue Integral, Vector-Valued Case)</div>
  <div class="theorem-content">Let $(X,\mu)$ be a measure space, and let $f,g: X \to \R^m$ be measurable functions.
    Then the following properties hold:
    <ol style="list-style-type: lower-roman;"><li>(Linearity) For each $\lambda\in \R$ we have
            \[ \int_X (f + \lambda g) \,\dif \mu = \int_X f \,\dif \mu + \lambda \int_X g \,\dif \mu. \]
        </li><li>(Triangle Inequality) We have
            \[ \left\| \int_X f \,\dif \mu \right\| \leq \int_X \| f \| \,\dif \mu. \]</li></ol></div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-9">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-9')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-9">
    Letting $f_1,f_2,\ldots,f_m: X \to \R$ and $g_1,g_2,\ldots,g_m: X \to \R$ be the component functions of $f$ and $g$ respectively, we have
    \begin{align*}
        \int_X (f + \lambda g) \,\dif \mu &= \left( \int_X (f_1 + \lambda g_1) \,\dif \mu, \ldots, \int_X (f_m + \lambda g_m) \,\dif \mu \right) \\
            &= \left( \int_X f_1 \,\dif \mu + \lambda \int_X g_1 \,\dif \mu, \ldots, \int_X f_m \,\dif \mu + \lambda \int_X g_m \,\dif \mu \right) &&\text{by linearity for real-valued case} \\
            &= \left( \int_X f_1 \,\dif \mu, \ldots, \int_X f_m \,\dif \mu \right) + \lambda \left( \int_X g_1 \,\dif \mu, \ldots, \int_X g_m \,\dif \mu \right) \\
            &= \int_X f \,\dif \mu + \lambda \int_X g \,\dif \mu.
    \end{align*}
<p><div style="margin: 1em 0;"></div></p>
<p>If $\int_X f \,\dif \mu = 0 \in \R^m$, the inequality is trivial, so we may assume that $\int_X f \,\dif \mu \neq 0$.</p>
<p>Let $v \in \R^m \setminus \{ 0 \}$ be arbitrary.
Then
\begin{align*}
    \left\langle v, \int_X f \,\dif \mu \right\rangle &= \sum_j v_j \int_X f_j \,\dif \mu \\
        &= \int_X \sum_j v_j f_j(x) \,\dif \mu(x) \\
        &=\int_X \langle v, f(x) \rangle \,\dif \mu(x) \\
        &\leq \int_X \| v \| \| f(x) \| \,\dif \mu(x) && \text{by Cauchy-Schwarz Inequality} \\
        &= \| v \| \int_X \| f(x) \| \,\dif \mu(x).
\end{align*}
By taking \[ v := \frac{ \int_X f \,\dif \mu }{\| \int_X f \,\dif \mu \|} \in \R^m \setminus \{0\} \]
which has norm $1$, we get
\[ \left\langle \frac{ \int_X f \,\dif \mu }{\| \int_X f \,\dif \mu \|}, \int_X f \,\dif \mu \right\rangle = \left\| \int_X f \,\dif \mu \right\| \]
and thus \[ \left\| \int_X f \,\dif \mu \right\| \leq \int_X \| f(x) \| \,\dif \mu(x). \]
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
    </main>
  </div>
  
  <script>
    function toggleChapter(element) {
      element.parentElement.classList.toggle('expanded');
    }
    
    // Highlight current page in sidebar
    document.addEventListener('DOMContentLoaded', () => {
      const currentPath = window.location.pathname;
      const links = document.querySelectorAll('.section-link');
      links.forEach(link => {
        if (currentPath.endsWith(link.getAttribute('href').split('/').pop())) {
          link.classList.add('active');
          // Expand parent chapter
          const group = link.closest('.chapter-group');
          if (group) group.classList.add('expanded');
        }
      });
    });
    
    window.addEventListener('DOMContentLoaded', () => {
      console.log('Restoring proof collapse states...');
      try {
        const openProofs = JSON.parse(localStorage.getItem('openProofs') || '{}');
        const currentPage = window.location.pathname;
        const pageOpen = openProofs[currentPage] || [];
        
        console.log('Current page:', currentPage);
        console.log('Open proof IDs stored:', pageOpen);
        console.log('Found ' + pageOpen.length + ' open proofs for this page');
        
        document.querySelectorAll('.proof-box').forEach(box => {
          const proofId = box.getAttribute('data-proof-id');
          console.log('Checking proof:', proofId, 'Should be open:', pageOpen.includes(proofId));
          if (pageOpen.includes(proofId)) {
            box.classList.remove('collapsed');
            const button = box.querySelector('.proof-toggle');
            button.setAttribute('aria-expanded', 'true');
          } else {
            box.classList.add('collapsed');
            const button = box.querySelector('.proof-toggle');
            button.setAttribute('aria-expanded', 'false');
          }
        });
        
        const openBoxes = JSON.parse(localStorage.getItem('openBoxes') || '{}');
        const pageBoxes = openBoxes[currentPage] || [];
        
        console.log('Open box IDs stored:', pageBoxes);
        
        document.querySelectorAll('.collapsible-box').forEach(box => {
          const boxId = box.getAttribute('data-collapsible-id');
          console.log('Checking box:', boxId, 'Should be open:', pageBoxes.includes(boxId));
          if (pageBoxes.includes(boxId)) {
            box.classList.remove('collapsed');
          } else {
            box.classList.add('collapsed');
          }
        });
        
        console.log('Proof states restored');
      } catch (e) {
        console.error('Error restoring collapse state:', e);
      }
    });
    
    function toggleProof(proofId) {
      const proofContent = document.getElementById(proofId);
      const proofBox = proofContent.closest('.proof-box');
      proofBox.classList.toggle('collapsed');
      
      const button = proofBox.querySelector('.proof-toggle');
      button.setAttribute('aria-expanded', !proofBox.classList.contains('collapsed'));
      
      saveProofState();
    }
    
    function toggleSubproof(subproofId) {
      const subproofContent = document.getElementById(subproofId);
      const subproof = subproofContent.closest('.subproof');
      subproof.classList.toggle('collapsed');
      
      const button = subproof.querySelector('.subproof-toggle');
      button.setAttribute('aria-expanded', !subproof.classList.contains('collapsed'));
    }
    
    function saveProofState() {
      try {
        const currentPage = window.location.pathname;
        const openProofs = JSON.parse(localStorage.getItem('openProofs') || '{}');
        if (!openProofs[currentPage]) {
          openProofs[currentPage] = [];
        }
        
        openProofs[currentPage] = [];
        document.querySelectorAll('.proof-box:not(.collapsed)').forEach(box => {
          const proofId = box.getAttribute('data-proof-id');
          if (proofId) {
            openProofs[currentPage].push(proofId);
          }
        });
        
        localStorage.setItem('openProofs', JSON.stringify(openProofs));
        console.log('Saved proof state (open proofs):', openProofs[currentPage]);
      } catch (e) {
        console.error('Error saving collapse state:', e);
      }
    }
    
    function toggleCollapsible(collapsibleId) {
      const content = document.getElementById(collapsibleId);
      const box = content.closest('.collapsible-box');
      box.classList.toggle('collapsed');
      
      saveCollapsibleState();
    }
    
    function saveCollapsibleState() {
      try {
        const currentPage = window.location.pathname;
        const openBoxes = JSON.parse(localStorage.getItem('openBoxes') || '{}');
        if (!openBoxes[currentPage]) {
          openBoxes[currentPage] = [];
        }
        
        openBoxes[currentPage] = [];
        document.querySelectorAll('.collapsible-box:not(.collapsed)').forEach(box => {
          const boxId = box.getAttribute('data-collapsible-id');
          if (boxId) {
            openBoxes[currentPage].push(boxId);
          }
        });
        
        localStorage.setItem('openBoxes', JSON.stringify(openBoxes));
      } catch (e) {
        console.error('Error saving box state:', e);
      }
    }
    
    document.addEventListener('keydown', (e) => {
      if (e.key === 'p' && e.ctrlKey) {
        e.preventDefault();
        const proofBoxes = document.querySelectorAll('.proof-box');
        const anyExpanded = Array.from(proofBoxes).some(box => !box.classList.contains('collapsed'));
        
        proofBoxes.forEach(box => {
          if (anyExpanded) {
            box.classList.add('collapsed');
          } else {
            box.classList.remove('collapsed');
          }
        });
        
        saveProofState();
      }
    });
    
    document.querySelectorAll('a.ref-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href').substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'center' });
          target.style.background = '#fef3c7';
          target.style.transition = 'background 0.3s ease';
          setTimeout(() => { target.style.background = ''; }, 1500);
        }
      });
    });
  </script>
</body>
</html>