<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>basics</title>
  <script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true,
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '0.8em',
      packages: {'[+]': ['ams']},
      macros: {
        R: '\\mathbb{R}',
        C: '\\mathbb{C}',
        N: '\\mathbb{N}',
        Z: '\\mathbb{Z}',
        Q: '\\mathbb{Q}',
        E: '\\mathbb{E}',
        F: '\\mathbb{F}',
        S: '\\mathbb{S}',
        H: '\\mathcal{H}',
        L: '\\mathcal{L}',
        dif: '\\,\\mathrm{d}',
        supp: '\\operatorname{supp}',
        proj: '\\operatorname{proj}',
        Id: '\\operatorname{Id}',
        Span: '\\operatorname{span}',
        graph: '\\operatorname{graph}',
        dist: '\\operatorname{dist}',
        diam: '\\operatorname{diam}',
        avg: '\\operatorname{avg}',
        div: '\\operatorname{div}',
        vol: '\\operatorname{vol}',
        ord: '\\operatorname{ord}',
        Chi: '\\mathbf{1}',
        sub: '\\subseteq',
        mres: '\\downharpoonright',
        ddag: '\\ddagger',
        dag: '\\dagger',
        norm: ['\\left\\| #1 \\right\\|', 1],
        abs: ['\\left| #1 \\right|', 1],
        set: ['\\left\\{ #1 \\right\\}', 1],
        inner: ['\\langle #1, #2 \\rangle', 2],
        floor: ['\\lfloor #1 \\rfloor', 1],
        ceil: ['\\lceil #1 \\rceil', 1],
        llbracket: '\\unicode{x27E6}',
        rrbracket: '\\unicode{x27E7}',
        bigskull: '\\unicode{x1F480}',
        skull: '\\unicode{x2620}',
        mathwitch: '\\unicode{x1F9D9}',
        pumpkin: '\\unicode{x1F383}',
        mathpumpkin: '\\unicode{x1F383}',
        bigpumpkin: '\\unicode{x1F383}',
        mathghost: '\\unicode{x1F47B}',
        mathcat: '\\unicode{x1F408}',
        mathbat: '\\unicode{x1F987}',
        esssup: '\\operatorname{ess\\,sup}',
        essinf: '\\operatorname{ess\\,inf}',
        Lip: '\\operatorname{Lip}',
        pd: ['\\frac{\\partial#1}{\\partial#2}', 2],
        od: ['\\frac{\\mathrm{d}#1}{\\mathrm{d}#2}', 2],
        dashint: '\\mathchoice{\\rlap{-}\\!\\int}{\\rlap{\\raise.15ex\\hbox{\\smash{\\scriptscriptstyle-}}}\\int}{\\rlap{\\raise.09ex\\hbox{\\smash{\\scriptscriptstyle-}}}\\int}{\\rlap{\\raise.09ex\\hbox{\\smash{\\scriptscriptstyle-}}}\\int}',
        eurologo: '\\unicode{x20AC}',
        starredbullet: '\\unicode{x2726}',
        grimace: '\\unicode{x1F62C}',
        textthing: '\\unicode{x2639}',
        noway: '\\unicode{x26D4}',
        warning: '\\unicode{x26A0}',
        danger: '\\unicode{x26A0}',
        textxswup: '\\unicode{x2195}',
        textxswdown: '\\unicode{x2195}',
        decoone: '\\unicode{x2756}',
        decotwo: '\\unicode{x2767}',
        decothreeleft: '\\unicode{x2619}',
        decothreeright: '\\unicode{x2767}',
        decofourleft: '\\unicode{x261A}',
        decofourright: '\\unicode{x261B}',
        floweroneleft: '\\unicode{x2740}',
        floweroneright: '\\unicode{x2740}',
        lefthand: '\\unicode{x261C}',
        righthand: '\\unicode{x261E}',
        decosix: '\\unicode{x2766}',
        bomb: '\\unicode{x1F4A3}',
        caution: '\\unicode{x2621}',
        leftblackhand: '\\unicode{x261A}',
        rightblackhand: '\\unicode{x261B}',
        leafleft: '\\unicode{x2618}',
        leafright: '\\unicode{x2618}',
        leafNW: '\\unicode{x2618}',
        leafNE: '\\unicode{x2618}',
        leafSE: '\\unicode{x2618}',
        leafSW: '\\unicode{x2618}',
        aldineleft: '\\unicode{x2619}',
        aldineright: '\\unicode{x2767}',
        aldine: '\\unicode{x2766}',
        aldinesmall: '\\unicode{x2767}',
        aldinesmallrevert: '\\unicode{x2619}',
        aldinesmallup: '\\unicode{x2766}',
        grappe: '\\unicode{x2766}',
        rightgrappe: '\\unicode{x2767}',
        leftgrappe: '\\unicode{x2619}',
        oldpilcrowone: '\\unicode{x00B6}',
        oldpilcrowtwo: '\\unicode{x00B6}',
        oldpilcrowthree: '\\unicode{x00B6}',
        oldpilcrowfour: '\\unicode{x00B6}',
        oldpilcrowfive: '\\unicode{x00B6}',
        oldpilcrowsix: '\\unicode{x00B6}'
      }
    },
    startup: {
      pageReady: () => {
        return MathJax.startup.defaultPageReady().then(() => {
          console.log('MathJax ready');
        });
      }
    }
  };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" id="MathJax-script"></script>
  <script>
  (function() {
    window.addEventListener('beforeunload', function() {
      saveProofState();
      saveCollapsibleState();
    });
    
    const eventSource = new EventSource('http://localhost:35729/reload-stream');
    
    eventSource.onmessage = function(event) {
      if (event.data === 'reload') {
        console.log('üìù File updated, saving state and reloading...');
        saveProofState();
        saveCollapsibleState();
        setTimeout(() => {
          window.location.reload();
        }, 50);
      }
    };
    
    eventSource.onerror = function() {
      console.log('‚ö†Ô∏è  Auto-reload server not available. Run node watch.js to enable auto-reload.');
      eventSource.close();
    };
    
    console.log('üîÑ Auto-reload enabled');
  })();
  </script>
  <style>
    * { box-sizing: border-box; }
    
    body {
      font-family: Georgia, "Times New Roman", serif;
      font-size: 16px;
      line-height: 1.7;
      margin: 0;
      padding: 0;
      color: #1a1a1a;
      background: #ffffff;
    }
    
    /* Layout with sidebar */
    .page-layout {
      display: flex;
      min-height: 100vh;
    }
    
    /* Sidebar styles */
    .sidebar {
      width: 280px;
      background: #fff;
      border-right: 1px solid #e0e0e0;
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      overflow-y: auto;
      padding: 20px 0;
      font-size: 14px;
    }
    
    .sidebar-header {
      padding: 15px 20px 25px;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .sidebar-header h1 {
      font-size: 1.3em;
      font-weight: 600;
      color: #1a1a1a;
      margin: 0 0 5px 0;
    }
    
    .sidebar-header .subtitle {
      font-size: 0.85em;
      color: #666;
      font-style: italic;
    }
    
    .sidebar-header .back-link {
      display: block;
      font-size: 0.8em;
      color: #666;
      text-decoration: none;
      margin-top: 12px;
    }
    
    .sidebar-header .back-link:hover {
      color: #1a1a1a;
    }
    
    .sidebar-nav {
      padding: 10px 0;
    }
    
    .chapter-group {
      margin-bottom: 2px;
    }
    
    .chapter-title {
      padding: 12px 20px;
      font-size: 0.9em;
      font-weight: 600;
      color: #333;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .chapter-title:hover {
      background: #f5f5f5;
    }
    
    .chapter-title .toggle {
      font-size: 0.65em;
      color: #999;
      transition: transform 0.2s;
    }
    
    .chapter-group.expanded .chapter-title .toggle {
      transform: rotate(90deg);
    }
    
    .section-list {
      display: none;
      padding: 5px 0;
      background: #f8f8f8;
    }
    
    .chapter-group.expanded .section-list {
      display: block;
    }
    
    .section-link {
      display: block;
      padding: 8px 20px 8px 35px;
      font-size: 0.85em;
      color: #555;
      text-decoration: none;
      border-left: 3px solid transparent;
    }
    
    .section-link:hover {
      background: #f0f0f0;
      color: #1a1a1a;
    }
    
    .section-link.active {
      background: #e8e8e8;
      border-left-color: #333;
      color: #000;
      font-weight: 500;
    }
    
    /* Main content area */
    .main-content {
      margin-left: 280px;
      flex: 1;
      max-width: 900px;
      padding: 40px 60px;
    }
    
    @media (max-width: 1100px) {
      .sidebar {
        width: 240px;
      }
      .main-content {
        margin-left: 240px;
        padding: 30px 40px;
      }
    }
    
    @media (max-width: 800px) {
      .sidebar {
        position: relative;
        width: 100%;
        height: auto;
        border-right: none;
        border-bottom: 1px solid #e0e0e0;
      }
      .main-content {
        margin-left: 0;
        padding: 20px;
      }
      .page-layout {
        flex-direction: column;
      }
    }
    
    h2, h3, h4 {
      margin-top: 2em;
      margin-bottom: 0.75em;
      color: #000;
      font-weight: 600;
    }
    h2 { font-size: 1.5em; border-bottom: 1px solid #e0e0e0; padding-bottom: 0.3em; }
    h3 { font-size: 1.25em; }
    h4 { font-size: 1.1em; }
    p {
      margin: 1em 0;
      text-indent: 2em;
    }
    p:first-of-type,
    h2 + p,
    h3 + p,
    h4 + p,
    .theorem-box + p,
    .proof-box + p {
      text-indent: 0;
    }
    .noindent + p,
    p:has(> .noindent:first-child) {
      text-indent: 0 !important;
    }
    .noindent {
      display: none;
    }
    .theorem-box {
      margin: 1.75em 0;
      padding: 1.25em;
      border-left: 5px solid #16a34a;
      background: linear-gradient(to top, #bbf7d0 0%, #d1fae5 100%);
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    .definition-box { border-left-color: #16a34a; background: linear-gradient(to top, #d1fae5 0%, #ecfdf5 100%); }
    .lemma-box { border-left-color: #1e3a8a; background: linear-gradient(to top, #bfdbfe 0%, #dbeafe 100%); }
    .corollary-box { border-left-color: #9333ea; background: linear-gradient(to top, #e9d5ff 0%, #f3e8ff 100%); }
    .proposition-box { border-left-color: #dc2626; background: linear-gradient(to top, #fecaca 0%, #fee2e2 100%); }
    .remark-box { border-left-color: #64748b; background: linear-gradient(to top, #e2e8f0 0%, #f1f5f9 100%); }
    .example-box { border-left-color: #0891b2; background: linear-gradient(to top, #a5f3fc 0%, #cffafe 100%); }
    .construction-box { border-left-color: #ea580c; background: linear-gradient(to top, #fed7aa 0%, #ffedd5 100%); }
    .notation-box { border-left-color: #ca8a04; background: linear-gradient(to top, #fef08a 0%, #fef9c3 100%); }
    .exercise-box { border-left-color: #ea580c; background: linear-gradient(to top, #fed7aa 0%, #ffedd5 100%); }
    .problem-box { border-left-color: #ec4899; background: linear-gradient(to top, #fbcfe8 0%, #fce7f3 100%); }
    .theorem-header {
      margin-bottom: 0.75em;
      font-size: 1.05em;
      font-weight: 600;
    }
    .theorem-header.clickable {
      cursor: pointer;
      user-select: none;
    }
    .theorem-header.clickable:hover {
      background: rgba(0,0,0,0.03);
      margin: -0.5em -0.75em 0.75em -0.75em;
      padding: 0.5em 0.75em;
      border-radius: 4px;
    }
    .collapsible-icon {
      display: inline-block;
      transition: transform 0.2s ease;
      font-size: 0.75em;
      margin-right: 0.5em;
      color: #6b7280;
    }
    .collapsible-box.collapsed .collapsible-icon {
      transform: rotate(-90deg);
    }
    .collapsible-content {
      transition: max-height 0.3s ease;
      overflow: hidden;
    }
    .collapsible-box.collapsed .collapsible-content {
      display: none;
    }
    .theorem-content {
      padding-left: 0.5em;
      line-height: 1.8;
    }
    .proof-box {
      margin: 1.5em 0;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      background: white;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }
    .proof-header {
      position: sticky;
      top: 0;
      background: linear-gradient(to bottom, #fafafa 0%, #f5f5f5 100%);
      border-bottom: 1px solid #e5e7eb;
      z-index: 100;
      border-radius: 6px 6px 0 0;
    }
    .proof-toggle {
      width: 100%;
      padding: 0.85em 1.25em;
      border: none;
      background: transparent;
      text-align: left;
      cursor: pointer;
      font-family: inherit;
      font-size: 1em;
      display: flex;
      align-items: center;
      gap: 0.75em;
      transition: background 0.15s;
    }
    .proof-toggle:hover { background: rgba(0,0,0,0.03); }
    .proof-toggle-icon {
      display: inline-block;
      transition: transform 0.2s ease;
      font-size: 0.75em;
      color: #6b7280;
    }
    .proof-box.collapsed .proof-toggle-icon {
      transform: rotate(-90deg);
    }
    .proof-content {
      padding: 1.25em;
      line-height: 1.8;
    }
    .proof-box.collapsed .proof-content {
      display: none;
    }
    .proof-end {
      float: right;
      font-size: 1.3em;
      margin-left: 0.5em;
      color: #374151;
    }
    .subproof {
      margin: 1em 0;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      background: #f9fafb;
    }
    .subproof-header {
      background: linear-gradient(to bottom, #f9fafb 0%, #f3f4f6 100%);
      border-bottom: 1px solid #d1d5db;
      border-radius: 4px 4px 0 0;
    }
    .subproof-toggle {
      width: 100%;
      padding: 0.6em 1em;
      border: none;
      background: transparent;
      text-align: left;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.95em;
      display: flex;
      align-items: center;
      gap: 0.5em;
      transition: background 0.15s;
    }
    .subproof-toggle:hover {
      background: rgba(0,0,0,0.03);
    }
    .subproof-toggle-icon {
      display: inline-block;
      transition: transform 0.2s ease;
      font-size: 0.7em;
      color: #6b7280;
    }
    .subproof.collapsed .subproof-toggle-icon {
      transform: rotate(-90deg);
    }
    .subproof-content {
      padding: 1em;
      line-height: 1.7;
    }
    .subproof.collapsed .subproof-content {
      display: none;
    }
    .ref-link {
      color: #2563eb;
      text-decoration: none;
      font-weight: 500;
      padding: 0 0.15em;
      border-radius: 2px;
    }
    .ref-link:hover {
      background: #dbeafe;
      text-decoration: underline;
    }
    .ref-unknown {
      color: #dc2626;
      font-weight: bold;
      background: #fee2e2;
      padding: 0.1em 0.3em;
      border-radius: 3px;
    }
    strong { font-weight: 600; }
    em { font-style: italic; }
    ol, ul {
      margin: 1em 0;
      padding-left: 2.5em;
      line-height: 1.8;
    }
    li {
      margin: 0.5em 0;
    }
    .latex-image {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 1.5em auto;
    }
    .latex-figure .latex-image {
      display: inline-block;
      margin: 0.5em;
      vertical-align: middle;
    }
    .latex-figure {
      margin: 2em 0;
      text-align: center;
      line-height: 0;
    }
    .latex-figure .figure-content {
      margin-bottom: 0.75em;
      line-height: normal;
    }
    .latex-figure .figure-content > * {
      vertical-align: middle;
    }
    .latex-figure figcaption {
      font-size: 0.9em;
      color: #4b5563;
      font-style: italic;
      margin-top: 0.5em;
    }
  </style>
</head>
<body>
  <div class="page-layout">
    <nav class="sidebar">
      <div class="sidebar-header">
        <h1>Analysis III</h1>
        <div class="subtitle">Measure Theory &amp; Integration</div>
        <a href="../index.html" class="back-link">‚Üê Table of Contents</a>
      </div>
      <div class="sidebar-nav">
        <div class="chapter-group expanded">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>1. Measure Theory</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../01-measure-theory/measure-theory.html" class="section-link">Overview</a>
            <a href="../01-measure-theory/basics.html" class="section-link">Outer Measures</a>
            <a href="../01-measure-theory/lebesgue-meas.html" class="section-link">Lebesgue Measure</a>
            <a href="../01-measure-theory/cantor.html" class="section-link">The Cantor Set</a>
            <a href="../01-measure-theory/measure-spaces.html" class="section-link">Measure Spaces</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>2. Integration</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../02-integration/integration.html" class="section-link">Overview</a>
            <a href="../02-integration/integrals-1.html" class="section-link">Simple Functions</a>
            <a href="../02-integration/integrals-2.html" class="section-link">General Functions</a>
            <a href="../02-integration/convergence.html" class="section-link">Convergence Theorems</a>
            <a href="../02-integration/inequality-party.html" class="section-link">Integral Inequalities</a>
            <a href="../02-integration/lp_spaces.html" class="section-link">L·µñ Spaces</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>3. Product Measures</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../03-fubini/fubini_ch.html" class="section-link">Overview</a>
            <a href="../03-fubini/fubini.html" class="section-link">Fubini-Tonelli</a>
            <a href="../03-fubini/integrals-3.html" class="section-link">Product Measures</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>4. Differentiation I</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../04-differentiation-1/differentiation.html" class="section-link">Overview</a>
            <a href="../04-differentiation-1/covering.html" class="section-link">Vitali Covering</a>
            <a href="../04-differentiation-1/monotone.html" class="section-link">Monotone Functions</a>
            <a href="../04-differentiation-1/BV_on_R.html" class="section-link">Bounded Variation</a>
            <a href="../04-differentiation-1/FTOC.html" class="section-link">FTC for Lebesgue</a>
            <a href="../04-differentiation-1/HL.html" class="section-link">Hardy-Littlewood</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>5. Differentiation I (cont)</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../05-differentiation-1/differentiation.html" class="section-link">Overview</a>
            <a href="../05-differentiation-1/r-nik.html" class="section-link">Radon-Nikodym</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>6. Differentiation II</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../06-differentiation-2/diff-2.html" class="section-link">Overview</a>
            <a href="../06-differentiation-2/vector-measures.html" class="section-link">Vector Measures</a>
            <a href="../06-differentiation-2/r-nik.html" class="section-link">Radon-Nikodym</a>
            <a href="../06-differentiation-2/besi.html" class="section-link">Besicovitch</a>
            <a href="../06-differentiation-2/densities.html" class="section-link">Densities</a>
            <a href="../06-differentiation-2/diff-measures.html" class="section-link">Measure Derivatives</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>7. Riesz Representation</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../06-riesz/riesz.html" class="section-link">Overview</a>
            <a href="../06-riesz/riesz_functional.html" class="section-link">Riesz Representation</a>
            <a href="../06-riesz/LCH_spaces.html" class="section-link">LCH Spaces</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>8. Integral Formulas</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../07-formulas/formulas.html" class="section-link">Overview</a>
            <a href="../07-formulas/hausdorff_meas.html" class="section-link">Hausdorff Measures</a>
            <a href="../07-formulas/lippy.html" class="section-link">Lipschitz Maps</a>
            <a href="../07-formulas/rademacher.html" class="section-link">Rademacher</a>
            <a href="../07-formulas/coarea-prereq.html" class="section-link">Coarea Prerequisites</a>
            <a href="../07-formulas/coarea.html" class="section-link">Coarea Formula</a>
            <a href="../07-formulas/area-prereq.html" class="section-link">Area Prerequisites</a>
            <a href="../07-formulas/area-formula.html" class="section-link">Area Formula</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>9. Extension Results</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../08-ext-res/ext-res.html" class="section-link">Overview</a>
            <a href="../08-ext-res/taylor_thm_integral_remainder.html" class="section-link">Taylor's Theorem</a>
            <a href="../08-ext-res/whitney-cover.html" class="section-link">Whitney Covering</a>
            <a href="../08-ext-res/whitney-partition-of-unity.html" class="section-link">Partition of Unity</a>
            <a href="../08-ext-res/whitney-decomposition.html" class="section-link">Decomposition</a>
            <a href="../08-ext-res/whitney-extension-theorem.html" class="section-link">Extension Theorem</a>
            <a href="../08-ext-res/whitney-extension-proof.html" class="section-link">Extension Proof</a>
            <a href="../08-ext-res/whitney-extension-applications.html" class="section-link">Applications</a>
            <a href="../08-ext-res/whitney-extension.html" class="section-link">Summary</a>
            <a href="../08-ext-res/more-bump.html" class="section-link">More Bump Functions</a>
          </div>
        </div>
      </div>
    </nav>
    
    <main class="main-content">
      <h2>Outer Measures and Carath√©odory Measurable Sets</h2>
<p>In this section, we discuss outer measures which allow us to define ``size'' or measure for every subset of a given set $X$.
This has certain advantages and disadvantages compared with the approach of defining a measure (as we do in the next section).</p>
<p>The advantage is that we have a notion of measure for all subsets, but the disadvantage is that it turns out there are some extremely pathological sets which are not ``measurable'' in a reasonable sense.
Another advantage is that the two measures we are most interested in --- the Lebesgue measure and the Hausdorff measure --- can both be easily constructed as outer measures.</p>
<h3>Outer Measures and Measurable Sets</h3>
<div class="theorem-box definition-box" id="def:outer_measure">
  <div class="theorem-header"><strong>Definition ?</strong> (Outer Measure)</div>
  <div class="theorem-content">Let $X$ be a set. A function $\mu : 2^X \to [0,\infty]$ is called an <em>outer measure</em> on $X$ if it satisfies the following properties:
    <ol style="list-style-type: lower-roman;"><li>$\mu(\emptyset) = 0$,
        </li><li>(monotonicity) if $A\subseteq B \subseteq X$, then $\mu(A) \leq \mu(B)$,
        </li><li>(countable subadditivity) if $\{A_j\}_{j=1}^\infty$ is a countable collection of subsets of $X$, then
            \[ \mu\left( \bigcup_{j=1}^\infty A_j \right) \leq \sum_{j=1}^\infty \mu(A_j). \]</li></ol></div>
</div>
<div class="theorem-box definition-box" id="def:restriction_of_an_outer_measure">
  <div class="theorem-header"><strong>Definition ?</strong> (Restriction of an Outer Measure)</div>
  <div class="theorem-content">Let $\mu$ be an outer measure on a set $X$, and let $A\subseteq X$ be an arbitrary subset.
    The <em>restriction</em> of $\mu$ to $A$ is the outer measure $\mu\mres A$ on $X$ defined by
    \[ \mu\mres A(B) := \mu(A\cap B) \]
    for every subset $B\subseteq X$.</div>
</div>
<p>Notice that the restriction is still defined on all subsets of $X$, not just those contained in $A$;
basically, the restriction just ignores the part of each set that lies outside of $A$.
It is clear that for each subset $A\subseteq X$, the restriction $\mu\mres A$ is indeed an outer measure on $X$.</p>
<div class="theorem-box definition-box" id="def:caratheodory_measurable">
  <div class="theorem-header"><strong>Definition ?</strong> (Carath√©odory Measurable)</div>
  <div class="theorem-content">Let $\mu$ be an outer measure on a set $X$.
    A set $A\subseteq X$ is called <em>$\mu$-measurable</em> (or <em>Carath√©odory measurable</em>) if for every subset $B\subseteq X$, we have
    \[ \mu(B) = \mu(B\cap A) + \mu(B\setminus A). \]</div>
</div>
<div class="theorem-box remark-box collapsible-box collapsed" id="rmk:caratheodory_measurable" data-collapsible-id="collapsible-rmk:caratheodory_measurable">
  <div class="theorem-header clickable" onclick="toggleCollapsible('collapsible-rmk:caratheodory_measurable')">
    <span class="collapsible-icon">‚ñº</span>
    <strong>Remark ?</strong>
  </div>
  <div class="theorem-content collapsible-content" id="collapsible-rmk:caratheodory_measurable">In words, this says that $A$ is $\mu$-measurable if it splits every set $B$ into two pieces without adding any extra measure.
We note that if $A,B\subseteq X$ are arbitrary subsets, then $B = (B\cap A) \cup (B\setminus A)$ so by countable subadditivity of $\mu$, we always have
\[ \mu(B) \leq \mu(B\cap A) + \mu(B\setminus A). \]
Thus the nontrivial part of the definition is the reverse inequality.
Furthermore, if $\mu(B) = \infty$, then the reverse inequality is automatically satisfied, so in order to check that $A$ is $\mu$-measurable, it suffices to check the definition for those sets $B\subseteq X$ satisfying $\mu(B) < \infty$.</div>
</div>
<div class="theorem-box proposition-box" id="prop:properties_of_mu_measurable_sets">
  <div class="theorem-header"><strong>Proposition ?</strong> (Properties of $\mu$-Measurable Sets)</div>
  <div class="theorem-content">Let $\mu$ be an outer measure on a set $X$. Then the following properties hold:
    <ol style="list-style-type: lower-roman;"><li>A subset $A\subseteq X$ is $\mu$-measurable if and only if its complement $A^c$ is $\mu$-measurable.
        </li><li>The empty set $\emptyset$ and the whole set $X$ are $\mu$-measurable.
        </li><li>If $A\subseteq X$ satisfies $\mu(A) = 0$, then $A$ is $\mu$-measurable.
        </li><li>For each subset $A\subseteq X$, each $\mu$-measurable set is also $\mu\mres A$-measurable.</li></ol></div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-0">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-0')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-0">
    <ol><li>Let $A\subseteq X$ be an arbitrary subset.
<p>($\implies$) Suppose $A$ is $\mu$-measurable.
            Then for each subset $B\subseteq X$, we have
            \[ \mu(B) = \mu(B\cap A) + \mu(B\setminus A) = \mu(B\setminus A^c) + \mu(B\cap A^c). \]
            Since $B\setminus A^c = B\cap A$, this shows that $A^c$ is $\mu$-measurable.</p>
<p>($\impliedby$) Suppose $A^c$ is $\mu$-measurable.
            Then by repeating the above argument, we see that $(A^c)^c = A$ is $\mu$-measurable.</p>
<p></li><li>To see that $\emptyset$ is $\mu$-measurable, let $B\subseteq X$ be an arbitrary subset.
            Then
            \[ \mu(B\cap \emptyset) + \mu(B\setminus \emptyset) = 0 + \mu(B) = \mu(B). \]
            Thus $\emptyset$ is $\mu$-measurable.</p>
<p>To see that $X$ is $\mu$-measurable, let $B\subseteq X$ be an arbitrary subset.
            Then
            \[ \mu(B\cap X) + \mu(B\setminus X) = \mu(B) + 0 = \mu(B). \]
            Thus $X$ is $\mu$-measurable.</p>
<p></li><li>More generally, let $A\subseteq X$ be an arbitrary subset satisfying $\mu(A) = 0$.
            Then for each subset $B\subseteq X$, we have
            \[ \mu(B\cap A) + \mu(B\setminus A) \leq \mu(A) + \mu(B) = 0 + \mu(B) = \mu(B). \]
            By Remark <span class="ref-unknown" title="Reference not found: rmk:caratheodory_measurable">[rmk:caratheodory_measurable?]</span>, this shows that $A$ is $\mu$-measurable.</p>
<p></li><li>Let $A\subseteq X$ be an arbitrary subset, and let $E\subseteq X$ be a $\mu$-measurable set.
            Then for each subset $B\subseteq X$, we have
            \begin{align*}
                \mu\mres A(B) &= \mu(A\cap B) \\
                    &= \mu((A\cap B)\cap E) + \mu((A\cap B)\setminus E) \quad \text{(since $E$ is $\mu$-measurable)} \\
                    &= \mu((B\cap E)\cap A) + \mu((B\setminus E)\cap A) \\
                    &= \mu\mres A(B\cap E) + \mu\mres A(B\setminus E).
            \end{align*}
            Thus $E$ is $\mu\mres A$-measurable.</li></ol>
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box proposition-box" id="prop:sequences_of_measurable_sets">
  <div class="theorem-header"><strong>Proposition ?</strong> (Sequences of Measurable Sets)</div>
  <div class="theorem-content">Let $\mu$ be an outer measure on a set $X$, and let $\{A_j\}_{j=1}^\infty$ be a sequence of $\mu$-measurable sets.
    <ol style="list-style-type: lower-roman;"><li>The sets $\bigcup_{j=1}^\infty A_j$ and $\bigcap_{j=1}^\infty A_j$ are $\mu$-measurable.
        </li><li>If the sets $A_j$ are pairwise disjoint, then \[ \mu\left( \bigcup_{j=1}^\infty A_j \right) = \sum_{j=1}^\infty \mu(A_j). \]
        </li><li>If $A_1\sub A_2 \sub \cdots \sub A_j \sub \cdots$ is an increasing sequence, then \[ \mu\left( \bigcup_{j=1}^\infty A_j \right) = \lim_{j\to\infty} \mu(A_j). \]
        </li><li>If $A_1 \supseteq A_2 \supseteq \cdots \supseteq A_j \supseteq \cdots$ is a decreasing sequence and $\mu(A_1) < \infty$, then \[ \mu\left( \bigcap_{j=1}^\infty A_j \right) = \lim_{j\to\infty} \mu(A_j). \]</li></ol></div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-1">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-1')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-1">
    <em>Step 1</em>: We claim that finite unions and intersections of $\mu$-measurable sets are also $\mu$-measurable.
    <div style="margin: 1em 0;"></div>
<p>If $A_1,A_2\subseteq X$ are $\mu$-measurable, then for each subset $B\subseteq X$, we have
    \begin{align*}
        \mu(B) &= \mu(B\cap A_1) + \mu(B\setminus A_1) \quad\text{(since $A_1$ is $\mu$-measurable)} \\
            &= \mu(B\cap A_1) + \mu((B\setminus A_1)\cap A_2) + \mu((B\setminus A_1)\setminus A_2) \quad\text{(since $A_2$ is $\mu$-measurable)} \\
            &\geq \mu( (B\cap A_1) \cup (( B\setminus A_1 ) \cap A_2 )) + \mu( B\setminus (A_1 \cup A_2) ) \quad\text{(by countable subadditivity)} \\
            &= \mu( B\cap A_1\cap A_2 ) + \mu( B\setminus (A_1 \cup A_2) ). \\
    \end{align*}
    By Remark <span class="ref-unknown" title="Reference not found: rmk:caratheodory_measurable">[rmk:caratheodory_measurable?]</span>, this shows that $A_1\cup A_2$ is $\mu$-measurable.</p>
<p>Similarly, if $A_1,A_2\subseteq X$ are $\mu$-measurable, then for each subset $B\subseteq X$, we know that $A_1^c,A_2^c\subseteq X$ are also $\mu$-measurable by Proposition <span class="ref-unknown" title="Reference not found: prop:properties_of_mu_measurable_sets">[prop:properties_of_mu_measurable_sets?]</span> (i), and we see that
    \[ (A_1 \cap A_2)^c = A_1^c \cup A_2^c \]
    by De Morgan's laws; thus $(A_1\cap A_2)$ is $\mu$-measurable by the above argument, and hence $A_1\cap A_2$ is $\mu$-measurable by Proposition <span class="ref-unknown" title="Reference not found: prop:properties_of_mu_measurable_sets">[prop:properties_of_mu_measurable_sets?]</span> (i).</p>
<p>By induction, we conclude that finite unions and intersections of $\mu$-measurable sets are also $\mu$-measurable.
    This proves our claim.</p>
<p><div style="margin: 1em 0;"></div>
    We will actually prove part (i) in the last step of this proof, after we have established the other parts.
    <div style="margin: 1em 0;"></div>
    <em>Step 2</em>: We prove part (ii). 
    Suppose that $\{A_j\}_{j=1}^\infty$ is a sequence of pairwise disjoint $\mu$-measurable sets.
    Then for each $N\in \N$, the finite union $\bigcup_{j=1}^N A_j$ is $\mu$-measurable by Step 1, so
    \begin{align*}
        \mu\left( \bigcup_{j=1}^{N+1} A_j \right) &= \mu\left( \left( \bigcup_{j=1}^N A_j \right) \cap A_{N+1} \right) + \mu\left( \left( \bigcup_{j=1}^N A_j \right) \setminus A_{N+1} \right) \\
            &= \mu(A_{N+1}) + \mu\left( \bigcup_{j=1}^N A_j \right).
    \end{align*}
    By induction, we conclude that
    \[ \mu\left( \bigcup_{j=1}^N A_j \right) = \sum_{j=1}^N \mu(A_j) \]
    for each $N\in \N$.
    Using monotonicity of $\mu$, we have
    \[ \sum_{j=1}^N \mu(A_j) \leq \mu\left( \bigcup_{j=1}^\infty A_j \right) \]
    for each $N\in \N$, so by letting $N\to\infty$, we obtain
    \[ \sum_{j=1}^\infty \mu(A_j) \leq \mu\left( \bigcup_{j=1}^\infty A_j \right). \]
    The reverse inequality follows from countable subadditivity of $\mu$.</p>
<p>This proves part (ii).
    <div style="margin: 1em 0;"></div>
    <em>Step 3</em>: We prove part (iii) and (iv)</p>
<p>Suppose that $A_1\sub A_2 \sub \cdots \sub A_j \sub \cdots$ is an increasing sequence of $\mu$-measurable subsets of $X$.
    Then we consider the pairwise disjoint $\mu$-measurable sets
    \[ B_1 := A_1, \quad B_j := A_j \setminus A_{j-1} \ \ \text{ for } j\geq 2. \]
    By part (ii), we have
    \[ \mu\left( \bigcup_{j=1}^\infty B_j \right) = \sum_{j=1}^\infty \mu(B_j). \]
    That is,
    \[ \mu\left( \bigcup_{j=1}^\infty A_j \right) = \mu(A_1) + \sum_{j=2}^\infty [\mu(A_j) - \mu(A_{j-1})] = \lim_{N\to\infty} \mu(A_N). \]
    This proves part (iii).
    <div style="margin: 1em 0;"></div></p>
<p>Now suppose that $A_1 \supseteq \cdots \supseteq A_j \supseteq \cdots$ is a decreasing sequence of $\mu$-measurable subsets of $X$ satisfying $\mu(A_1) < \infty$.
    Then we see that
    \begin{align*}
        \mu(A_1) - \lim_{j\to\infty} \mu(A_j) &= \lim_{j\to\infty} [\mu(A_1) - \mu(A_j)] \\
            &= \lim_{j\to\infty} \mu\left( \bigcup_{k=j}^\infty (A_1 \setminus A_k) \right) \\
            &\geq \mu(A_1) - \mu\left( \bigcap_{j=1}^\infty A_j \right)
    \end{align*}
    by part (iii) and monotonicity of $\mu$; it follows that
    \[ \mu\left( \bigcap_{j=1}^\infty A_j \right) \geq \lim_{j\to\infty} \mu(A_j). \]
    The reverse inequality follows from monotonicity of $\mu$.
    This proves part (iv).
    <div style="margin: 1em 0;"></div>
    <em>Step 4</em>: We prove part (i).</p>
<p>Suppose that $\{A_j\}_{j=1}^\infty$ is a sequence of $\mu$-measurable sets.
    We use step 1 to see that the finite unions $\bigcup_{j=1}^N A_j$ are $\mu$-measurable for each $N\in \N$, and form an increasing sequence:
    \[ A_1 \subseteq A_1\cup A_2 \subseteq \cdots \subseteq \bigcup_{j=1}^N A_j \subseteq \cdots. \]
    Hence for each set $B\subseteq X$ with $\mu(B) < \infty$, we have
    \begin{align*}
        \mu\left( B \cap \bigcup_{j=1}^\infty A_j \right) + \mu\left( B \setminus \bigcup_{j=1}^\infty A_j \right) &= \mu\left( B \cap \bigcup_{N=1}^\infty \bigcup_{j=1}^N A_j \right) + \mu\left( B \cap \bigcap_{N=1}^\infty \left(\bigcup_{j=1}^N A_j\right)^c \right) \\
            &= \mu\mres B\left( \bigcup_{N=1}^\infty \bigcup_{j=1}^N A_j \right) + \mu\mres B\left( \bigcap_{N=1}^\infty \bigcap_{j=1}^N A_j^c \right) \\
            &= \lim_{N\to\infty} \mu\mres B\left( \bigcup_{j=1}^N A_j \right) + \lim_{N\to\infty} \mu\mres B\left( \bigcap_{j=1}^N A_j^c \right) \quad\text{(by parts (iii) and (iv))} \\
            &= \lim_{N\to\infty} \left[ \mu\mres B \left( X \cap \bigcup_{j=1}^N A_j \right) + \mu\mres B \left( X \cap \bigcap_{j=1}^N A_j^c \right) \right] \\
            &= \lim_{N\to\infty} \left[ \mu\mres B \left( X \cap \bigcup_{j=1}^N A_j \right) + \mu\mres B \left( X \setminus \bigcup_{j=1}^N A_j \right) \right] \\
            &= \mu\mres B(X) = \mu(B).
    \end{align*}
    Since this holds for each set $B\subseteq X$ with $\mu(B) < \infty$, we conclude that $\bigcup_{j=1}^\infty A_j$ is $\mu$-measurable by Remark <span class="ref-unknown" title="Reference not found: rmk:caratheodory_measurable">[rmk:caratheodory_measurable?]</span>.</p>
<p>Finally, since $\bigcap_{j=1}^\infty A_j = \left( \bigcup_{j=1}^\infty A_j^c \right)^c$ by De Morgan's laws, we see that $\bigcap_{j=1}^\infty A_j$ is also $\mu$-measurable by the above argument and Proposition <span class="ref-unknown" title="Reference not found: prop:properties_of_mu_measurable_sets">[prop:properties_of_mu_measurable_sets?]</span>.
    This proves part (i).
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<p></p>
<h3>$\sigma$-Algebras and the Carath√©odory Criterion</h3>
<div class="theorem-box definition-box" id="def:sigma_algebra">
  <div class="theorem-header"><strong>Definition ?</strong> ($\sigma$-Algebra)</div>
  <div class="theorem-content">Let $X$ be a set. A collection $\mathcal{A}\subseteq 2^X$ of subsets of $X$ is called a <em>$\sigma$-algebra</em> on $X$ if it satisfies the following properties:
    <ol style="list-style-type: lower-roman;"><li>$\emptyset,X \in \mathcal{A}$,
        </li><li>(closed under complements) if $A\in \mathcal{A}$, then $A^c \in \mathcal{A}$,
        </li><li>(closed under countable unions) if $\{A_j\}_{j=1}^\infty \subseteq \mathcal{A}$ is a countable collection of sets,
            then $\bigcup_{j=1}^\infty A_j \in \mathcal{A}$,
        </li><li>(closed under countable intersections) if $\{A_j\}_{j=1}^\infty \subseteq \mathcal{A}$ is a countable collection of sets,
            then $\bigcap_{j=1}^\infty A_j \in \mathcal{A}$.</li></ol></div>
</div>
<p>Note that properties (ii) and (iii) imply property (iv) by De Morgan's laws.
We list this property explicitly for emphasis, and because it is very convenient to use in proofs (once you have a $\sigma$-algebra) and as a stepping stone to proving the other properties.
In particular, it is sometimes easier to show that (iii) and (iv) hold before showing that (ii) holds.</p>
<div class="theorem-box lemma-box" id="lem:measurable_sets_form_a_sigma_algebra">
  <div class="theorem-header"><strong>Lemma ?</strong> (Measurable Sets Form a $\sigma$-Algebra)</div>
  <div class="theorem-content">Let $\mu$ be an outer measure on a set $X$, and let
    \[ \mathcal{M}_\mu := \{ A\sub X : A \text{ is } \mu\text{-measurable} \}. \]
    Then $\mathcal{M}_\mu$ is a $\sigma$-algebra on $X$ which contains all subsets of $X$ with $\mu$-measure zero.</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-2">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-2')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-2">
    This follows from Proposition <span class="ref-unknown" title="Reference not found: prop:properties_of_mu_measurable_sets">[prop:properties_of_mu_measurable_sets?]</span> and Proposition <span class="ref-unknown" title="Reference not found: prop:sequences_of_measurable_sets">[prop:sequences_of_measurable_sets?]</span>.
    <span class="proof-end">‚ñ°</span>
  </div>
</div>
<div class="theorem-box exercise-box" id="ex:smallest_sigma_algebra">
  <div class="theorem-header"><strong>Exercise ?</strong></div>
  <div class="theorem-content">Let $X$ be a set, and let $\{ \mathcal{A}_j \}_{j\in J}$ be an arbitrary collection of $\sigma$-algebras on $X$ (where $J$ is an arbitrary index set).
    Then the intersection $ \bigcap_{j\in J} \mathcal{A}_j $ is also a $\sigma$-algebra on $X$.</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-3">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-3')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-3">
    Since $\emptyset,X \in \mathcal{A}_j$ for each $j\in J$, we have $\emptyset,X \in \bigcap_{j\in J} \mathcal{A}_j$.
<p>Now let $A\in \bigcap_{j\in J} \mathcal{A}_j$ be an arbitrary set.
    Then $A\in \mathcal{A}_j$ for each $j\in J$, so $A^c \in \mathcal{A}_j$ for each $j\in J$ by property (ii) of Definition <span class="ref-unknown" title="Reference not found: def:sigma_algebra">[def:sigma_algebra?]</span>.
    Thus $A^c \in \bigcap_{j\in J} \mathcal{A}_j$.
    This shows that $\bigcap_{j\in J} \mathcal{A}_j$ is closed under complements.</p>
<p>Finally, let $\{A_k\}_{k=1}^\infty \subseteq \bigcap_{j\in J} \mathcal{A}_j$ be an arbitrary countable collection of sets.
    Then for each $k\in \N$, we have $A_k \in \mathcal{A}_j$ for each $j\in J$, so
    \[ \bigcup_{k=1}^\infty A_k \in \mathcal{A}_j \]
    for each $j\in J$ by property (iii) of Definition <span class="ref-unknown" title="Reference not found: def:sigma_algebra">[def:sigma_algebra?]</span>.
    Thus $\bigcup_{k=1}^\infty A_k \in \bigcap_{j\in J} \mathcal{A}_j$.
    This shows that $\bigcap_{j\in J} \mathcal{A}_j$ is closed under countable unions, and hence also closed under countable intersections by De Morgan's laws.</p>
<p>We conclude that $\bigcap_{j\in J} \mathcal{A}_j$ is a $\sigma$-algebra on $X$.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box definition-box" id="def:smallest_sigma_algebra_containing_a_collection_of_sets">
  <div class="theorem-header"><strong>Definition ?</strong> (Smallest $\sigma$-Algebra Containing a Collection of Sets)</div>
  <div class="theorem-content">Let $X$ be a set, and let $\mathcal{C}\sub 2^X$ be an arbitrary collection of subsets of $X$.
    The <em>smallest $\sigma$-algebra containing</em> $\mathcal{C}$ is the intersection of all $\sigma$-algebras on $X$ which contain $\mathcal{C}$, i.e.
    \[ \sigma(\mathcal{C}) := \bigcap_{\substack{\mathcal{A} \text{ is a } \sigma\text{-algebra on } X \\ \mathcal{C}\subseteq \mathcal{A}}} \mathcal{A}. \]</div>
</div>
<p>This is a well-defined $\sigma$-algebra on $X$ by the previous exercise <span class="ref-unknown" title="Reference not found: ex:smallest_sigma_algebra">[ex:smallest_sigma_algebra?]</span>.</p>
<div class="theorem-box definition-box" id="def:borel_sets">
  <div class="theorem-header"><strong>Definition ?</strong> (Borel Sets, Borel Measure)</div>
  <div class="theorem-content">Let $X$ be a topological space.
    The <em>Borel $\sigma$-algebra</em> on $X$ is the smallest $\sigma$-algebra containing all open sets in $X$.
    The elements of the Borel $\sigma$-algebra are called <em>Borel sets</em>.
<p>We say an outer measure $\mu$ on $X$ is <em>Borel</em> if every Borel set is $\mu$-measurable.</div>
</div></p>
<p>Since the Borel $\sigma$-algebra is generated by the open sets and is closed under complements, it also contains all closed sets, and can be equivalently be defined as the smallest $\sigma$-algebra containing all closed sets.</p>
<div class="theorem-box theorem-box" id="thm:caratheodory_criterion">
  <div class="theorem-header"><strong>Theorem ?</strong> (Carath√©odory Criterion)</div>
  <div class="theorem-content">Let $(X,d)$ be a metric space, and let $\mu$ be an outer measure on $X$ with the property that
    \[ \mu(A\cup B) = \mu(A) + \mu(B) \]
    for all sets $A,B\subseteq X$ satisfying $d(A,B) > 0$.
    Then every Borel set is $\mu$-measurable, i.e. $\mu$ is a Borel outer measure on $X$.</div>
</div>
<p>Such outer measures are sometimes called <em>metric outer measures</em>.</p>
<div class="proof-box collapsed" data-proof-id="proof-num-4">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-4')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-4">
    Since the Borel $\sigma$-algebra is the smallest $\sigma$-algebra containing all closed sets, it is enough to show that every closed set is $\mu$-measurable.
<p>Let $C\sub X$ be a closed set, and let $B\sub X$ be an arbitrary subset satisfying $\mu(B) < \infty$.
    For each $j\in \N$, we define
    \[ C_j := \left\{x\in X : \dist(x,C) \leq \frac{1}{j} \right\} \]
    which is a closed set; this implies
    \[ \dist( B\setminus C_j, B\cap C_j ) > \frac{1}{j} > 0. \]
    Hence
    \[ \mu(B) \geq \mu( (B\setminus C_j) \cup (B\cap C_j) ) = \mu(B\setminus C_j) + \mu(B\cap C_j) \]
    by monotonicity and the assumption on $\mu$.</p>
<p>We claim that
    \[ \lim_{j\to\infty} \mu(B\setminus C_j) = \mu(B \setminus C). \tag{$\star$} \]
    To see this, note that since $C$ is closed we can write
    \[ B\setminus C = \{ x\in X :\dist(x, C) > 0 \} = (B\setminus C_j) \cup \bigcup_{k=j}^\infty R_k \]
    where
    \[ R_k := \left\{ x \in B : \frac{1}{k+1} < \dist(x, C) \leq \frac{1}{k} \right\} \]
    for each $k\in \Z^+$.</p>
<p>Using subadditivity of $\mu$, we have
    \[ \mu(B\setminus C_j) \leq \mu( B \setminus C) \leq \mu( B \setminus C_j) + \sum_{k=j}^\infty \mu(R_k) \tag{$\star\star$}\]
    for each $j\in \Z^+$.
    Since $\mu(B) < \infty$, for each $k\in \Z^+$ we have $\mu(R_k) \leq \mu(B) < \infty$, and we also have that
    \[ \dist(R_j,R_k) > 0 \qquad \forall\  k > j+1 \]
    by definition of these sets.
    By assumption on $\mu$, this implies
    \[ \sum_{k=1}^N \mu(R_{2k}) = \mu\left( \bigcup_{k=1}^N R_{2k} \right) \leq \mu(B) < \infty, \]
    and \[ \sum_{k=1}^N \mu(R_{2k-1}) = \mu\left( \bigcup_{k=1}^N R_{2k-1} \right) \leq \mu(B) < \infty \]
    for all $N\in \Z^+$.
    In particular, we conclude that $\sum_{k=1}^\infty \mu(R_k) < \infty$.
    Hence for each $\epsilon > 0$, there exists $J\in \Z^+$ such that
    \[ \sum_{k=j}^\infty \mu(R_k) < \epsilon \]
    for all $j\geq J$.
    Using this in ($\star\star$), we obtain
    \[ 0 \leq \mu(B\setminus C) - \mu(B\setminus C_j) \leq \sum_{k=j}^\infty \mu(R_k) < \epsilon \]
    for all $j\geq J$, which proves ($\star$).</p>
<p>Using this in the inequality before ($\star$), we obtain
    \[ \mu(B) \geq \lim_{j\to\infty} [\mu(B\setminus C_j) + \mu(B\cap C_j)] = \mu(B\setminus C) + \lim_{j\to\infty} \mu(B\cap C_j) \]
    by ($\star$).
    Since $B\sub X$ is an arbitrary subset satisfying $\mu(B) < \infty$, this shows that $C$ is $\mu$-measurable by Remark <span class="ref-unknown" title="Reference not found: rmk:caratheodory_measurable">[rmk:caratheodory_measurable?]</span>.
    Since $C\sub X$ is an arbitrary closed set, we conclude that every closed set is $\mu$-measurable.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<p></p>
<h3>Regular and Borel Regular Outer Measures</h3>
<div class="theorem-box definition-box" id="def:regular_measure">
  <div class="theorem-header"><strong>Definition ?</strong> (Regular, Borel Regular, Open $\sigma$-Finite)</div>
  <div class="theorem-content">Let $X$ be a set, and let $\mu$ be an outer measure on $X$.
    We say that $\mu$ is <em>regular</em> if for every subset $A\sub X$ there exists a $\mu$-measurable set $B\sub X$ such that $A\sub B$ and $\mu(A) = \mu(B)$.
<p><div style="margin: 1em 0;"></div>
    Now let $X$ be a topological space, and let $\mu$ be an outer measure on $X$.
    We say that $\mu$ is <em>Borel regular</em> if $\mu$ is a Borel measure and for every subset $A\sub X$ there exists a Borel set $B\sub X$ such that $A\sub B$ and $\mu(A) = \mu(B)$.</p>
<p><div style="margin: 1em 0;"></div>
    If $\mu$ is a Borel regular measure on $X$, then we say that the pair $(X,\mu)$ is <em>open $\sigma$-finite</em> if $X$ can be covered by a countable collection of open sets with finite $\mu$-measure.</div>
</div></p>
<p>Observe that if $(X,d)$ is a seperable metric space and $\mu$ is locally finite (i.e. for each $x\in X$ there exists $r>0$ such that $\mu(B(x,r)) < \infty$), then $(X,\mu)$ is open $\sigma$-finite.
Why? --- seperability gives a countable dense set $\{x_j\}_{j=1}^\infty \sub X$, so let $r_j > 0$ be such that $\mu(B(x_j,r_j)) < \infty$ for each $j\in \Z^+$.
Then $\{B(x_j,r_j)\}_{j=1}^\infty$ is a countable cover of $X$ by open sets with finite $\mu$-measure.</p>
<div class="theorem-box lemma-box" id="lem:restriction_of_borel_regular_outer_measure">
  <div class="theorem-header"><strong>Lemma ?</strong> (Restriction of Borel Regular Outer Measure)</div>
  <div class="theorem-content">Let $X$ be a topological space, and let $\mu$ be a Borel regular outer measure on $X$.
    Let $A$ be an arbitrary subset of $X$ satisfying $\mu(A) < \infty$.
    Then the restriction $\mu\mres A$ is also a Borel regular outer measure on $X$.</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-5">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-5')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-5">
    Since $\mu$ is a Borel regular outer measure on $X$, we can choose a Borel set $B_1$ with $A\sub B_1$ such that $\mu(B_1 \setminus A) = 0$.
    Then choose another Borel set $B_2$ with $ B_1\setminus A \sub B_2$ such that $\mu(B_2) = 0$.
    Fix a subset $E\sub X$. Then we have
    \begin{align*}
        E = (E\cap A)\cup (E\setminus A) &\subseteq (E\cap A) \cup(X\setminus A) \\
            &= (E\cap A) \cup (X\setminus B_1) \cup (B_1\setminus A) \\
            &\sub (E\cap A) \cup (X\setminus B_1) \cup B_2.
    \end{align*}
    Finally choose a Borel set $B_3$ with $E\cap A \sub B_3$ such that $\mu(B_3) = \mu(E\cap A)$.
    Then we have
    \[ E \subseteq (X\setminus B_1) \cup B_2 \cup B_3 \]
    which is a Borel set containing $E$.
    Thus 
    \[ E \cap A \sub \left ( (X\setminus B_1) \cup B_2 \cup B_3 \right ) \cap A \]
    which implies that 
    \[ (\mu\mres A)(E) = \mu(E\cap A) \leq \mu\left( \left( (X\setminus B_1) \cup B_2 \cup B_3 \right) \cap A \right) = (\mu\mres A)\left( (X\setminus B_1) \cup B_2 \cup B_3 \right). \]
    Also, we have
    \begin{align*}
        (\mu\mres A)((X\setminus B_1) \cup B_2 \cup B_3) &= (\mu\mres A)((X\setminus B_1) \cup B_3)  \qquad\qquad\text{ since } \mu(B_2) = 0 \\
            &= \mu((A\cap(X\setminus B_1)) \cup (A\cap B_3)) \\
            &= \mu(A\cap B_3) \qquad\qquad\qquad\qquad\quad\text{ since } A\sub B_1 \implies A\cap(X\setminus B_1) = \emptyset \\
            &\leq \mu(B_3) \\
            &= \mu(E\cap A) \\
            &= (\mu\mres A)(E).
    \end{align*}
    This shows that
    \[ (\mu\mres A)(E) = (\mu\mres A)( (X\setminus B_1) \cup B_2 \cup B_3 ). \]
    Since $(X\setminus B_1) \cup B_2 \cup B_3$ is a Borel set containing $E$, and $E\sub X$ was arbitrary, we see that $\mu\mres A$ is a Borel regular outer measure on $A$.
    <span class="proof-end">‚ñ°</span>
  </div>
</div>
<p><div style="margin: 1em 0;"></div></p>
<p>We come to the last result of this section.
The first states that on a nice topological space, every Borel regular measure is ``inner regular'' and ``outer regular''.</p>
<div class="theorem-box theorem-box" id="thm:borel_reg_implies_inner/outer_reg">
  <div class="theorem-header"><strong>Theorem ?</strong> (Borel Regular Measures are Inner and Outer Regular)</div>
  <div class="theorem-content">Let $X$ be a topological space which has the property that every closed subset of $X$ is a countable intersection of open sets, 
    and let $\mu$ be a Borel regular measure on $X$ such that $(X,\mu)$ is open $\sigma$-finite.
    Then the following two properties hold:
    <ol style="list-style-type: lower-roman;"><li>for each subset $A\sub X$, we have\[ \mu(A) = \inf\{ \mu(U) : A\sub U, U\text{ open} \} \]
             and
        </li><li>for each $\mu$-measurable set $A\sub X$, we have
            \[  \mu(A) = \sup\{ \mu(K) : K\sub A, K\text{ closed} \}. \]</li></ol></div>
</div>
<div class="theorem-box remark-box collapsible-box collapsed" id="remark-?" data-collapsible-id="collapsible-remark-2">
  <div class="theorem-header clickable" onclick="toggleCollapsible('collapsible-remark-2')">
    <span class="collapsible-icon">‚ñº</span>
    <strong>Remark ?</strong>
  </div>
  <div class="theorem-content collapsible-content" id="collapsible-remark-2">Before the proof, we make two remarks. 
    First is that the condition that every closed set is a countable intersection of open sets is satisfied by all metric spaces.
<p>Second, if $X$ is a Hausdorff space which is a union of countably many compact sets, then the conclusion (ii) above guaruntees that
    \[ \mu(A) = \sup\{ \mu(K) : K\sub A, K\text{ compact} \} \]
    for each $\mu$-measurable set $A\sub X$ with $\mu(A) < \infty$.</p>
<p>We check this --- write $X = \bigcup_{j=1}^\infty K_j$ where $K_j\sub X$ is compact for each $j\in \Z^+$.
    Then we can write $X$ as the increasing union of compact sets 
    \[  X = \bigcup_{m=1}^\infty \bigcup_{j=1}^m K_j \]
    and each closed set $C$ can be written as the increasing union of compact sets
    \[ C = \bigcup_{m=1}^\infty \left(\bigcup_{j=1}^m K_j \cap C \right). \]
    Here we have used that $K_j\cap C$ is compact, since $X$ is Hausdorff.</p>
<p>Therefore, if $A\sub X$ is a $\mu$-measurable set with $\mu(A) < \infty$, then by (ii) we have
    \[ \sup\{ \mu(K) : K\sub A, K\text{ compact} \} \leq \mu(A) \]
    since every compact set is closed, and for each closed set $C\sub A$, we have
    \[ \mu(C) = \lim_{m\to\infty} \mu\left( \bigcup_{j=1}^m K_j \cap C \right) \leq \sup\{ \mu(K) : K\sub A, K\text{ compact} \} \]
    by monotonicity and the above argument.
    Thus
    \[ \mu(A) = \sup\{ \mu(K) : K\sub A, K\text{ compact} \}. \]</div>
</div></p>
<div class="proof-box collapsed" data-proof-id="proof-num-6">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-6')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-6">
    We begin by assuming we have $\mu(X)<\infty$.
    We will remove this assumption at the end of the proof.
    First note that in this case, conclusion (ii) follows by applying conclusion (i) to the complement $A^c$ of a $\mu$-measurable set $A\sub X$ and using that $\mu(A^c) = \mu(X) - \mu(A)$.
<p>Also since $\mu$ is Borel regular, it suffices to prove conclusion (i) in the case that $A\sub X$ is a Borel set. Let
    \[ \mathcal{A} := \{ A\sub X : A \text{ is a Borel set such that (i) holds} \}. \]
    Trivially we see that $\mathcal{A}$ contains all open sets; we claim that $\mathcal{A}$ is closed under countable unions and countable intersections.</p>
<p>Let $\{A_j\}_{j=1}^\infty \sub \mathcal{A}$ be an arbitrary countable collection of Borel sets satisfying (i).
    Let $\varepsilon > 0$ be arbitrary.
    For each $j\in \N$, we can find an open set $U_j$ such that $A_j \sub U_j$ and $\mu(U_j) \leq \mu(A_j) + \varepsilon/2^j$.
    Then
    \[ \left( \bigcup_{j=1}^\infty U_j \right)\setminus \left( \bigcup_{k=1}^\infty A_k \right) = \bigcup_{j=1}^\infty \left( U_j \setminus \bigcup_{k=1}^\infty A_k \right) \sub \bigcup_{j=1}^\infty U_j\setminus A_j \] 
    and
    \[ \left( \bigcap_{j=1}^\infty U_j \right)\setminus \left( \bigcap_{k=1}^\infty A_k \right) = \bigcap_{j=1}^\infty \left( U_j \setminus \bigcap_{k=1}^\infty A_k \right) = \bigcap_{j=1}^\infty \left( \bigcup_{k=1}^\infty U_j \setminus A_k \right) \sub \bigcup_{j=1}^\infty U_j\setminus A_j \] 
    so by subadditivity we have
    \[ \mu\left( \left( \bigcup_{j=1}^\infty U_j \right)\setminus \left( \bigcup_{k=1}^\infty A_k \right) \right) \leq \sum_{j=1}^\infty \mu(U_j\setminus A_j) \leq \sum_{j=1}^\infty [\mu(U_j) - \mu(A_j)] \leq \varepsilon, \]
    and
    \begin{align*}
        \lim_{N\to\infty}\mu \left( \left( \bigcap_{j=1}^N U_j  \right)\setminus \left( \bigcap_{k=1}^\infty A_k \right) \right) &= \mu\left( \left( \bigcap_{j=1}^\infty U_j \right)\setminus \left( \bigcap_{k=1}^\infty A_k \right) \right) \\
            &\leq \sum_{j=1}^\infty \mu(U_j\setminus A_j) \\
            &\leq \sum_{j=1}^\infty [\mu(U_j) - \mu(A_j)] \leq \varepsilon. \\
    \end{align*}
    Since $\varepsilon > 0$ was arbitrary we conclude that $\bigcup_{j=1}^\infty A_j$ and $\bigcap_{j=1}^\infty A_j$ satisfy (i).</p>
<p>(The reason we needed to take the limit in the second inequality is that $\bigcap_{j=1}^N U_j$ is a decreasing sequence of open sets, but the infinite intersection need not be open;
    taking limits allows us to show the infimum condition in (i) holds.)</p>
<p>This proves our claim that $\mathcal{A}$ is closed under countable unions and countable intersections.
    Since $\mathcal{A}$ contains all open sets and is closed under countable intersections, it contains all closed sets by the assumption on $X$.
    Notice that we do not yet know that $\mathcal{A}$ is a $\sigma$-algebra, since we do not know that it is closed under complements.</p>
<p>For this reason, we let $\mathcal{A}^*$ be defined by
    \[ \mathcal{A}^* := \{ A\sub X : A^c \in \mathcal{A} \} \]
    and we claim that $\mathcal{A}^*$ is a $\sigma$-algebra.
    Clearly $\emptyset,X \in \mathcal{A}^*$ since $\emptyset^c = X$ and $X^c = \emptyset$ are both open sets, so they belong to $\mathcal{A}$.
    Also $\mathcal{A}^*$ is closed under complements since if $A\in \mathcal{A}^*$, then $A^c \in \mathcal{A}$ by definition, so $(A^c)^c = A \in \mathcal{A}^*$.</p>
<p>Finally, if $\{A_j\}_{j=1}^\infty \sub \mathcal{A}^*$ is an arbitrary countable collection of sets, then $A_j^c \in \mathcal{A}$ for each $j\in \N$, so that
    \[ \left( \bigcup_{j=1}^\infty A_j \right)^c = \bigcap_{j=1}^\infty A_j^c \in \mathcal{A} \]
    becuase $\mathcal{A}$ is closed under countable intersections.
    Thus $\bigcup_{j=1}^\infty A_j \in \mathcal{A}^*$.</p>
<p>This proves our claim that $\mathcal{A}^*$ is a $\sigma$-algebra.
    Since $\mathcal{A}^*$ contains all closed sets and hence all open sets, we conclude that $\mathcal{A}^*$ contains all Borel sets.
    Thus $\mathcal{A}$ also contains all Borel sets (and is actually equal to the Borel $\sigma$-algebra).</p>
<p>Thus every Borel set satisfies (i), which completes the proof in the case that $\mu(X) < \infty$.</p>
<p><div style="margin: 1em 0;"></div>
    Now we remove the assumption that $\mu(X) < \infty$.
    Since $(X,\mu)$ is open $\sigma$-finite, we can write $X = \bigcup_{j=1}^\infty V_j$ where $V_j\sub X$ is open and $\mu(V_j) < \infty$ for each $j\in \Z^+$.
    Since $\mu$ is Borel regular, it suffices to prove conclusion (i) in the case that $A\sub X$ is a Borel set.</p>
<p>Let $A\sub X$ be an arbitrary Borel set, and let $\varepsilon > 0$ be arbitrary.
    For each $j\in \N$, we can apply the first part of the proof to the measure $\mu\mres V_j$ which satisfies $\mu\mres V_j(X) = \mu(V_j) < \infty$ to find an open set $U_j\sub X$ such that $A\sub U_j$ and
    \[ \mu((V_j\cap U_j)\setminus A) = \mu\mres V_j(U_j \setminus A) < \frac{\varepsilon}{2^j}. \]
    By subadditivity of $\mu$ and summing over $j\in \Z^+$ we get
    \[ \mu\left( \bigcup_{j=1}^\infty (V_j\cap U_j)\setminus A \right) < \sum_{j=1}^\infty \frac{\varepsilon}{2^j} = \varepsilon. \]
    Since $\bigcup_{j=1}^\infty (V_j\cap U_j)$ is open and contains $A$, this shows that $A$ satisfies (i).</p>
<p>Now to complete the proof of conclusion (ii), let $A\sub X$ be a Borel set and let $\varepsilon > 0$ be arbitrary.
    For each $j\in \N$, the fact that $\mu\mres V_j (X)<\infty$ implies we can apply conclusion (ii) to the measure $\mu\mres V_j$ to find a closed set $C_j\sub X$ such that $C_j \sub A$ and
    \[ \mu((A\cap V_j)\setminus C_j) = \mu\mres V_j(A\setminus C_j) < \frac{\varepsilon}{2^j}. \]
    Since
    \[ \bigcup_{j=1}^\infty V_j \setminus \bigcup_{k=1}^\infty C_k = \bigcup_{j=1}^\infty \left(V_j \setminus \bigcup_{k=1}^\infty C_k\right) \sub \bigcup_{j=1}^\infty V_j\setminus C_j \]
    the countable subadditivity of $\mu$ implies
    \begin{align*}
        \mu\left( A\setminus \bigcup_{k=1}^\infty C_k \right) &= \mu\left( \bigcup_{j=1}^\infty (A\cap V_j) \setminus \bigcup_{k=1}^\infty C_k \right) \\
            &\leq \mu \left( \bigcup_{j=1}^\infty (A\cap V_j) \setminus C_j \right) \\
            &\leq \sum_{j=1}^\infty \mu((A\cap V_j)\setminus C_j) < \varepsilon.
    \end{align*}
    Thus either $\mu(A)=\infty$ and $\mu\left(A\setminus \bigcup_{k=1}^N C_k\right) \to\infty$ as $N\to\infty$ or $\mu(A)<\infty$ and $ \mu\left(A\setminus \bigcup_{k=1}^N C_k\right) < 2\epsilon$ for all sufficiently large $N$. 
    In either case, since $\varepsilon > 0$ was arbitrary we conclude that $A$ satisfies (ii).
    This completes the proof.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<h3>$\pi$-$\lambda$ Theorem</h3>
<p>It will be useful later to have a way of showing that two measures are equal.
The $\pi$-$\lambda$ theorem is a tool for doing this.</p>
<div class="theorem-box definition-box" id="def:pi-lambda_system">
  <div class="theorem-header"><strong>Definition ?</strong> ($\pi$-system, $\lambda$-system)</div>
  <div class="theorem-content">Let $X$ be a set.
    A collection $\mathcal{P}$ of subsets of $X$ is called a <em>$\pi$-system</em> if it is closed under finite intersections, i.e. if $A,B\in \mathcal{P}$, then $A\cap B \in \mathcal{P}$ as well.
<p><div style="margin: 1em 0;"></div></p>
<p><span class="noindent"></span>A collection $\mathcal{L}$ of subsets of $X$ is called a <em>$\lambda$-system</em> if it satisfies the following properties:
    <ul><li>$X\in \mathcal{L}$.
        </li><li>If $A,B\in \mathcal{L}$ and $A\sub B$, then $B\setminus A \in \mathcal{L}$ as well.
        </li><li>If $\{A_j\}_{j=1}^\infty$ is an increasing sequence of sets in $\mathcal{L}$, then $\bigcup_{j=1}^\infty A_j \in \mathcal{L}$ as well.</li></ul></div>
</div></p>
<p>Since $\pi$-systems and $\lambda$-systems are less restrictive than $\sigma$-algebras, it is easier in practice to check that a collection of sets is a $\pi$-system or a $\lambda$-system than to check that it is a $\sigma$-algebra.
Of course, $\sigma$-algebras are both $\pi$-systems and $\lambda$-systems.
The converse is contained in Step 3 of the following theorem.</p>
<div class="theorem-box theorem-box" id="thm:pi-lambda">
  <div class="theorem-header"><strong>Theorem ?</strong> (Dynkin's $\pi$-$\lambda$ Theorem)</div>
  <div class="theorem-content">Let $X$ be a set.
    If $\mathcal{P}$ is a $\pi$-system and $\mathcal{L}$ is a $\lambda$-system such that $\mathcal{P} \subseteq \mathcal{L}$, then $\sigma(\mathcal{P}) \subseteq \mathcal{L}$.</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-7">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-7')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-7">
    <em>Step 1.</em>
    We define \[ \mathcal{D} := \bigcap\left\{ \mathcal{L} : \text{ is a } \lambda\text{-system containing } \mathcal{P} \,\right\}. \]
    Then $\mathcal{D}$ is a $\lambda$-system and we have $\mathcal{P} \subseteq \mathcal{D} \subseteq \mathcal{L}$.
<p>We check this. 
    First, let $P\in \mathcal{P}$. 
    Then for each $\lambda$-system $\mathcal{L}'$ containing $\mathcal{P}$, we have $P\in \mathcal{L}'$, and hence $P\in \mathcal{D}$.
    This shows that $\mathcal{P} \subseteq \mathcal{D}$.
    Also, since $\mathcal{L}$ is a $\lambda$-system containing $\mathcal{P}$, we have $\mathcal{D} \subseteq \mathcal{L}$ by definition.</p>
<p>Finally we see that $\mathcal{D}$ is a $\lambda$-system.
    <ul><li>Since $X\in \mathcal{L}'$ for each $\lambda$-system $\mathcal{L}'$ containing $\mathcal{P}$, we have $X\in \mathcal{D}$ as well.
        </li><li>If $A,B\in \mathcal{D}$ and $A\sub B$, then $A,B\in \mathcal{L}'$ for each $\lambda$-system $\mathcal{L}'$ containing $\mathcal{P}$, and hence $B\setminus A \in \mathcal{L}'$.
            This shows that $B\setminus A \in \mathcal{D}$ as well.
        </li><li>If $\{A_j\}_{j=1}^\infty$ is an increasing sequence of sets in $\mathcal{D}$, then $A_j \in \mathcal{L}'$ for each $j\in \Z^+$ and each $\lambda$-system $\mathcal{L}'$ containing $\mathcal{P}$, and hence $\bigcup_{j=1}^\infty A_j \in \mathcal{L}'$.
            This shows that $\bigcup_{j=1}^\infty A_j \in \mathcal{D}$.</li></ul></p>
<p><div style="margin: 1em 0;"></div>
    <em>Step 2.</em>
    We claim that $\mathcal{D}$ is also a $\pi$-system.
    <div style="margin: 1em 0;"></div></p>
<p>Let $A,B\in \mathcal{D}$.
    We want to show that $A\cap B \in \mathcal{D}$.
    Define 
    \[ \mathcal{D}_A := \{ C\sub X : A\cap C \in \mathcal{D} \}. \]
    We claim that $\mathcal{D}_A$ is a $\lambda$-system containing $\mathcal{P}$; this follows from the fact that $\mathcal{D}$ is a $\lambda$-system.
    <ul><li>Since $A\cap X = A \in \mathcal{D}$, we have $X\in \mathcal{D}_A$.
        </li><li>If $C_1,C_2 \in \mathcal{D}_A$ and $C_1 \sub C_2$, then $A\cap C_1, A\cap C_2 \in \mathcal{D}$ and $A\cap C_1 \sub A\cap C_2$, so that $(A\cap C_2) \setminus (A\cap C_1) = A\cap (C_2\setminus C_1) \in \mathcal{D}$.
            This shows that $C_2 \setminus C_1 \in \mathcal{D}_A$.
        </li><li>If $\{C_j\}_{j=1}^\infty$ is an increasing sequence of sets in $\mathcal{D}_A$, then $A\cap C_j \in \mathcal{D}$ for each $j\in \Z^+$, and hence
            \[ A\cap \left( \bigcup_{j=1}^\infty C_j \right) = \bigcup_{j=1}^\infty (A\cap C_j) \in \mathcal{D} \]
            since $\mathcal{D}$ is a $\lambda$-system.
            This shows that $\bigcup_{j=1}^\infty C_j \in \mathcal{D}_A$.</li></ul>
    Therefore, $\mathcal{D}_A$ is a $\lambda$-system.
    Now, if $P\in \mathcal{P}$, then $A\cap P \in \mathcal{D}$ since $\mathcal{P}$ is a $\pi$-system and $A\in \mathcal{D}$; 
    hence $P\in \mathcal{D}_A$.
    This shows that $\mathcal{P} \subseteq \mathcal{D}_A$.
    By the definition of $\mathcal{D}$, we have $\mathcal{D}_A \subseteq \mathcal{D}$, and hence $B\in \mathcal{D}_A$ since $B\in \mathcal{D}$ by assumption.
    This shows that $A\cap B \in \mathcal{D}$, as desired.</p>
<p>Since $A,B\in \mathcal{D}$ were arbitrary, this shows that $\mathcal{D}$ is a $\pi$-system.</p>
<p><div style="margin: 1em 0;"></div>
    <em>Step 3.</em>
    Now we claim that $\mathcal{D}$ is a $\sigma$-algebra.
    This follows from the fact that $\mathcal{D}$ is both a $\pi$-system and a $\lambda$-system.
    <div style="margin: 1em 0;"></div></p>
<p>Since $\mathcal{D}$ is a $\lambda$-system, we have $X\in \mathcal{D}$, and the closure of $\mathcal{D}$ under complements implies that $X\setminus A = \emptyset \in \mathcal{D}$.
    Also it is clear that $\mathcal{D}$ is closed under finite unions since it is closed under finite intersections and complements.
    Finally, let $\{A_j\}_{j=1}^\infty$ be an arbitrary countable collection of sets in $\mathcal{D}$.
    Then for each $n\in \Z^+$ define $B_n := \bigcup_{j=1}^n A_j$ which is in $\mathcal{D}$ since $\mathcal{D}$ is closed under finite unions;
    also note that $\{B_n\}_{n=1}^\infty$ is an increasing sequence of sets in $\mathcal{D}$.
    Since $\mathcal{D}$ is a $\lambda$-system, we have 
    \[ \bigcup_{j=1}^\infty A_j = \bigcup_{n=1}^\infty \bigcup_{j=1}^n A_j = \bigcup_{n=1}^\infty B_n \in \mathcal{D}. \]
    This shows that $\mathcal{D}$ is closed under countable unions, and hence is a $\sigma$-algebra.</p>
<p><div style="margin: 1em 0;"></div></p>
<p>Since $\mathcal{D}$ is a $\sigma$-algebra containing $\mathcal{P}$, we have $\sigma(\mathcal{P}) \subseteq \mathcal{D} \subseteq \mathcal{L}$ as desired.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box corollary-box" id="cor:borel_reg_outer_measures_in_rn">
  <div class="theorem-header"><strong>Corollary ?</strong> (Borel Outer Measures on $\R^n$)</div>
  <div class="theorem-content">If $\mu$ and $\nu$ are two Borel outer measures on $\R^n$ such that
    \[ \mu(R) = \nu(R) \]
    for each closed rectangle $R = [a_1,b_1]\times \cdots \times [a_n,b_n]$, then $\mu(E) = \nu(E)$ for every Borel set $E\sub \R^n$.
    The same is true if we replace closed rectangles with open rectangles or half-open rectangles.</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-8">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-8')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-8">
    Let $\mathcal{P}$ be the collection of all closed (open, half-open) rectangles in $\R^n$.
    Then $\mathcal{P}$ is a $\pi$-system which generates the Borel $\sigma$-algebra on $\R^n$.
    Let $\mathcal{L} = \{ E\sub \R^n : \mu(E) = \nu(E) \}$.
    Then $\mathcal{L}$ is a $\lambda$-system containing $\mathcal{P}$, since $\mu(R) = \nu(R)$ for every $R\in \mathcal{P}$ by assumption.
    Thus by the $\pi$-$\lambda$ theorem, we have $\sigma(\mathcal{P}) \sub \mathcal{L}$.
<p>We know that $\sigma(\mathcal{P})$ is the Borel $\sigma$-algebra on $\R^n$ since each open set in $\R^n$ can be written as a countable union of closed (open, half-open) rectangles.
    Thus $\mu(E) = \nu(E)$ for every Borel set $E\sub \R^n$ as desired.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<p>Hopefully this proof shows the utility of the $\pi$-$\lambda$ theorem, as it is not obvious that the collection $\mathcal{L}$ is a $\sigma$-algebra (closed under intersections is not obvious), but it is easy to check that it is a $\lambda$-system.</p>
    </main>
  </div>
  
  <script>
    function toggleChapter(element) {
      element.parentElement.classList.toggle('expanded');
    }
    
    // Highlight current page in sidebar
    document.addEventListener('DOMContentLoaded', () => {
      const currentPath = window.location.pathname;
      const links = document.querySelectorAll('.section-link');
      links.forEach(link => {
        if (currentPath.endsWith(link.getAttribute('href').split('/').pop())) {
          link.classList.add('active');
          // Expand parent chapter
          const group = link.closest('.chapter-group');
          if (group) group.classList.add('expanded');
        }
      });
    });
    
    window.addEventListener('DOMContentLoaded', () => {
      console.log('Restoring proof collapse states...');
      try {
        const openProofs = JSON.parse(localStorage.getItem('openProofs') || '{}');
        const currentPage = window.location.pathname;
        const pageOpen = openProofs[currentPage] || [];
        
        console.log('Current page:', currentPage);
        console.log('Open proof IDs stored:', pageOpen);
        console.log('Found ' + pageOpen.length + ' open proofs for this page');
        
        document.querySelectorAll('.proof-box').forEach(box => {
          const proofId = box.getAttribute('data-proof-id');
          console.log('Checking proof:', proofId, 'Should be open:', pageOpen.includes(proofId));
          if (pageOpen.includes(proofId)) {
            box.classList.remove('collapsed');
            const button = box.querySelector('.proof-toggle');
            button.setAttribute('aria-expanded', 'true');
          } else {
            box.classList.add('collapsed');
            const button = box.querySelector('.proof-toggle');
            button.setAttribute('aria-expanded', 'false');
          }
        });
        
        const openBoxes = JSON.parse(localStorage.getItem('openBoxes') || '{}');
        const pageBoxes = openBoxes[currentPage] || [];
        
        console.log('Open box IDs stored:', pageBoxes);
        
        document.querySelectorAll('.collapsible-box').forEach(box => {
          const boxId = box.getAttribute('data-collapsible-id');
          console.log('Checking box:', boxId, 'Should be open:', pageBoxes.includes(boxId));
          if (pageBoxes.includes(boxId)) {
            box.classList.remove('collapsed');
          } else {
            box.classList.add('collapsed');
          }
        });
        
        console.log('Proof states restored');
      } catch (e) {
        console.error('Error restoring collapse state:', e);
      }
    });
    
    function toggleProof(proofId) {
      const proofContent = document.getElementById(proofId);
      const proofBox = proofContent.closest('.proof-box');
      proofBox.classList.toggle('collapsed');
      
      const button = proofBox.querySelector('.proof-toggle');
      button.setAttribute('aria-expanded', !proofBox.classList.contains('collapsed'));
      
      saveProofState();
    }
    
    function toggleSubproof(subproofId) {
      const subproofContent = document.getElementById(subproofId);
      const subproof = subproofContent.closest('.subproof');
      subproof.classList.toggle('collapsed');
      
      const button = subproof.querySelector('.subproof-toggle');
      button.setAttribute('aria-expanded', !subproof.classList.contains('collapsed'));
    }
    
    function saveProofState() {
      try {
        const currentPage = window.location.pathname;
        const openProofs = JSON.parse(localStorage.getItem('openProofs') || '{}');
        if (!openProofs[currentPage]) {
          openProofs[currentPage] = [];
        }
        
        openProofs[currentPage] = [];
        document.querySelectorAll('.proof-box:not(.collapsed)').forEach(box => {
          const proofId = box.getAttribute('data-proof-id');
          if (proofId) {
            openProofs[currentPage].push(proofId);
          }
        });
        
        localStorage.setItem('openProofs', JSON.stringify(openProofs));
        console.log('Saved proof state (open proofs):', openProofs[currentPage]);
      } catch (e) {
        console.error('Error saving collapse state:', e);
      }
    }
    
    function toggleCollapsible(collapsibleId) {
      const content = document.getElementById(collapsibleId);
      const box = content.closest('.collapsible-box');
      box.classList.toggle('collapsed');
      
      saveCollapsibleState();
    }
    
    function saveCollapsibleState() {
      try {
        const currentPage = window.location.pathname;
        const openBoxes = JSON.parse(localStorage.getItem('openBoxes') || '{}');
        if (!openBoxes[currentPage]) {
          openBoxes[currentPage] = [];
        }
        
        openBoxes[currentPage] = [];
        document.querySelectorAll('.collapsible-box:not(.collapsed)').forEach(box => {
          const boxId = box.getAttribute('data-collapsible-id');
          if (boxId) {
            openBoxes[currentPage].push(boxId);
          }
        });
        
        localStorage.setItem('openBoxes', JSON.stringify(openBoxes));
      } catch (e) {
        console.error('Error saving box state:', e);
      }
    }
    
    document.addEventListener('keydown', (e) => {
      if (e.key === 'p' && e.ctrlKey) {
        e.preventDefault();
        const proofBoxes = document.querySelectorAll('.proof-box');
        const anyExpanded = Array.from(proofBoxes).some(box => !box.classList.contains('collapsed'));
        
        proofBoxes.forEach(box => {
          if (anyExpanded) {
            box.classList.add('collapsed');
          } else {
            box.classList.remove('collapsed');
          }
        });
        
        saveProofState();
      }
    });
    
    document.querySelectorAll('a.ref-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href').substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'center' });
          target.style.background = '#fef3c7';
          target.style.transition = 'background 0.3s ease';
          setTimeout(() => { target.style.background = ''; }, 1500);
        }
      });
    });
  </script>
</body>
</html>