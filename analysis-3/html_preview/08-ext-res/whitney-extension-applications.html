<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>whitney-extension-applications</title>
  <script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true,
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '0.8em',
      packages: {'[+]': ['ams']},
      macros: {
        R: '\\mathbb{R}',
        C: '\\mathbb{C}',
        N: '\\mathbb{N}',
        Z: '\\mathbb{Z}',
        Q: '\\mathbb{Q}',
        E: '\\mathbb{E}',
        F: '\\mathbb{F}',
        S: '\\mathbb{S}',
        H: '\\mathcal{H}',
        L: '\\mathcal{L}',
        dif: '\\,\\mathrm{d}',
        supp: '\\operatorname{supp}',
        proj: '\\operatorname{proj}',
        Id: '\\operatorname{Id}',
        Span: '\\operatorname{span}',
        graph: '\\operatorname{graph}',
        dist: '\\operatorname{dist}',
        diam: '\\operatorname{diam}',
        avg: '\\operatorname{avg}',
        div: '\\operatorname{div}',
        vol: '\\operatorname{vol}',
        ord: '\\operatorname{ord}',
        Chi: '\\mathbf{1}',
        sub: '\\subseteq',
        mres: '\\downharpoonright',
        ddag: '\\ddagger',
        dag: '\\dagger',
        norm: ['\\left\\| #1 \\right\\|', 1],
        abs: ['\\left| #1 \\right|', 1],
        set: ['\\left\\{ #1 \\right\\}', 1],
        inner: ['\\langle #1, #2 \\rangle', 2],
        floor: ['\\lfloor #1 \\rfloor', 1],
        ceil: ['\\lceil #1 \\rceil', 1],
        llbracket: '\\unicode{x27E6}',
        rrbracket: '\\unicode{x27E7}',
        bigskull: '\\unicode{x1F480}',
        skull: '\\unicode{x2620}',
        mathwitch: '\\unicode{x1F9D9}',
        pumpkin: '\\unicode{x1F383}',
        mathpumpkin: '\\unicode{x1F383}',
        bigpumpkin: '\\unicode{x1F383}',
        mathghost: '\\unicode{x1F47B}',
        mathcat: '\\unicode{x1F408}',
        mathbat: '\\unicode{x1F987}',
        esssup: '\\operatorname{ess\\,sup}',
        essinf: '\\operatorname{ess\\,inf}',
        Lip: '\\operatorname{Lip}',
        pd: ['\\frac{\\partial#1}{\\partial#2}', 2],
        od: ['\\frac{\\mathrm{d}#1}{\\mathrm{d}#2}', 2],
        dashint: '\\mathchoice{\\rlap{-}\\!\\int}{\\rlap{\\raise.15ex\\hbox{\\smash{\\scriptscriptstyle-}}}\\int}{\\rlap{\\raise.09ex\\hbox{\\smash{\\scriptscriptstyle-}}}\\int}{\\rlap{\\raise.09ex\\hbox{\\smash{\\scriptscriptstyle-}}}\\int}',
        eurologo: '\\unicode{x20AC}',
        starredbullet: '\\unicode{x2726}',
        grimace: '\\unicode{x1F62C}',
        textthing: '\\unicode{x2639}',
        noway: '\\unicode{x26D4}',
        warning: '\\unicode{x26A0}',
        danger: '\\unicode{x26A0}',
        textxswup: '\\unicode{x2195}',
        textxswdown: '\\unicode{x2195}',
        decoone: '\\unicode{x2756}',
        decotwo: '\\unicode{x2767}',
        decothreeleft: '\\unicode{x2619}',
        decothreeright: '\\unicode{x2767}',
        decofourleft: '\\unicode{x261A}',
        decofourright: '\\unicode{x261B}',
        floweroneleft: '\\unicode{x2740}',
        floweroneright: '\\unicode{x2740}',
        lefthand: '\\unicode{x261C}',
        righthand: '\\unicode{x261E}',
        decosix: '\\unicode{x2766}',
        bomb: '\\unicode{x1F4A3}',
        caution: '\\unicode{x2621}',
        leftblackhand: '\\unicode{x261A}',
        rightblackhand: '\\unicode{x261B}',
        leafleft: '\\unicode{x2618}',
        leafright: '\\unicode{x2618}',
        leafNW: '\\unicode{x2618}',
        leafNE: '\\unicode{x2618}',
        leafSE: '\\unicode{x2618}',
        leafSW: '\\unicode{x2618}',
        aldineleft: '\\unicode{x2619}',
        aldineright: '\\unicode{x2767}',
        aldine: '\\unicode{x2766}',
        aldinesmall: '\\unicode{x2767}',
        aldinesmallrevert: '\\unicode{x2619}',
        aldinesmallup: '\\unicode{x2766}',
        grappe: '\\unicode{x2766}',
        rightgrappe: '\\unicode{x2767}',
        leftgrappe: '\\unicode{x2619}',
        oldpilcrowone: '\\unicode{x00B6}',
        oldpilcrowtwo: '\\unicode{x00B6}',
        oldpilcrowthree: '\\unicode{x00B6}',
        oldpilcrowfour: '\\unicode{x00B6}',
        oldpilcrowfive: '\\unicode{x00B6}',
        oldpilcrowsix: '\\unicode{x00B6}'
      }
    },
    startup: {
      pageReady: () => {
        return MathJax.startup.defaultPageReady().then(() => {
          console.log('MathJax ready');
        });
      }
    }
  };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" id="MathJax-script"></script>
  <script>
  (function() {
    window.addEventListener('beforeunload', function() {
      saveProofState();
      saveCollapsibleState();
    });
    
    const eventSource = new EventSource('http://localhost:35729/reload-stream');
    
    eventSource.onmessage = function(event) {
      if (event.data === 'reload') {
        console.log('üìù File updated, saving state and reloading...');
        saveProofState();
        saveCollapsibleState();
        setTimeout(() => {
          window.location.reload();
        }, 50);
      }
    };
    
    eventSource.onerror = function() {
      console.log('‚ö†Ô∏è  Auto-reload server not available. Run node watch.js to enable auto-reload.');
      eventSource.close();
    };
    
    console.log('üîÑ Auto-reload enabled');
  })();
  </script>
  <style>
    * { box-sizing: border-box; }
    
    body {
      font-family: Georgia, "Times New Roman", serif;
      font-size: 16px;
      line-height: 1.7;
      margin: 0;
      padding: 0;
      color: #1a1a1a;
      background: #ffffff;
    }
    
    /* Layout with sidebar */
    .page-layout {
      display: flex;
      min-height: 100vh;
    }
    
    /* Sidebar styles */
    .sidebar {
      width: 280px;
      background: #fff;
      border-right: 1px solid #e0e0e0;
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      overflow-y: auto;
      padding: 20px 0;
      font-size: 14px;
    }
    
    .sidebar-header {
      padding: 15px 20px 25px;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .sidebar-header h1 {
      font-size: 1.3em;
      font-weight: 600;
      color: #1a1a1a;
      margin: 0 0 5px 0;
    }
    
    .sidebar-header .subtitle {
      font-size: 0.85em;
      color: #666;
      font-style: italic;
    }
    
    .sidebar-header .back-link {
      display: block;
      font-size: 0.8em;
      color: #666;
      text-decoration: none;
      margin-top: 12px;
    }
    
    .sidebar-header .back-link:hover {
      color: #1a1a1a;
    }
    
    .sidebar-nav {
      padding: 10px 0;
    }
    
    .chapter-group {
      margin-bottom: 2px;
    }
    
    .chapter-title {
      padding: 12px 20px;
      font-size: 0.9em;
      font-weight: 600;
      color: #333;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .chapter-title:hover {
      background: #f5f5f5;
    }
    
    .chapter-title .toggle {
      font-size: 0.65em;
      color: #999;
      transition: transform 0.2s;
    }
    
    .chapter-group.expanded .chapter-title .toggle {
      transform: rotate(90deg);
    }
    
    .section-list {
      display: none;
      padding: 5px 0;
      background: #f8f8f8;
    }
    
    .chapter-group.expanded .section-list {
      display: block;
    }
    
    .section-link {
      display: block;
      padding: 8px 20px 8px 35px;
      font-size: 0.85em;
      color: #555;
      text-decoration: none;
      border-left: 3px solid transparent;
    }
    
    .section-link:hover {
      background: #f0f0f0;
      color: #1a1a1a;
    }
    
    .section-link.active {
      background: #e8e8e8;
      border-left-color: #333;
      color: #000;
      font-weight: 500;
    }
    
    /* Main content area */
    .main-content {
      margin-left: 280px;
      flex: 1;
      max-width: 900px;
      padding: 40px 60px;
    }
    
    @media (max-width: 1100px) {
      .sidebar {
        width: 240px;
      }
      .main-content {
        margin-left: 240px;
        padding: 30px 40px;
      }
    }
    
    @media (max-width: 800px) {
      .sidebar {
        position: relative;
        width: 100%;
        height: auto;
        border-right: none;
        border-bottom: 1px solid #e0e0e0;
      }
      .main-content {
        margin-left: 0;
        padding: 20px;
      }
      .page-layout {
        flex-direction: column;
      }
    }
    
    h2, h3, h4 {
      margin-top: 2em;
      margin-bottom: 0.75em;
      color: #000;
      font-weight: 600;
    }
    h2 { font-size: 1.5em; border-bottom: 1px solid #e0e0e0; padding-bottom: 0.3em; }
    h3 { font-size: 1.25em; }
    h4 { font-size: 1.1em; }
    p {
      margin: 1em 0;
      text-indent: 2em;
    }
    p:first-of-type,
    h2 + p,
    h3 + p,
    h4 + p,
    .theorem-box + p,
    .proof-box + p {
      text-indent: 0;
    }
    .noindent + p,
    p:has(> .noindent:first-child) {
      text-indent: 0 !important;
    }
    .noindent {
      display: none;
    }
    .theorem-box {
      margin: 1.75em 0;
      padding: 1.25em;
      border-left: 5px solid #16a34a;
      background: linear-gradient(to top, #bbf7d0 0%, #d1fae5 100%);
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    .definition-box { border-left-color: #16a34a; background: linear-gradient(to top, #d1fae5 0%, #ecfdf5 100%); }
    .lemma-box { border-left-color: #1e3a8a; background: linear-gradient(to top, #bfdbfe 0%, #dbeafe 100%); }
    .corollary-box { border-left-color: #9333ea; background: linear-gradient(to top, #e9d5ff 0%, #f3e8ff 100%); }
    .proposition-box { border-left-color: #dc2626; background: linear-gradient(to top, #fecaca 0%, #fee2e2 100%); }
    .remark-box { border-left-color: #64748b; background: linear-gradient(to top, #e2e8f0 0%, #f1f5f9 100%); }
    .example-box { border-left-color: #0891b2; background: linear-gradient(to top, #a5f3fc 0%, #cffafe 100%); }
    .construction-box { border-left-color: #ea580c; background: linear-gradient(to top, #fed7aa 0%, #ffedd5 100%); }
    .notation-box { border-left-color: #ca8a04; background: linear-gradient(to top, #fef08a 0%, #fef9c3 100%); }
    .exercise-box { border-left-color: #ea580c; background: linear-gradient(to top, #fed7aa 0%, #ffedd5 100%); }
    .problem-box { border-left-color: #ec4899; background: linear-gradient(to top, #fbcfe8 0%, #fce7f3 100%); }
    .theorem-header {
      margin-bottom: 0.75em;
      font-size: 1.05em;
      font-weight: 600;
    }
    .theorem-header.clickable {
      cursor: pointer;
      user-select: none;
    }
    .theorem-header.clickable:hover {
      background: rgba(0,0,0,0.03);
      margin: -0.5em -0.75em 0.75em -0.75em;
      padding: 0.5em 0.75em;
      border-radius: 4px;
    }
    .collapsible-icon {
      display: inline-block;
      transition: transform 0.2s ease;
      font-size: 0.75em;
      margin-right: 0.5em;
      color: #6b7280;
    }
    .collapsible-box.collapsed .collapsible-icon {
      transform: rotate(-90deg);
    }
    .collapsible-content {
      transition: max-height 0.3s ease;
      overflow: hidden;
    }
    .collapsible-box.collapsed .collapsible-content {
      display: none;
    }
    .theorem-content {
      padding-left: 0.5em;
      line-height: 1.8;
    }
    .proof-box {
      margin: 1.5em 0;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      background: white;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }
    .proof-header {
      position: sticky;
      top: 0;
      background: linear-gradient(to bottom, #fafafa 0%, #f5f5f5 100%);
      border-bottom: 1px solid #e5e7eb;
      z-index: 100;
      border-radius: 6px 6px 0 0;
    }
    .proof-toggle {
      width: 100%;
      padding: 0.85em 1.25em;
      border: none;
      background: transparent;
      text-align: left;
      cursor: pointer;
      font-family: inherit;
      font-size: 1em;
      display: flex;
      align-items: center;
      gap: 0.75em;
      transition: background 0.15s;
    }
    .proof-toggle:hover { background: rgba(0,0,0,0.03); }
    .proof-toggle-icon {
      display: inline-block;
      transition: transform 0.2s ease;
      font-size: 0.75em;
      color: #6b7280;
    }
    .proof-box.collapsed .proof-toggle-icon {
      transform: rotate(-90deg);
    }
    .proof-content {
      padding: 1.25em;
      line-height: 1.8;
    }
    .proof-box.collapsed .proof-content {
      display: none;
    }
    .proof-end {
      float: right;
      font-size: 1.3em;
      margin-left: 0.5em;
      color: #374151;
    }
    .subproof {
      margin: 1em 0;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      background: #f9fafb;
    }
    .subproof-header {
      background: linear-gradient(to bottom, #f9fafb 0%, #f3f4f6 100%);
      border-bottom: 1px solid #d1d5db;
      border-radius: 4px 4px 0 0;
    }
    .subproof-toggle {
      width: 100%;
      padding: 0.6em 1em;
      border: none;
      background: transparent;
      text-align: left;
      cursor: pointer;
      font-family: inherit;
      font-size: 0.95em;
      display: flex;
      align-items: center;
      gap: 0.5em;
      transition: background 0.15s;
    }
    .subproof-toggle:hover {
      background: rgba(0,0,0,0.03);
    }
    .subproof-toggle-icon {
      display: inline-block;
      transition: transform 0.2s ease;
      font-size: 0.7em;
      color: #6b7280;
    }
    .subproof.collapsed .subproof-toggle-icon {
      transform: rotate(-90deg);
    }
    .subproof-content {
      padding: 1em;
      line-height: 1.7;
    }
    .subproof.collapsed .subproof-content {
      display: none;
    }
    .ref-link {
      color: #2563eb;
      text-decoration: none;
      font-weight: 500;
      padding: 0 0.15em;
      border-radius: 2px;
    }
    .ref-link:hover {
      background: #dbeafe;
      text-decoration: underline;
    }
    .ref-unknown {
      color: #dc2626;
      font-weight: bold;
      background: #fee2e2;
      padding: 0.1em 0.3em;
      border-radius: 3px;
    }
    strong { font-weight: 600; }
    em { font-style: italic; }
    ol, ul {
      margin: 1em 0;
      padding-left: 2.5em;
      line-height: 1.8;
    }
    li {
      margin: 0.5em 0;
    }
    .latex-image {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 1.5em auto;
    }
    .latex-figure .latex-image {
      display: inline-block;
      margin: 0.5em;
      vertical-align: middle;
    }
    .latex-figure {
      margin: 2em 0;
      text-align: center;
      line-height: 0;
    }
    .latex-figure .figure-content {
      margin-bottom: 0.75em;
      line-height: normal;
    }
    .latex-figure .figure-content > * {
      vertical-align: middle;
    }
    .latex-figure figcaption {
      font-size: 0.9em;
      color: #4b5563;
      font-style: italic;
      margin-top: 0.5em;
    }
  </style>
</head>
<body>
  <div class="page-layout">
    <nav class="sidebar">
      <div class="sidebar-header">
        <h1>Analysis III</h1>
        <div class="subtitle">Measure Theory &amp; Integration</div>
        <a href="../index.html" class="back-link">‚Üê Table of Contents</a>
      </div>
      <div class="sidebar-nav">
        <div class="chapter-group expanded">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>1. Measure Theory</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../01-measure-theory/measure-theory.html" class="section-link">Overview</a>
            <a href="../01-measure-theory/basics.html" class="section-link">Outer Measures</a>
            <a href="../01-measure-theory/lebesgue-meas.html" class="section-link">Lebesgue Measure</a>
            <a href="../01-measure-theory/cantor.html" class="section-link">The Cantor Set</a>
            <a href="../01-measure-theory/measure-spaces.html" class="section-link">Measure Spaces</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>2. Integration</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../02-integration/integration.html" class="section-link">Overview</a>
            <a href="../02-integration/integrals-1.html" class="section-link">Simple Functions</a>
            <a href="../02-integration/integrals-2.html" class="section-link">General Functions</a>
            <a href="../02-integration/convergence.html" class="section-link">Convergence Theorems</a>
            <a href="../02-integration/inequality-party.html" class="section-link">Integral Inequalities</a>
            <a href="../02-integration/lp_spaces.html" class="section-link">L·µñ Spaces</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>3. Product Measures</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../03-fubini/fubini_ch.html" class="section-link">Overview</a>
            <a href="../03-fubini/fubini.html" class="section-link">Fubini-Tonelli</a>
            <a href="../03-fubini/integrals-3.html" class="section-link">Product Measures</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>4. Differentiation I</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../04-differentiation-1/differentiation.html" class="section-link">Overview</a>
            <a href="../04-differentiation-1/covering.html" class="section-link">Vitali Covering</a>
            <a href="../04-differentiation-1/monotone.html" class="section-link">Monotone Functions</a>
            <a href="../04-differentiation-1/BV_on_R.html" class="section-link">Bounded Variation</a>
            <a href="../04-differentiation-1/FTOC.html" class="section-link">FTC for Lebesgue</a>
            <a href="../04-differentiation-1/HL.html" class="section-link">Hardy-Littlewood</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>5. Differentiation I (cont)</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../05-differentiation-1/differentiation.html" class="section-link">Overview</a>
            <a href="../05-differentiation-1/r-nik.html" class="section-link">Radon-Nikodym</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>6. Differentiation II</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../06-differentiation-2/diff-2.html" class="section-link">Overview</a>
            <a href="../06-differentiation-2/vector-measures.html" class="section-link">Vector Measures</a>
            <a href="../06-differentiation-2/r-nik.html" class="section-link">Radon-Nikodym</a>
            <a href="../06-differentiation-2/besi.html" class="section-link">Besicovitch</a>
            <a href="../06-differentiation-2/densities.html" class="section-link">Densities</a>
            <a href="../06-differentiation-2/diff-measures.html" class="section-link">Measure Derivatives</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>7. Riesz Representation</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../06-riesz/riesz.html" class="section-link">Overview</a>
            <a href="../06-riesz/riesz_functional.html" class="section-link">Riesz Representation</a>
            <a href="../06-riesz/LCH_spaces.html" class="section-link">LCH Spaces</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>8. Integral Formulas</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../07-formulas/formulas.html" class="section-link">Overview</a>
            <a href="../07-formulas/hausdorff_meas.html" class="section-link">Hausdorff Measures</a>
            <a href="../07-formulas/lippy.html" class="section-link">Lipschitz Maps</a>
            <a href="../07-formulas/rademacher.html" class="section-link">Rademacher</a>
            <a href="../07-formulas/coarea-prereq.html" class="section-link">Coarea Prerequisites</a>
            <a href="../07-formulas/coarea.html" class="section-link">Coarea Formula</a>
            <a href="../07-formulas/area-prereq.html" class="section-link">Area Prerequisites</a>
            <a href="../07-formulas/area-formula.html" class="section-link">Area Formula</a>
          </div>
        </div>
        <div class="chapter-group">
          <div class="chapter-title" onclick="toggleChapter(this)"><span>9. Extension Results</span><span class="toggle">‚ñ∂</span></div>
          <div class="section-list">
            <a href="../08-ext-res/ext-res.html" class="section-link">Overview</a>
            <a href="../08-ext-res/taylor_thm_integral_remainder.html" class="section-link">Taylor's Theorem</a>
            <a href="../08-ext-res/whitney-cover.html" class="section-link">Whitney Covering</a>
            <a href="../08-ext-res/whitney-partition-of-unity.html" class="section-link">Partition of Unity</a>
            <a href="../08-ext-res/whitney-decomposition.html" class="section-link">Decomposition</a>
            <a href="../08-ext-res/whitney-extension-theorem.html" class="section-link">Extension Theorem</a>
            <a href="../08-ext-res/whitney-extension-proof.html" class="section-link">Extension Proof</a>
            <a href="../08-ext-res/whitney-extension-applications.html" class="section-link">Applications</a>
            <a href="../08-ext-res/whitney-extension.html" class="section-link">Summary</a>
            <a href="../08-ext-res/more-bump.html" class="section-link">More Bump Functions</a>
          </div>
        </div>
      </div>
    </nav>
    
    <main class="main-content">
      <h2>Applications of Whitney's Extension Theorem</h2>
<p>We flush out all the details of Whitney's paper <em>Functions Differentiable on the Boundaries of Regions</em>, 
which is a follow up to his extension theorem paper <em>Analytic Extensions of Differentiable Functions Defined in Closed Sets</em>.</p>
<h3>Two different definitions of $C^m(\overline{U</h3>)$}
<p>In this section we want to define and compare two different $C^m$ function spaces the closre of an open set $U \subseteq \R^n$.</p>
<div class="theorem-box definition-box" id="def:Cm_spaces_on_closure">
  <div class="theorem-header"><strong>Definition ?</strong></div>
  <div class="theorem-content">Let $U \subseteq \R^n$ be an open set.
First we recall the definition of the space
\[ C^m_\text{b}(U) := \{ f \in C^m(U) : \text{ for each } \alpha \in \N^n \text{ with } |\alpha| \leq m, D^\alpha f \text{ is bounded on } U \} \]
of $C^m$ functions on $U$ with bounded derivatives up to order $m$.
<p>Then the ``geometeric'' definition of $C^m(\overline{U})$ is the set
\[ C^m_{\text{geo}}(\overline{U}) := \left\{ f \in C^0(\overline{U}) : \text{ there is an open set } V \subseteq \R^n \text{ such that } \overline{U} \subset V \text{ and there is a function } \tilde{f} \in C^m(V) \text{ with } \tilde{f}|_{\overline{U}} = f \right\} \]
while the ``analytic'' definition of $C^m(\overline{U})$ is the set
\[ C^m_{\text{ana}}(\overline{U}) := \left\{ f \in C^m(U) :\text{ for each } \alpha \in \N^n \text{ with } |\alpha| \leq m, D^\alpha f \text{ is unformly continuous on each bounded subset of } U \right\}. \]</div>
</div></p>
<p>The definition of $C^m_{\text{ana}}(\overline{U})$ makes it possible to extend a function $f \in C^m_{\text{ana}}(\overline{U})$ and its derivatives to be defined on the closure $\overline{U}$.
The definition of $C^m_{\text{geo}}(\overline{U})$ makes it possible to extend a function $f \in C^m_{\text{geo}}(\overline{U})$ and its derivatives to be defined on an open set containing the closure $\overline{U}$.
That's the key difference.</p>
<div class="theorem-box remark-box collapsible-box collapsed" id="rmk:natural_inclusion_of_Cm_spaces" data-collapsible-id="collapsible-rmk:natural_inclusion_of_Cm_spaces">
  <div class="theorem-header clickable" onclick="toggleCollapsible('collapsible-rmk:natural_inclusion_of_Cm_spaces')">
    <span class="collapsible-icon">‚ñº</span>
    <strong>Remark ?</strong> (Natural inclusion $C^m_{\text{geo}}(\overline{U}) \hookrightarrow C^m_{\text{ana}}(\overline{U})$)
  </div>
  <div class="theorem-content collapsible-content" id="collapsible-rmk:natural_inclusion_of_Cm_spaces">Assume that $U\subseteq \R^n$ is an open set.
Then it is easy to see that the restriction map
\[ C^m_{\text{geo}}(\overline{U}) \hookrightarrow C^m_{\text{ana}}(\overline{U}), \qquad f \longmapsto f|_U \]
is a well-defined linear injection.
<p>To see this, let $f \in C^m_{\text{geo}}(\overline{U})$.
Then $f \in C^0(\overline{U})$ and there is an open set $V \subseteq \R^n$ such that $\overline{U} \subset V$ and a function $\tilde{f} \in C^m(V)$ such that $\tilde{f}|_{\overline{U}} = f$.
But then 
\[ f|_U = \tilde{f}|_U \in C^m(U) \] 
and for each $\alpha \in \N^n$ with $|\alpha| \leq m$, the function $D^\alpha \tilde{f}$ is continuous on $\overline{U}$, so the function $D^\alpha (f|_U) = \left(D^\alpha \tilde{f}\right)|_U$ 
is continuous on each compact subset of $U$ and is hence uniformly continuous on each bounded subset of $U$.</p>
<p>This shows $f|_U \in C^m_{\text{ana}}(\overline{U})$, so the restriction map is well-defined.
Also this map is injective because if $f, g \in C^m_{\text{geo}}(\overline{U})$ and $f|_U = g|_U$, then $f = g$ on $\overline{U}$ by continuity of $f$ and $g$.
Lastly it is clear the restriction map is linear because if $f, g \in C^m_{\text{geo}}(\overline{U})$ and $\lambda \in \R$, then 
\[ (f+\lambda g)|_U = f|_U + (\lambda g)|_U = f|_U + \lambda \cdot g|_U. \]</p>
<p>Note that we use the language ``inclusion map'' because we cannot say that $C^m_{\text{geo}}(\overline{U})$ is a subset of $C^m_{\text{ana}}(\overline{U})$ because (by definition) they contain different types of objects 
--- the space $C^m_{\text{geo}}(\overline{U})$ contains functions defined on $\overline{U}$, while $C^m_{\text{ana}}(\overline{U})$ contains functions defined on $U$.</div>
</div></p>
<h3>Properties of the analysts' definition of $C^m(\overline{U</h3>)$}
<div class="theorem-box lemma-box" id="lem:extension_of_uniformly_continuous_on_bdd_subsets">
  <div class="theorem-header"><strong>Lemma ?</strong> (Extension Lemma)</div>
  <div class="theorem-content">Let $(X, d_X)$ be a metric space, let $U\subseteq X$ be an open subset, and let $(Y, d_Y)$ be a complete metric space.
<p>Then each continuous function $g : U \to Y$ that is uniformly continuous on each bounded subset of $U$ extends to a unique continuous function $\tilde{g} : \overline{U} \to Y$ such that $\tilde{g}|_U = g$.</div>
</div></p>
<div class="proof-box collapsed" data-proof-id="proof-num-0">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-0')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-0">
    Let $g : U \to Y$ be a function that is uniformly continuous on each bounded subset of $U$.
    Then we claim that there is a unique continuous function $\tilde{g} : \overline{U} \to \R$ such that $\tilde{g}|_U = g$.
<p><div style="margin: 1em 0;"></div></p>
<p>First we will show that there is at most one such function $\tilde{g}$.
    Let $\tilde{g}_1, \tilde{g}_2 : \overline{U} \to Y$ be two continuous functions such that $\tilde{g}_1|_U = g$ and $\tilde{g}_2|_U = g$.
    Then for each $x \in \overline{U}$, we have
    \[ d_Y(\tilde{g}_1(x), \tilde{g}_2(x)) = \lim_{U \ni y \to x} d_Y(\tilde{g}_1(y), \tilde{g}_2(y)) = \lim_{U \ni y \to x} d_Y(g(y), g(y)) = 0, \]
    so $\tilde{g}_1(x) = \tilde{g}_2(x)$.
    This shows that $\tilde{g}_1 = \tilde{g}_2$, and hence there is at most one such function $\tilde{g}$.</p>
<p><div style="margin: 1em 0;"></div></p>
<p>Now we will define the desired extension.
    For each $x \in \overline{U}$, choose a sequence $\{ x_k \}_{k=1}^\infty$ in $U$ such that $\lim_{k \to \infty} x_k = x$.
    Then the sequence $\{ x_k \}_{k=1}^\infty$ is a Cauchy sequence in $U$, and is contained in a bounded subset $V$ of $U$; 
    by uniform continuity of $g$ on $V$, the sequence $\{ g(x_k) \}_{k=1}^\infty$ is a Cauchy sequence in the complete metric space $Y$, and hence converges to some point $\tilde{g}(x) \in Y$.</p>
<p>We claim that this function $\tilde{g} : \overline{U} \to Y$ is well-defined.
    Let $x\in U$ and let $\{ x_k \}_{k=1}^\infty$ and $\{ y_k \}_{k=1}^\infty$ be two sequences in $U$ such that $\lim_{k \to \infty} x_k = x$ and $\lim_{k \to \infty} x_k' = x$.
    Then the sequences $\{ x_k \}_{k=1}^\infty$ and $\{ x_k' \}_{k=1}^\infty$ are Cauchy sequences in $U$, and are contained in a bounded subset $V$ of $U$;
    since $g$ is uniformly continuous on $V$, the sequences $\{ g(x_k) \}_{k=1}^\infty$ and $\{g(x_k')\}_{k=1}^\infty$ are Cauchy sequences in $Y$, and hence converge.
    We need to show that 
    \[ \lim_{k\to\infty} g(x_k) = \lim_{k\to\infty} g(x_k'). \tag{$\decoone$}\]</p>
<p>Let $\{ z_n \}_{n=1}^\infty$ be the sequence defined by $z_{2k-1} := x_k$ and $z_{2k} := x_k'$ for each $k \in \Z^+$.
    (That is the sequence $\{ z_n \}_{n=1}^\infty$ alternates between the two sequences $\{ x_k \}_{k=1}^\infty$ and $\{ x_k' \}_{k=1}^\infty$)
    Let $\epsilon > 0$, and let $N \in \Z^+$ be such that
    \[ d_X(x_k,x) < \epsilon \quad\text{ and }\quad d_X(x_k',x) < \epsilon \qquad \forall \, k\geq N. \]
    Then if $k\geq 2N$ see that $\frac{n}{2} \geq N$ and $\frac{n+1}{2} \geq N$, so that
    \[ d_X(z_k, x) = d_X(x_{\frac{k}{2}}, x) < \epsilon \]
    if $k$ is even, and
    \[ d_X(z_k, x) = d_X(x_{\frac{k+1}{2}}', x) < \epsilon \]
    if $k$ is odd.
    In either case, we have $d(z_k, x) < \epsilon$ for each $k \geq 2N$, so $\{ z_n \}_{n=1}^\infty$ is a sequence in $U$ that converges to $x$.
    As we argued above, the sequence $\{ g(z_n) \}_{n=1}^\infty$ is a Cauchy sequence in $Y$, and hence converges to some point $y \in Y$.
    Since the sequences $\{ x_k \}_{k=1}^\infty$ and $\{ x_k' \}_{k=1}^\infty$ are subsequences of $\{ z_n \}_{n=1}^\infty$, we see that the sequences $\{ g(x_k) \}_{k=1}^\infty$ and $\{ g(x_k') \}_{k=1}^\infty$ are subsequences of 
    $\{ g(z_n) \}_{n=1}^\infty$, and hence converge to the same limit $y$.
    This proves $(\decoone)$, and hence $\tilde{g}$ is well-defined.</p>
<p><div style="margin: 1em 0;"></div></p>
<p>Finally we will show that $\tilde{g}$ is continuous and that $\tilde{g}|_U = g$.</p>
<p>Let $x \in U$ and see that the constant sequence with each term equal to $x$ converges to $x$, so $\tilde{g}(x) = \lim_{k \to \infty} g(x) = g(x)$, and hence $\tilde{g}|_U = g$.</p>
<p>To see that $\tilde{g}$ is continuous, we will prove that $\tilde{g}$ is uniformly continuous on each bounded subset of $\overline{U}$.
    In particular, from this it follows that $\tilde{g}$ is uniformly continuous on each closed ball in $\overline{U}$, and hence that $\tilde{g}$ is continuous on $\overline{U}$.</p>
<p>Fix a bounded subset $K$ of $\overline{U}$, and let $\epsilon > 0$.
    Since $g$ is uniformly continuous on $K$, there exists $\delta > 0$ such that 
    \[ x_1,x_2 \in K, d_X(x_1,x_2) < \delta \implies d_Y(g(x_1), g(x_2)) < \frac{\epsilon}{3}. \]
    Let $x_1, x_2 \in K$ be points such that $d_X(x_1,x_2) < \frac{\delta}{3}$.
    Then there are sequences $\{ x_{1,k} \}_{k=1}^\infty$ and $\{ x_{2,k} \}_{k=1}^\infty$ in $U$ such that $\lim_{k \to \infty} x_{1,k} = x_1$ and $\lim_{k \to \infty} x_{2,k} = x_2$.
    Hence there exists $N_1 \in \Z^+$ such that for each $k \geq N_1$, we have 
    \[ d_X(x_{1,k}, x_1) < \frac{\delta}{3} \quad\text{ and }\quad d_X(x_{2,k}, x_2) < \frac{\delta}{3}. \]
    Then for each $k \geq N_1$, we have
    \[ d_X(x_{1,k},x_{2,k}) \leq  d_X(x_{1,k}, x_1) + d_X(x_1, x_2) + d_X(x_2, x_{2,k}) < \frac{\delta}{3} + \frac{\delta}{3} + \frac{\delta}{3} = \delta \]
    and hence $d_Y(g(x_{1,k}), g(x_{2,k})) < \epsilon$.</p>
<p>Also since $\tilde{g}(x_1) = \lim_{k \to \infty} g(x_{1,k})$ and $\tilde{g}(x_2) = \lim_{k \to \infty} g(x_{2,k})$, there exists $N_2 \in Z^+$ such that for each $k \geq N_2$, we have
    \[ d_Y(g(x_{1,k}), \tilde{g}(x_1)) < \frac{\epsilon}{3} \quad\text{ and }\quad d_Y(g(x_{2,k}), \tilde{g}(x_2)) < \frac{\epsilon}{3}. \]
    Then for each $k \geq \max\{N_1, N_2\}$, we have
    \[ d_Y(\tilde{g}(x_1), \tilde{g}(x_2)) \leq d_Y(\tilde{g}(x_1), g(x_{1,k})) + d_Y(g(x_{1,k}), g(x_{2,k})) + d_Y(g(x_{2,k}), \tilde{g}(x_2)) < \frac{\epsilon}{3} + \frac{\epsilon}{3} + \frac{\epsilon}{3} = \epsilon. \]
    Since $x_1, x_2 \in K$ were arbitrary points such that $d_X(x_1,x_2) < \frac{\delta}{3}$, this shows that
    \[ x_1, x_2 \in K, d_X(x_1,x_2) < \frac{\delta}{3} \implies d_Y(\tilde{g}(x_1), \tilde{g}(x_2)) < \epsilon. \]
    Since $\epsilon > 0$ was arbitrary, this shows that $\tilde{g}$ is uniformly continuous on $K$.</p>
<p>Since $K$ was an arbitrary bounded subset of $\overline{U}$, this shows that $\tilde{g}$ is uniformly continuous on each bounded subset of $\overline{U}$, and hence that $\tilde{g}$ is
    continuous on $\overline{U}$.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box corollary-box" id="ex:derivatives_of_Cm_ana_functions_extend">
  <div class="theorem-header"><strong>Corollary ?</strong> (Derivatives of $C^m_{\text{ana}}(\overline{U})$ functions extend to continuous functions on the closure)</div>
  <div class="theorem-content">Let $U \subseteq \R^n$ be an open set and let $m \in \Z^+$.
    If $f \in C^m_{\text{ana}}(\overline{U})$ then for each $\alpha \in \N^n$ with $|\alpha| \leq m$, the function $D^\alpha f : U \to \R$ extends to a continuous function on $\overline{U}$, which we also denote by $D^\alpha f$.</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-1">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-1')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-1">
    Let $f \in C^m_{\text{ana}}(\overline{U})$ and let $\alpha \in \N^n$ with $|\alpha| \leq m$.
    Then the function $D^\alpha f : U \to \R$ is uniformly continuous on each bounded subset of $U$, so by Lemma <span class="ref-unknown" title="Reference not found: lem:extension_of_uniformly_continuous_on_bdd_subsets">[lem:extension_of_uniformly_continuous_on_bdd_subsets?]</span>, there is a unique continuous function $\tilde{g}_\alpha : \overline{U} \to \R$ such that $\tilde{g}_\alpha|_U = D^\alpha f$.
    For each $\alpha \in \N^n$ with $|\alpha| \leq m$, we will slightly abuse notation and denote $\tilde{g}_\alpha$ by $D^\alpha f$.
    This shows that for each $\alpha \in \N^n$ with $|\alpha| \leq m$, the function $D^\alpha f : U \to \R$ extends to a continuous function on $\overline{U}$, also denoted by $D^\alpha f$.
    <span class="proof-end">‚ñ°</span>
  </div>
</div>
<div class="theorem-box remark-box collapsible-box collapsed" id="rmk:abuse_of_notation_at_boundary_points" data-collapsible-id="collapsible-rmk:abuse_of_notation_at_boundary_points">
  <div class="theorem-header clickable" onclick="toggleCollapsible('collapsible-rmk:abuse_of_notation_at_boundary_points')">
    <span class="collapsible-icon">‚ñº</span>
    <strong>Remark ?</strong> (Be careful with the abuse of notation at boundary points)
  </div>
  <div class="theorem-content collapsible-content" id="collapsible-rmk:abuse_of_notation_at_boundary_points">In general, you should be careful with the notation $D^\alpha f(x)$ when $x$ is a boundary point of $U$ --- of course it is true that 
    \[ \lim_{U\ni y\to x} D^\alpha f(y) = D^\alpha f(x), \]
    but the classical definition (as a the best linear approximation) of the derivative $D^\alpha f(x)$ at a boundary point $x$ of $U$ <em>is not guarunteed to not hold</em> with the abuse of notation above.
<p>It turns out that this is only an issue for some pathological open sets $U$, which we are not really interested in.
    Still, be careful.</div>
</div></p>
<div class="theorem-box exercise-box" id="ex:Cm_b_normed_vs">
  <div class="theorem-header"><strong>Exercise ?</strong> (Norm on $C^m$ spaces)</div>
  <div class="theorem-content">Let $U \subseteq \R^n$ be an open set and let $m \in \Z^+$.
    For $f \in C^m(U)$ we recall its $C^m$-norm is defined by
    \[ \|f\|_{C^m(U)} := \max_{|\alpha| \leq m} \, \|D^\alpha f\|_{C^0(U)}, \]
    which may be infinite.
<p>Show that $\| \cdot \|_{C^m(U)}$ is a norm on $C^m_\text{b}(U)$ and on $C^m_{\text{ana}}(\overline{U})$.</p>
<p><div style="margin: 1em 0;"></div></p>
<p><span class="noindent"></span>Also show that $\llbracket \:\! \cdot \:\! \rrbracket_{C^m(U)}$ defined by
    \[ \llbracket f \rrbracket_{C^m(U)} := \sum_{|\alpha| \leq m} \, \|D^\alpha f\|_{C^0(U)} \]
    is a norm on $C^m_\text{b}(U)$ and on $C^m_{\text{ana}}(\overline{U})$, and that the two norms $\| \cdot \|_{C^m(U)}$ and $\llbracket \:\! \cdot \:\! \rrbracket_{C^m(U)}$ are equivalent on these spaces.</div>
</div></p>
<p>Because these norms are equivalent, we will use the notation $\| \cdot \|_{C^m(U)}$ for both of them, and will only distinguish them when necessary.</p>
<div class="proof-box collapsed" data-proof-id="proof-num-2">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-2')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-2">
    First we will show that $\| \cdot \|_{C^m(U)}$ is positive definite, homogeneous, and satisfies the triangle inequality for $C^m$ functions on $U$.
    Let $f, g \in C^m(U)$ and let $\lambda \in \R$.
<p>Then clearly $\|f\|_{C^m(U)} \geq 0$ and
    \begin{align*}
        \|f\|_{C^m(U)} = 0 &\implies \|D^\alpha f\|_{C^0(U)} = 0 \text{ for each } \alpha \in \N^n \text{ with } |\alpha| \leq m \\
            &\implies \| f\|_{C^0(U)} = 0 \\
            &\implies f = 0 \ \text{ on } U
    \end{align*}
    by using positive definiteness of the $C^0$-norm $\| \cdot \|_{C^0(U)}$.
    This shows that $\| \cdot \|_{C^m(U)}$ is positive definite.</p>
<p>Also we have 
    \begin{align*}
        \| \lambda f \|_{C^m(U)} &= \max_{|\alpha| \leq m} \, \|D^\alpha (\lambda f)\|_{C^0(U)} \\
            &= \max_{|\alpha| \leq m} \, |\lambda| \cdot \|D^\alpha f\|_{C^0(U)} \\
            &= |\lambda| \cdot \max_{|\alpha| \leq m} \, \|D^\alpha f\|_{C^0(U)} = |\lambda| \cdot \|f\|_{C^m(U)}
    \end{align*}
    by using homogeneity of the $C^0$-norm $\| \cdot \|_{C^0(U)}$.
    This shows that $\| \cdot \|_{C^m(U)}$ is homogeneous.</p>
<p>Finally we have 
    \begin{align*}
        \|f + g\|_{C^m(U)} &= \max_{|\alpha| \leq m} \, \|D^\alpha (f + g)\|_{C^0(U)} \\
            &\leq \max_{|\alpha| \leq m} \, \left( \|D^\alpha f\|_{C^0(U)} + \|D^\alpha g\|_{C^0(U)} \right) \\
            &\leq \max_{|\alpha| \leq m} \, \|D^\alpha f\|_{C^0(U)} + \max_{|\alpha| \leq m} \, \|D^\alpha g\|_{C^0(U)} = \|f\|_{C^m(U)} + \|g\|_{C^m(U)}
    \end{align*}
    by using the triangle inequality for the $C^0$-norm $\| \cdot \|_{C^0(U)}$.
    This shows that $\| \cdot \|_{C^m(U)}$ satisfies the triangle inequality.</p>
<p>In particular, $\| \cdot \|_{C^m(U)}$ is a norm on $C^m_\text{b}(U)$ and on $C^m_{\text{ana}}(\overline{U})$ because it is finite-valued on these subsets of $C^m(U)$.
    (Notice this function is not finite-valued on $C^m(U)$ and hence not a norm on $C^m(U)$; that is our reason for considering these subspaces).</p>
<p><div style="margin: 1em 0;"></div></p>
<p>A nearly identical proof shows that $\llbracket \:\! \cdot \:\! \rrbracket_{C^m(U)}$ is a norm on $C^m_\text{b}(U)$ and on $C^m_{\text{ana}}(\overline{U})$.</p>
<p><div style="margin: 1em 0;"></div></p>
<p>Finally see that if $f \in C^m(U)$, then 
    \[ \max_{|\alpha| \leq m} \, \|D^\alpha f\|_{C^0(U)} \leq \sum_{|\alpha| \leq m} \, \|D^\alpha f\|_{C^0(U)} \leq \left( \sum_{|\alpha| \leq m} 1 \right) \max_{|\alpha| \leq m} \, \|D^\alpha f\|_{C^0(U)} \]
    which says that 
    \[ \| f \|_{C^m(U)} \leq \llbracket f \rrbracket_{C^m(U)} \leq \left( \sum_{|\alpha| \leq m} 1 \right) \| f \|_{C^m(U)} \]
    so the two norms $\| \cdot \|_{C^m(U)}$ and $\llbracket \:\! \cdot \:\! \rrbracket_{C^m(U)}$ are equivalent on the spaces $C^m_\text{b}(U)$ and on $C^m_{\text{ana}}(\overline{U})$.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box proposition-box" id="prop:C1_b_is_Banach">
  <div class="theorem-header"><strong>Proposition ?</strong> ($C^1_{\text{b}}(U)$ is a Banach space)</div>
  <div class="theorem-content">Let $U \subseteq \R^n$ be an open set.
    Then the space $C^1_{\text{b}}(U)$ is a Banach space with respect to the $C^1$-norm $\| \cdot \|_{C^1(U)}$.</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-3">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-3')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-3">
    Let $\{ f_k \}_{k=1}^\infty$ be a Cauchy sequence in $C^1_{\text{b}}(U)$ with respect to the $C^1$-norm $\| \cdot \|_{C^1(U)}$.
    Then $\{ f_k \}_{k=1}^\infty$ is a Cauchy sequence in $C^0_{\text{b}}(U)$ with respect to the $C^0$-norm $\| \cdot \|_{C^0(U)}$,
    and for each $j \in \{1,2,\ldots,n\}$, the sequence of partial derivatives $\{ D_j f_k \}_{k=1}^\infty$ is a Cauchy sequence in $C^0_{\text{b}}(U)$.
    Since $C^0_{\text{b}}(U)$ is a Banach space with respect to the $C^0$-norm $\| \cdot \|_{C^0(U)}$, there are functions $f \in C^0_{\text{b}}(U)$ and $g_1, g_2, \ldots, g_n \in C^0_{\text{b}}(U)$ such that 
    \[ \lim_{k \to \infty} \|f_k - f\|_{C^0(U)} = 0 \]
    and \[ \lim_{k \to \infty} \|D_j f_k - g_j\|_{C^0(U)} = 0 \quad \text{for each } j \in \{1,2,\ldots,n\}. \]
<p>The main difficulty is to show that $f \in C^1_{\text{b}}(U)$ and that $D_j f = g_j$ for each $j \in \{1,2,\ldots,n\}$.</p>
<p>\[ \left\| f(x+h) - f(x) - \sum_{j=1}^n g_j(x) h_j \right\| = \]
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box corollary-box" id="cor:Cm_b_is_Banach">
  <div class="theorem-header"><strong>Corollary ?</strong> ($C^m_{\text{b}}(U)$ is a Banach space)</div>
  <div class="theorem-content">Let $U \subseteq \R^n$ be an open set and let $m \in \Z^+$.
    Then the space $C^m_{\text{b}}(U)$ is a Banach space with respect to the $C^m$-norm $\| \cdot \|_{C^m(U)}$.</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-4">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-4')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-4">
<p><span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box proposition-box" id="prop:C1_ana_is_Banach_for_bdd_U">
  <div class="theorem-header"><strong>Proposition ?</strong> ($C^1_{\text{ana}}(\overline{U})$ is a Banach space when $U$ is bounded)</div>
  <div class="theorem-content">Let $U \subseteq \R^n$ be a bounded open set.
    Then the space $C^1_\text{ana}(\overline{U})$ is also a Banach space with respect to the $C^1$-norm $\| \cdot \|_{C^1(U)}$.</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-5">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-5')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-5">
<p><span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box corollary-box" id="cor:Cm_ana_is_Banach_for_bdd_U">
  <div class="theorem-header"><strong>Corollary ?</strong> ($C^m_{\text{ana}}(\overline{U})$ is a Banach space when $U$ is bounded)</div>
  <div class="theorem-content">Let $U \subseteq \R^n$ be a bounded open set and let $m \in \Z^+$.
    Then the space $C^m_\text{ana}(\overline{U})$ is also a Banach space with respect to the $C^m$-norm $\| \cdot \|_{C^m(U)}$.</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-6">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-6')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-6">
<p><span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box exercise-box" id="ex:Cm_ana_is_Frechet">
  <div class="theorem-header"><strong>Exercise ?</strong> (Fr√©chet space structure on $C^m_{\text{ana}}(\overline{U})$ when $U$ is unbounded)</div>
  <div class="theorem-content">Let $U \subseteq \R^n$ be an open set and let $m \in \Z^+$.
    For each bounded open subset $V \subset U$ we define $\| \cdot \|_{C^m(V)}$ by
    \[ \|f\|_{C^m(V)} := \max_{|\alpha| \leq m} \, \|D^\alpha f\|_{C^0(V)}, \]
    and show that $\| \cdot \|_{C^m(V)}$ is a semi-norm on $C^m_{\text{ana}}(\overline{U})$.
<p>Now let $\{ V_k \}_{k=1}^\infty$ be an increasing sequence of bounded open subsets of $U$ such that $\bigcup_{k=1}^\infty V_k = U$.
    Then show that the family of semi-norms $\{ \| \cdot \|_{C^m(V_k)} \}_{k=1}^\infty$ gives $C^m_{\text{ana}}(\overline{U})$ the structure of a Fr√©chet space, and that the resulting topology on 
    $C^m_{\text{ana}}(\overline{U})$ is independent of the choice of the sequence $\{ V_k \}_{k=1}^\infty$.</p>
<p>In this topology, a sequence $\{ f_j \}_{j=1}^\infty$ in $C^m_{\text{ana}}(\overline{U})$ converges to $f \in C^m_{\text{ana}}(\overline{U})$ if and only if for each bounded open subset $V \subset U$, we have $\|f_j - f\|_{C^m(V)} \to 0$ as $j \to \infty$.</div>
</div></p>
<div class="proof-box collapsed" data-proof-id="proof-num-7">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-7')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-7">
    The fact that $\| \cdot \|_{C^m(V)}$ is a semi-norm on $C^m_{\text{ana}}(\overline{U})$ follows from the fact that $\| \cdot \|_{C^m(V)}$ is a norm on $C^m(V)$.
    Recall that this family of seminorms also defines the Fr√©chet space structure on $C^m(U)$, and that the resulting topology is independent of the choice of the sequence $\{ V_k \}_{k=1}^\infty$.
<p>See that $C^m_{\text{ana}}(\overline{U})$ is a linear subspace of $C^m(U)$, and we claim that $C^m_{\text{ana}}(\overline{U})$ is closed with respect to the topology defined by the family of seminorms $\{ \| \cdot \|_{C^m(V_k)} \}_{k=1}^\infty$.</p>
<p>Let $\{ f_j \}_{j=1}^\infty$ be a sequence in $C^m_{\text{ana}}(\overline{U})$ that converges to some $f \in C^m(U)$ with respect to 
    the family of seminorms $\{ \| \cdot \|_{C^m(V_k)} \}_{k=1}^\infty$.
    We need to show that $f \in C^m_{\text{ana}}(\overline{U})$, i.e. that $f$ and all of its derivatives of order $\leq m$ 
    are uniformly continuous on each bounded subset of $U$.</p>
<p>Let $V \subset U$ be a bounded open subset.
    Then there exists $N \in \Z^+$ such that $\overline{V} \subset V_N$, and hence $\|f_j - f\|_{C^m(V_N)} \to 0$ as $j \to \infty$.
    Since $C^m(\overline{V_N})$ is a Banach space with respect to the $C^m$-norm we just have $f|_{V_N} \in C^m(\overline{V_N})$.
    Then $V$ is a bounded subset of $V_N$, so $f|_V$ and all of its derivatives of order $\leq m$ are uniformly continuous on $V$.
    Thus $f$ and all of its derivatives of order $\leq m$ are uniformly continuous on each bounded subset of $U$, and hence $f \in C^m_{\text{ana}}(\overline{U})$.</p>
<p>Since $\{ f_j \}_{j=1}^\infty$ was an arbitrary convergent sequence in $C^m_{\text{ana}}(\overline{U})$, this shows that $C^m_{\text{ana}}(\overline{U})$ 
    is closed with respect to the topology defined by the family of seminorms $\{ \| \cdot \|_{C^m(V_k)} \}_{k=1}^\infty$.
    Since $C^m(U)$ is a Fr√©chet space with respect to this topology, it follows that $C^m_{\text{ana}}(\overline{U})$ is also a Fr√©chet space with respect to the induced topology.</p>
<p>Since the Frechet space topology on $C^m(U)$ does not depend on the choice of the sequence $\{ V_k \}_{k=1}^\infty$, 
    it follows that the induced topology on $C^m_{\text{ana}}(\overline{U})$ also does not depend on the choice of the sequence $\{ V_k \}_{k=1}^\infty$.</p>
<p><div style="margin: 1em 0;"></div></p>
<p>It remains to prove the final remark about convergence of sequences in $C^m_{\text{ana}}(\overline{U})$.</p>
<p>Let $\{ f_j \}_{j=1}^\infty$ be a sequence in $C^m_{\text{ana}}(\overline{U})$ and let $f \in C^m_{\text{ana}}(\overline{U})$.
    if and only if for each $k \in \Z^+$, we have $\|f_j - f\|_{C^m(V_k)} \to 0$ as $j \to \infty$.</p>
<p>Suppose that $\{ f_j \}_{j=1}^\infty$ converges to $f$ in the topology defined by the family of seminorms $\{ \| \cdot \|_{C^m(V_k)} \}_{k=1}^\infty$.
    For each bounded open subset $V \subset U$, there exists $N \in \Z^+$ such that $\overline{V} \subset V_N$, and hence
    \[ \lim_{j\to\infty} \| f_j - f \|_{C^m(V_N)} = 0 \]
    implies 
    \[ \lim_{j\to\infty} \| f_j - f \|_{C^m(V)} = 0. \]
    Since $V$ was an arbitrary bounded open subset of $U$, this shows that for each bounded open subset $V \subset U$, we have $\|f_j - f\|_{C^m(V)} \to 0$ as $j \to \infty$.</p>
<p>Conversely, if $\{ f_j \}_{j=1}^\infty$ converges to $f$ in the $\| \cdot \|_{C^m(V)}$-norm for each bounded open subset $V \subset U$, then clearly $\{ f_j \}_{j=1}^\infty$ converges to $f$ in the topology defined by the family of seminorms $\{ \| \cdot \|_{C^m(V_k)} \}_{k=1}^\infty$.
    Since $\{ f_j \}_{j=1}^\infty$ was an arbitrary sequence in $C^m_{\text{ana}}(\overline{U})$ and $f \in C^m_{\text{ana}}(\overline{U})$ was arbitrary, this proves the final remark about convergence of sequences in $C^m_{\text{ana}}(\overline{U})$.
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<h3>When the two definitions of $C^m(\overline{U</h3>)$ agree}
<p>In this section, we will show that under a simple geometric condition on the open set $U$, the two definitions of $C^m(\overline{U})$ coincide in the sense that the natural inclusion map
\[ C^m_{\text{geo}}(\overline{U}) \hookrightarrow C^m_{\text{ana}}(\overline{U}), \qquad f \longmapsto f|_U \]
from <span class="ref-unknown" title="Reference not found: rem:natural_inclusion_of_Cm_spaces">[rem:natural_inclusion_of_Cm_spaces?]</span> is a bijection and the Whitney extension map is the inverse of the restriction map.</p>
<div class="theorem-box definition-box" id="def:quasiconvex">
  <div class="theorem-header"><strong>Definition ?</strong> (Quasiconvex)</div>
  <div class="theorem-content">Let $S \subseteq \R^n$ be an arbtrary set.
    We say that $S$ is <em>quasiconvex</em> if there exists a constant $C \geq 1$ such that for every pair of points $x,y \in S$, there is a curve $\sigma : [0,1] \to U$ 
    such that $\sigma(0) = x$, $\sigma(1) = y$, and
    \[ \operatorname{length}(\sigma) \leq C \|x - y\|. \]
    If the constant $C$ is important, we say that the set $S$ is $C$<em>-quasiconvex</em>.</div>
</div>
<p>Note that the curve $\sigma$ supposed to exist in the definition must be rectifiable, so that its length is well-defined and finite.</p>
<p>Of course, if $S$ is convex, then $S$ is $1$-quasiconvex because every pair of points in $S$ can be connected by a line segment, which has length equal to the distance between the two points.
The definition of quasiconvexity is a weakening of convexity, in the sense that $S$ may not be convex, but still every pair of points in $S$ can be connected by a curve whose length is at
most a constant multiple of the distance between the two points.</p>
<div class="theorem-box lemma-box" id="lem:closure_of_quasiconvex_open_set_is_quasiconvex">
  <div class="theorem-header"><strong>Lemma ?</strong> (The closure of a quasiconvex open set is quasiconvex)</div>
  <div class="theorem-content">Let $U \subseteq \R^n$ be an open quasiconvex set.
    Then $\overline{U}$ is also quasiconvex.</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-8">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-8')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-8">
    In fact if $U$ is $C$-quasiconvex, then $\overline{U}$ is $C_*$-quasiconvex for each $C_* > C$.
    <span class="proof-end">‚ñ°</span>
  </div>
</div>
<div class="theorem-box proposition-box" id="prop:remainder_formula">
  <div class="theorem-header"><strong>Proposition ?</strong> (Remainder Formula)</div>
  <div class="theorem-content">Let $\sigma: [0,L] \to \R^n$ be a rectificable curve which is parametrized by arc length, and has endpoints $\sigma(0) = a$ and $\sigma(L) = x$.
    Let $A = \sigma([0,L])$ be the image of $\sigma$.
    If $f^\bullet \in \mathcal{W}^m(A)$, then for each $\alpha \in \N^n$ with $|\alpha| \leq m$, the remainder term $R^m_a f^\bullet$ satisfies 
    \[ (R^m_a f^\bullet)^{(\alpha)}(x) = - \sum_{|\beta| = m - |\alpha|} \frac{1}{\beta!} \int_0^L 
        \left[ f^{(\alpha + \beta)}(\sigma(t)) - f^{(\alpha+\beta)}(x) \right] \, \dif\left( (a-\sigma(t))^\beta \right). \]</div>
</div>
<p>Here the integral is a Riemann-Stieltjes integral, as introduced in our Complex Analysis text.</p>
<div class="proof-box collapsed" data-proof-id="proof-num-9">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-9')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-9">
    Fix a Whitney jet $f^\bullet \in \mathcal{W}^m(A)$ and let $\alpha$ be a multi-index with $|\alpha| \leq m$.
<p><div style="margin: 1em 0;"></div>
    <em>Step 1:</em>
    Consider an arbitrary partition $P$ of the interval $[0,L]$ given by
    \[ 0 = t_0 < t_1 < \cdots < t_N = L. \]</p>
<p>\[ (R^m_a f^\bullet)^{(\alpha)}(\sigma(t_{j-1})) - (R^m_a f^\bullet)^{(\alpha)}(\sigma(t_j)) =
        \sum_{|\beta| \leq m - |\alpha|} \frac{\left(R^m_{\sigma(t_j)} f^\bullet\right)^{(\alpha+\beta)}(\sigma(t_{j-1})) }{\beta!}(a-\sigma(t_j))^\beta \]</p>
<p><strong>SIMPLEST VERSION</strong></p>
<p>\[ (R^m_a f^\bullet)^{(\alpha)}(z) - (R^m_a f^\bullet)^{(\alpha)}(y) =
        \sum_{|\beta| \leq m - |\alpha|} \frac{\left(R^m_{y} f^\bullet\right)^{(\alpha+\beta)}(z) }{\beta!}(a-y)^\beta \tag{$\leafNW$} \]</p>
<div class="subproof collapsed" data-subproof-id="subproof-1763576799689-0">
      <div class="subproof-header">
        <button class="subproof-toggle" onclick="toggleSubproof('subproof-1763576799689-0')" aria-expanded="false">
          <span class="subproof-toggle-icon">‚ñº</span>
          <strong>Proof</strong>
        </button>
      </div>
      <div class="subproof-content" id="subproof-1763576799689-0">
<p><span class="proof-end">‚ñ°</span>
      </div>
    </div></p>
<p>Hence <strong>SOMETHING I DONT UNDERSTAND WHY IS TRUE, BUT IF IT IS THEN</strong></p>
<p>summing over $j$ gives
    \[ (R^m_a f^\bullet)^{(\alpha)}(x) = \sum_{|\beta|\leq m - |\alpha|} \frac{1}{\beta!}
        \sum_{j=1}^N \left(R^m_{\sigma(t_j)} f^\bullet\right)^{(\alpha+\beta)}(\sigma(t_{j-1})) (a-\sigma(t_j))^\beta \tag{$\bomb$} \]</p>
<p><div style="margin: 1em 0;"></div>
    <em>Step 2</em>: We claim that if $\beta$ is a multi-index with $|\beta| < m - |\alpha|$ then for each $\epsilon > 0$ there is a $\delta > 0$ 
    such that if $P$ is a partition of $[0,L]$ given by
    \[ 0 = t_0 < t_1 < \cdots < t_N = L \]
    and satisfies $\displaystyle\max_{1 \leq j \leq N} (t_j - t_{j-1}) < \delta$, then
    \[ \left| \sum_{j=1}^N \left(R^m_{\sigma(t_j)} f^\bullet\right)^{(\alpha+\beta)}(\sigma(t_{j-1})) (a-\sigma(t_j))^\beta \right| < \epsilon. \]</p>
<div class="subproof collapsed" data-subproof-id="subproof-1763576799689-1">
      <div class="subproof-header">
        <button class="subproof-toggle" onclick="toggleSubproof('subproof-1763576799689-1')" aria-expanded="false">
          <span class="subproof-toggle-icon">‚ñº</span>
          <strong>Proof</strong>
        </button>
      </div>
      <div class="subproof-content" id="subproof-1763576799689-1">
<p><span class="proof-end">‚ñ°</span>
      </div>
    </div></p>
<p>Now for each multi-index $\beta$ with $|\beta| = m - |\alpha|$, we have
    \begin{align*}
        \sum_{j=1}^N \left(R^m_{\sigma(t_j)} f^\bullet\right)^{(\alpha+\beta)}(\sigma(t_{j-1})) (a-\sigma(t_j))^\beta &=
            \sum_{j=1}^N ...
    \end{align*}</p>
<p>Thus plugging this into ($\bomb$) and taking the limit as the mesh of the partition $P$ tends to zero gives
    <span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box lemma-box" id="lemma-?">
  <div class="theorem-header"><strong>Lemma ?</strong></div>
  <div class="theorem-content">Let $\sigma: [0,L] \to \R^n$ be a rectificable curve which is parametrized by arc length, and has endpoints $\sigma(0) = a$ and $\sigma(L) = x$.
    Let $A = \sigma([0,L])$ be the image of $\sigma$.
    If $f^\bullet \in \mathcal{W}^m(A)$, then for each $\alpha \in \N^n$ with $|\alpha| = m$, and $\delta > 0$ is such that 
    \[ \left| f^{(\alpha)}(\sigma(t)) - f^{(\alpha)}(x) \right| < \delta \]
    then
    \[ \left| (R^m_a f^\bullet)^{(\alpha)}(x) \right| < n(m+1)^n L^{m-|\alpha|}\delta^5 \]</div>
</div>
<div class="theorem-box remark-box collapsible-box collapsed" id="remark-?" data-collapsible-id="collapsible-remark-3">
  <div class="theorem-header clickable" onclick="toggleCollapsible('collapsible-remark-3')">
    <span class="collapsible-icon">‚ñº</span>
    <strong>Remark ?</strong>
  </div>
  <div class="theorem-content collapsible-content" id="collapsible-remark-3">The factor $n(m+1)^n$ is the number of multi-indices $\beta$ with $|\beta| = m - |\alpha|$ --- <strong>CHECK THIS</strong>
    and thus may be replaced by the factor
    \[ \sum \sum \frac{1}{!} = \frac{n^{m-|\alpha|}}{(m-|\alpha|-1)!} \]</div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-10">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-10')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-10">
<p><span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box lemma-box" id="lemma-?">
  <div class="theorem-header"><strong>Lemma ?</strong></div>
  <div class="theorem-content"></div>
</div>
<div class="proof-box collapsed" data-proof-id="proof-num-11">
  <div class="proof-header">
    <button class="proof-toggle" onclick="toggleProof('proof-num-11')" aria-expanded="false">
      <span class="proof-toggle-icon">‚ñº</span>
      <strong>Proof</strong>
    </button>
  </div>
  <div class="proof-content" id="proof-num-11">
<p><span class="proof-end">‚ñ°</span>
  </div>
</div></p>
<div class="theorem-box theorem-box" id="theorem-?">
  <div class="theorem-header"><strong>Theorem ?</strong></div>
  <div class="theorem-content"></div>
</div>
<p></p>
    </main>
  </div>
  
  <script>
    function toggleChapter(element) {
      element.parentElement.classList.toggle('expanded');
    }
    
    // Highlight current page in sidebar
    document.addEventListener('DOMContentLoaded', () => {
      const currentPath = window.location.pathname;
      const links = document.querySelectorAll('.section-link');
      links.forEach(link => {
        if (currentPath.endsWith(link.getAttribute('href').split('/').pop())) {
          link.classList.add('active');
          // Expand parent chapter
          const group = link.closest('.chapter-group');
          if (group) group.classList.add('expanded');
        }
      });
    });
    
    window.addEventListener('DOMContentLoaded', () => {
      console.log('Restoring proof collapse states...');
      try {
        const openProofs = JSON.parse(localStorage.getItem('openProofs') || '{}');
        const currentPage = window.location.pathname;
        const pageOpen = openProofs[currentPage] || [];
        
        console.log('Current page:', currentPage);
        console.log('Open proof IDs stored:', pageOpen);
        console.log('Found ' + pageOpen.length + ' open proofs for this page');
        
        document.querySelectorAll('.proof-box').forEach(box => {
          const proofId = box.getAttribute('data-proof-id');
          console.log('Checking proof:', proofId, 'Should be open:', pageOpen.includes(proofId));
          if (pageOpen.includes(proofId)) {
            box.classList.remove('collapsed');
            const button = box.querySelector('.proof-toggle');
            button.setAttribute('aria-expanded', 'true');
          } else {
            box.classList.add('collapsed');
            const button = box.querySelector('.proof-toggle');
            button.setAttribute('aria-expanded', 'false');
          }
        });
        
        const openBoxes = JSON.parse(localStorage.getItem('openBoxes') || '{}');
        const pageBoxes = openBoxes[currentPage] || [];
        
        console.log('Open box IDs stored:', pageBoxes);
        
        document.querySelectorAll('.collapsible-box').forEach(box => {
          const boxId = box.getAttribute('data-collapsible-id');
          console.log('Checking box:', boxId, 'Should be open:', pageBoxes.includes(boxId));
          if (pageBoxes.includes(boxId)) {
            box.classList.remove('collapsed');
          } else {
            box.classList.add('collapsed');
          }
        });
        
        console.log('Proof states restored');
      } catch (e) {
        console.error('Error restoring collapse state:', e);
      }
    });
    
    function toggleProof(proofId) {
      const proofContent = document.getElementById(proofId);
      const proofBox = proofContent.closest('.proof-box');
      proofBox.classList.toggle('collapsed');
      
      const button = proofBox.querySelector('.proof-toggle');
      button.setAttribute('aria-expanded', !proofBox.classList.contains('collapsed'));
      
      saveProofState();
    }
    
    function toggleSubproof(subproofId) {
      const subproofContent = document.getElementById(subproofId);
      const subproof = subproofContent.closest('.subproof');
      subproof.classList.toggle('collapsed');
      
      const button = subproof.querySelector('.subproof-toggle');
      button.setAttribute('aria-expanded', !subproof.classList.contains('collapsed'));
    }
    
    function saveProofState() {
      try {
        const currentPage = window.location.pathname;
        const openProofs = JSON.parse(localStorage.getItem('openProofs') || '{}');
        if (!openProofs[currentPage]) {
          openProofs[currentPage] = [];
        }
        
        openProofs[currentPage] = [];
        document.querySelectorAll('.proof-box:not(.collapsed)').forEach(box => {
          const proofId = box.getAttribute('data-proof-id');
          if (proofId) {
            openProofs[currentPage].push(proofId);
          }
        });
        
        localStorage.setItem('openProofs', JSON.stringify(openProofs));
        console.log('Saved proof state (open proofs):', openProofs[currentPage]);
      } catch (e) {
        console.error('Error saving collapse state:', e);
      }
    }
    
    function toggleCollapsible(collapsibleId) {
      const content = document.getElementById(collapsibleId);
      const box = content.closest('.collapsible-box');
      box.classList.toggle('collapsed');
      
      saveCollapsibleState();
    }
    
    function saveCollapsibleState() {
      try {
        const currentPage = window.location.pathname;
        const openBoxes = JSON.parse(localStorage.getItem('openBoxes') || '{}');
        if (!openBoxes[currentPage]) {
          openBoxes[currentPage] = [];
        }
        
        openBoxes[currentPage] = [];
        document.querySelectorAll('.collapsible-box:not(.collapsed)').forEach(box => {
          const boxId = box.getAttribute('data-collapsible-id');
          if (boxId) {
            openBoxes[currentPage].push(boxId);
          }
        });
        
        localStorage.setItem('openBoxes', JSON.stringify(openBoxes));
      } catch (e) {
        console.error('Error saving box state:', e);
      }
    }
    
    document.addEventListener('keydown', (e) => {
      if (e.key === 'p' && e.ctrlKey) {
        e.preventDefault();
        const proofBoxes = document.querySelectorAll('.proof-box');
        const anyExpanded = Array.from(proofBoxes).some(box => !box.classList.contains('collapsed'));
        
        proofBoxes.forEach(box => {
          if (anyExpanded) {
            box.classList.add('collapsed');
          } else {
            box.classList.remove('collapsed');
          }
        });
        
        saveProofState();
      }
    });
    
    document.querySelectorAll('a.ref-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href').substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'center' });
          target.style.background = '#fef3c7';
          target.style.transition = 'background 0.3s ease';
          setTimeout(() => { target.style.background = ''; }, 1500);
        }
      });
    });
  </script>
</body>
</html>